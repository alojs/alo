/*!
 * alo
 * Copyright(c) 2019 Katja Lutz
 * MIT Licensed
 * https://opensource.org/licenses/MIT
*/
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.observable=r():(e.alo=e.alo||{},e.alo.observable=r())}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=35)}({1:function(e,r,t){"use strict";t.d(r,"i",function(){return s}),t.d(r,"h",function(){return y}),t.d(r,"j",function(){return g}),t.d(r,"k",function(){return h}),t.d(r,"g",function(){return O}),t.d(r,"f",function(){return I}),t.d(r,"a",function(){return x}),t.d(r,"c",function(){return P}),t.d(r,"b",function(){return k}),t.d(r,"e",function(){return M}),t.d(r,"d",function(){return A});var n,o=t(21),u=t.n(o),i=t(14),c=(n=0,function(){return"@observer".concat(n+=1)}),f=function(){var e=0;return function(){return"@observable".concat(e+=1)}}(),a={},d={};function l(e){return null!==e&&"object"===u()(e)&&null!=e.__observableId}var s=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b.id&&(b.pause=e)},b={id:null,pause:!1};function v(e){var r=b.id,t=b.pause;b.pause=!1,b.id=e;var n=a[e];if(n.running)throw console.error("Bad observer",n.fn),new Error("Bad recursion detected in observer");n.running=!0,n.fn(s),n.running=!1,b.id=r,b.pause=t}function p(e,r,t,n){e[t]!==n&&(e[t]=n,S(Object.keys(r)))}function y(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=c();return a[t]={running:!1,notifyInBatches:r,fn:e,targetObserverIdSets:[]},v(t),function(){a[t].targetObserverIdSets.forEach(function(e){delete e[t]})}}var g=function(e,r){var t=d[e.__observableId],n=t.storage,o=t.propObserverIdSetMap;delete n[r],delete e[r],delete o[r]},h=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=d[e.__observableId],u=o.storage,c=o.propObserverIdSetMap,f=c[r]=c[r]||{};if(n)if(Array.isArray(t))for(var l=0,s=Object.keys(t);l<s.length;l++){var v=s[l],y=t[v];Object(i.a)(y)&&(t[v]=O(y))}else Object(i.a)(t)&&(t=O(t));if(void 0!==u[r]&&void 0!==e[r])return console.log("already existing"),void p(u,f,r,t);Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){if(b.pause)return u[r];var e=b.id;return!e||f[e]?u[r]:(f[e]=!0,a[e].targetObserverIdSets.push(f),u[r])}}),u[r]=t,Object.defineProperty(e,r,{set:function(e){p(u,f,r,e)}})};function O(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(l(e))return e;if(Array.isArray(e))throw new Error("Array object cannot be Reactive");var t=f(),n={};d[t]={storage:{},propObserverIdSetMap:{}},Object.defineProperty(n,"__observableId",{value:t});for(var o=0,u=Object.keys(e);o<u.length;o++){var i=u[o];h(n,i,e[i],r)}return n}var m={},j=0,S=function(e){var r=j++,t=!0;_.count>0&&(t=!1);var n=!0,o=!1,u=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var f=i.value;null==m[f]&&(m[f]=r)}}catch(e){o=!0,u=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}var d=!0,l=!1,s=void 0;try{for(var b,p=e[Symbol.iterator]();!(d=(b=p.next()).done);d=!0){var y=b.value,g=a[y].notifyInBatches;if(t||!0===g||g===_.batchId){if(m[y]!==r)continue;v(y)}else-1===_.observerIds.indexOf(y)&&_.observerIds.push(y);delete m[y]}}catch(e){l=!0,s=e}finally{try{d||null==p.return||p.return()}finally{if(l)throw s}}};function I(e,r){if(l(e)){var t=d[e.__observableId].propObserverIdSetMap[r];S(Object.keys(t))}}var _={count:0,observerIds:[],batchId:null},x=function(e){P(),e(),k()},P=function(){_.count++},k=function(){if(0!==_.count&&(_.count--,0===_.count)){var e=_.observerIds;_.observerIds=[],S(e)}};function M(e){for(var r={},t=d[e.__observableId].storage,n=0,o=Object.keys(t);n<o.length;n++){var u=o[n],i=t[u];r[u]=l(i)?M(i):i}return r}var w=0,A=function(e){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t="computed-props-"+w++,n={},o=Object.keys(e),u=0,i=o;u<i.length;u++){var c=i[u];n[c]=null}n=O(n,!1);for(var f=function(){var o=l[a],u=!0;y(function(i){var c=_.batchId;r&&(P(),_.batchId=t),n[o]=e[o](n,d[n.__observableId].storage[o],o,i,u),r&&(k(),_.batchId=c)},t),u=!1},a=0,l=o;a<l.length;a++)f();return n}},14:function(e,r,t){"use strict";t.d(r,"a",function(){return o});var n={}.toString,o=function(e){return!(!e||"[object Object]"!==n.call(e))}},21:function(e,r){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n},33:function(e,r){},35:function(e,r,t){"use strict";t.r(r);var n=t(1);t.d(r,"pauseObserver",function(){return n.i}),t.d(r,"observe",function(){return n.h}),t.d(r,"removeProp",function(){return n.j}),t.d(r,"setProp",function(){return n.k}),t.d(r,"observable",function(){return n.g}),t.d(r,"notify",function(){return n.f}),t.d(r,"batch",function(){return n.a}),t.d(r,"batchStart",function(){return n.c}),t.d(r,"batchEnd",function(){return n.b}),t.d(r,"getOriginObject",function(){return n.e}),t.d(r,"computedProps",function(){return n.d});var o=t(33);for(var u in o)["pauseObserver","observe","removeProp","setProp","observable","notify","batch","batchStart","batchEnd","getOriginObject","computedProps","default"].indexOf(u)<0&&function(e){t.d(r,e,function(){return o[e]})}(u)}})});
//# sourceMappingURL=observable.js.map