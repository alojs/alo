/*!
 * alo
 * Copyright(c) 2019 Katja Lutz
 * MIT Licensed
 * https://opensource.org/licenses/MIT
*/
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.observable=r():(e.alo=e.alo||{},e.alo.observable=r())}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=35)}({14:function(e,r){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n},18:function(e,r,t){"use strict";t.d(r,"a",function(){return u});var n=t(14),o=t.n(n),u=function(e){return null!==e&&"object"===o()(e)&&!Array.isArray(e)}},3:function(e,r,t){"use strict";t.d(r,"h",function(){return g}),t.d(r,"i",function(){return h}),t.d(r,"j",function(){return m}),t.d(r,"g",function(){return O}),t.d(r,"f",function(){return _}),t.d(r,"a",function(){return P}),t.d(r,"c",function(){return M}),t.d(r,"b",function(){return w}),t.d(r,"e",function(){return A}),t.d(r,"d",function(){return E});var n,o=t(14),u=t.n(o),i=t(18),c=(n=0,function(){return"@observer".concat(n+=1)}),f=function(){var e=0;return function(){return"@observable".concat(e+=1)}}(),a={},l={},b=[];function d(e){return null!==e&&"object"===u()(e)&&null!=e.__observableId}var s=!1,v=function(){s||(s=!0,b.pop())};function p(e){s=!1,b.push(e);var r=a[e];if(r.running)throw console.error("Bad observer",r.fn),new Error("Bad recursion detected in observer");r.running=!0,r.fn(v),r.running=!1,s||b.pop(),s=!1}function y(e,r,t,n){e[t]!==n&&(e[t]=n,S(Object.keys(r)))}function g(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=c();return a[t]={running:!1,notifyInBatches:r,fn:e,targetObserverIdSets:[]},p(t),function(){a[t].targetObserverIdSets.forEach(function(e){delete e[t]})}}var h=function(e,r){var t=l[e.__observableId],n=t.storage,o=t.propObserverIdSetMap;delete n[r],delete e[r],delete o[r]},m=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=l[e.__observableId],c=o.storage,f=o.propObserverIdSetMap,d=f[r]=f[r]||{};if(n&&(null!==t&&"object"===u()(t)))if(Array.isArray(t))for(var s=0,v=Object.keys(t);s<v.length;s++){var p=v[s],g=t[p];Object(i.a)(g)&&(t[p]=O(g))}else t=O(t);if(void 0!==c[r]&&void 0!==e[r])return console.log("already existing"),void y(c,d,r,t);Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var e=b[b.length-1];return e&&!d[e]&&(d[e]=!0,a[e].targetObserverIdSets.push(d)),c[r]}}),c[r]=t,Object.defineProperty(e,r,{set:function(e){y(c,d,r,e)}})};function O(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(d(e))return e;if(Array.isArray(e))throw new Error("Array object cannot be Reactive");var t=f(),n={};l[t]={storage:{},propObserverIdSetMap:{}},Object.defineProperty(n,"__observableId",{value:t});for(var o=0,u=Object.keys(e);o<u.length;o++){var i=u[o];m(n,i,e[i],r)}return n}var j={},I=0,S=function(e){var r=I++,t=!0;x.count>0&&(t=!1);var n=!0,o=!1,u=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var f=i.value;null==j[f]&&(j[f]=r)}}catch(e){o=!0,u=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}var l=!0,b=!1,d=void 0;try{for(var s,v=e[Symbol.iterator]();!(l=(s=v.next()).done);l=!0){var y=s.value,g=a[y].notifyInBatches;if(t||!0===g||g===x.batchId){if(j[y]!==r)continue;p(y)}else-1===x.observerIds.indexOf(y)&&x.observerIds.push(y);delete j[y]}}catch(e){b=!0,d=e}finally{try{l||null==v.return||v.return()}finally{if(b)throw d}}};function _(e,r){if(d(e)){var t=l[e.__observableId].propObserverIdSetMap[r];S(Object.keys(t))}}var x={count:0,observerIds:[],batchId:null},P=function(e){M(),e(),w()},M=function(){x.count++},w=function(){if(0!==x.count&&(x.count--,0===x.count)){var e=x.observerIds;x.observerIds=[],S(e)}};function A(e){for(var r={},t=l[e.__observableId].storage,n=0,o=Object.keys(t);n<o.length;n++){var u=o[n],i=t[u];r[u]=d(i)?A(i):i}return r}var k=0,E=function(e){for(var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t="computed-props-"+k++,n={},o=Object.keys(e),u=0,i=o;u<i.length;u++){var c=i[u];n[c]=null}n=O(n,!1);for(var f=function(){var o=b[a],u=!0;g(function(i){var c=x.batchId;r&&(M(),x.batchId=t);var f=e[o](n,l[n.__observableId].storage[o],o,i,u);i(),n[o]=f,r&&(w(),x.batchId=c)},t),u=!1},a=0,b=o;a<b.length;a++)f();return n}},33:function(e,r){},35:function(e,r,t){"use strict";t.r(r);var n=t(3);t.d(r,"observe",function(){return n.h}),t.d(r,"removeProp",function(){return n.i}),t.d(r,"setProp",function(){return n.j}),t.d(r,"observable",function(){return n.g}),t.d(r,"notify",function(){return n.f}),t.d(r,"batch",function(){return n.a}),t.d(r,"batchStart",function(){return n.c}),t.d(r,"batchEnd",function(){return n.b}),t.d(r,"getOriginObject",function(){return n.e}),t.d(r,"computedProps",function(){return n.d});var o=t(33);for(var u in o)["observe","removeProp","setProp","observable","notify","batch","batchStart","batchEnd","getOriginObject","computedProps","default"].indexOf(u)<0&&function(e){t.d(r,e,function(){return o[e]})}(u)}})});
//# sourceMappingURL=observable.js.map