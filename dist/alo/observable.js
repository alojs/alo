/*!
 * alo
 * Copyright(c) 2019 Katja Lutz
 * MIT Licensed
 * https://opensource.org/licenses/MIT
*/
!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.observable=n():(t.alo=t.alo||{},t.alo.observable=n())}("undefined"!=typeof self?self:this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=44)}([,,,,function(t,n,e){"use strict";e.d(n,"h",function(){return S}),e.d(n,"i",function(){return I}),e.d(n,"g",function(){return _}),e.d(n,"f",function(){return m}),e.d(n,"a",function(){return E}),e.d(n,"d",function(){return T}),e.d(n,"c",function(){return F}),e.d(n,"b",function(){return k}),e.d(n,"e",function(){return D});var r,o=e(13),u=e.n(o),i=e(22),c=e.n(i),f=e(12),a=e.n(f),l=e(19),s=e.n(l),v=(r=0,function(){return"@observer".concat(r+=1)}),b=function(){var t=0;return function(){return"@observable".concat(t+=1)}}(),d={},p={},y=[];function O(t){return s()(t)&&null!=t.__observableId}var g=!1,h=function(){g||(g=!0,y.pop())};function j(t){g=!1,y.push(t),d[t].fn(h),g||y.pop(),g=!1}function x(t,n,e,r){t[e]!==r&&(t[e]=r,w(n))}function S(t){var n=v();return d[n]={fn:t,targetObserverIdSets:[]},j(n),function(){d[n].targetObserverIdSets.forEach(function(t){delete t[n]})}}var I=function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(Object.getOwnPropertyDescriptor(t,n)||{}).get,i=p[t.__observableId],f=i.storage,l=i.propObserverIdSetMap[n]={};if(r)if(a()(e))e=_(e);else if(c()(e))for(var s=0,v=Object.entries(e);s<v.length;s++){var b=u()(v[s],2),O=b[0],g=b[1];a()(g)&&(e[O]=_(g))}if(void 0!==f[n])return console.log("already existing"),void x(f,l,n,e);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){var t=y[y.length-1];return t&&!l[t]&&(l[t]=!0,d[t].targetObserverIdSets.push(l)),f[n]}}),"function"==typeof o?S(function(){var e=o.call(t);x(f,l,n,e)}):(f[n]=e,Object.defineProperty(t,n,{set:function(t){x(f,l,n,t)}}))};function _(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(O(t))return t;if(Array.isArray(t))throw new Error("Array object cannot be Reactive");var e=b(),r={};p[e]={storage:{},propObserverIdSetMap:{}},Object.defineProperty(r,"__observableId",{value:e});for(var o=0,i=Object.entries(t);o<i.length;o++){var c=u()(i[o],2),f=c[0],a=c[1];I(r,f,a,n)}return r}var w=function(t){var n,e=!0;null!=P&&(n=A[P]).count>0&&(e=!1);for(var r=0,o=Object.keys(t);r<o.length;r++){var u=o[r];if(e)j(u);else{if(n.observerIds.indexOf(u)>=0)continue;n.observerIds.push(u)}}};function m(t,n){if(O(t)){var e=p[t.__observableId].propObserverIdSetMap[n];w(e)}}var P,A={},M=0,E=function(t){var n=null!=P?T(P):T();t(),k(n)},T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M++;return P=t,null==A[t]&&(A[t]={count:0,observerIds:[]}),A[t].count++,t},F=function(){P=void 0},k=function(t){var n=A[t];if(n.count--,0===n.count){var e=!0,r=!1,o=void 0;try{for(var u,i=n.observerIds[Symbol.iterator]();!(e=(u=i.next()).done);e=!0){j(u.value)}}catch(t){r=!0,o=t}finally{try{e||null==i.return||i.return()}finally{if(r)throw o}}delete A[t],P=void 0}};function D(t){for(var n={},e=p[t.__observableId].storage,r=0,o=Object.keys(e);r<o.length;r++){var u=o[r],i=e[u];n[u]=O(i)?D(i):i}return n}},,,,,,,,function(t,n,e){var r=e(24),o=e(40),u=e(19),i="[object Object]",c=Function.prototype,f=Object.prototype,a=c.toString,l=f.hasOwnProperty,s=a.call(Object);t.exports=function(t){if(!u(t)||r(t)!=i)return!1;var n=o(t);if(null===n)return!0;var e=l.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&a.call(e)==s}},function(t,n,e){var r=e(41),o=e(42),u=e(43);t.exports=function(t,n){return r(t)||o(t,n)||u()}},,,,,,function(t,n){t.exports=function(t){return null!=t&&"object"==typeof t}},,function(t,n,e){var r=e(31),o="object"==typeof self&&self&&self.Object===Object&&self,u=r||o||Function("return this")();t.exports=u},function(t,n){var e=Array.isArray;t.exports=e},,function(t,n,e){var r=e(25),o=e(38),u=e(39),i="[object Null]",c="[object Undefined]",f=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?c:i:f&&f in Object(t)?o(t):u(t)}},function(t,n,e){var r=e(21).Symbol;t.exports=r},,,,,,function(t,n,e){(function(n){var e="object"==typeof n&&n&&n.Object===Object&&n;t.exports=e}).call(this,e(37))},function(t,n){t.exports=function(t,n){return function(e){return t(n(e))}}},,,function(t,n){},,function(t,n){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n,e){var r=e(25),o=Object.prototype,u=o.hasOwnProperty,i=o.toString,c=r?r.toStringTag:void 0;t.exports=function(t){var n=u.call(t,c),e=t[c];try{t[c]=void 0;var r=!0}catch(t){}var o=i.call(t);return r&&(n?t[c]=e:delete t[c]),o}},function(t,n){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},function(t,n,e){var r=e(32)(Object.getPrototypeOf,Object);t.exports=r},function(t,n){t.exports=function(t){if(Array.isArray(t))return t}},function(t,n){t.exports=function(t,n){var e=[],r=!0,o=!1,u=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(e.push(i.value),!n||e.length!==n);r=!0);}catch(t){o=!0,u=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw u}}return e}},function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,n,e){"use strict";e.r(n);var r=e(4);e.d(n,"observe",function(){return r.h}),e.d(n,"set",function(){return r.i}),e.d(n,"observable",function(){return r.g}),e.d(n,"notify",function(){return r.f}),e.d(n,"batch",function(){return r.a}),e.d(n,"batchStart",function(){return r.d}),e.d(n,"batchPause",function(){return r.c}),e.d(n,"batchEnd",function(){return r.b}),e.d(n,"getOriginObject",function(){return r.e});var o=e(35);for(var u in o)["observe","set","observable","notify","batch","batchStart","batchPause","batchEnd","getOriginObject","default"].indexOf(u)<0&&function(t){e.d(n,t,function(){return o[t]})}(u)}])});
//# sourceMappingURL=observable.js.map