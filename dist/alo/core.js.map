{"version":3,"sources":["webpack://alo.[name]/webpack/universalModuleDefinition","webpack://alo.[name]/webpack/bootstrap","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://alo.[name]/./lib/alo/observable/index.ts","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/createClass.js","webpack://alo.[name]/./lib/alo/event/index.ts","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/inherits.js","webpack://alo.[name]/./lib/alo/util/dispatchBatch.ts","webpack://alo.[name]/./lib/alo/util/index.ts","webpack://alo.[name]/./lib/alo/store/index.ts","webpack://alo.[name]/./lib/alo/actionNormalizer/index.ts","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/typeof.js","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/objectSpread.js","webpack://alo.[name]/./lib/alo/mutator/index.ts","webpack://alo.[name]/./lib/alo/util/isPlainObject.ts","webpack://alo.[name]/./lib/alo/actionResolver/index.ts","webpack://alo.[name]/./lib/alo/action/index.ts","webpack://alo.[name]/./lib/alo/subscribable/index.ts","webpack://alo.[name]/./lib/alo/actionNormalizer/batchActionNormalizerDecorator.ts","webpack://alo.[name]/./lib/alo/actionResolver/batchActionResolverDecorator.ts","webpack://alo.[name]/./lib/alo/util/dispatchThunk.ts","webpack://alo.[name]/(webpack)/buildin/module.js","webpack://alo.[name]/./lib/alo/main/core.ts","webpack://alo.[name]/./node_modules/fast-clone/index.js","webpack://alo.[name]/./lib/alo/main/observable.ts","webpack://alo.[name]/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://alo.[name]/./lib/alo/undoable/index.ts","webpack://alo.[name]/./lib/alo/actionNormalizer/dateActionNormalizerDecorator.ts","webpack://alo.[name]/./lib/alo/actionNormalizer/undoableActionNormalizerDecorator.ts","webpack://alo.[name]/./lib/alo/util/dispatchPromise.ts","webpack://alo.[name]/./lib/alo/util/dispatchActions.ts"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","ReferenceError","instance","Constructor","TypeError","lastId","generateObserverId","concat","generateObservableId","observerInfoMap","observableInfoMap","observerIdStack","isObservable","resultObj","_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_0___default","observerAvoid","avoid","pop","callObserver","observerId","push","observerInfo","running","console","error","fn","Error","setValue","storage","observerIdSet","notifyObservers","keys","observe","notifyInBatches","arguments","length","undefined","targetObserverIdSets","forEach","idSet","removeProp","_observableInfoMap$ob","__observableId","propObserverIdSetMap","setProp","deep","_observableInfoMap$ob2","Array","isArray","_i","_Object$keys","itemKey","itemValue","isPlainObject","observable","log","set","observableId","_i2","_Object$keys2","plannedObserverCalls","nextPlanIdx","observerIds","planIdx","notify","batchInfo","count","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","err","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","batchId","indexOf","batch","batchStart","batchEnd","getOriginObject","result","_i3","_Object$keys3","computedPropsBatchIdx","computedProps","propsObj","objKeys","_i4","_objKeys","_loop","_objKeys2","_i5","init","prevBatchId","_defineProperties","target","props","descriptor","protoProps","staticProps","__webpack_exports__","createTag","setTagChildren","setWildCard","setTag","tagIsSet","createEvent","idx","parentByTag","entityContainerByTag","childrenByTag","registerEntityContainer","containerTag","tag","_ref","_ref$name","children","_ref$entityContainer","entityContainer","child","getTagEntity","event","entityId","initialize","container","containers","subject","type","tagsSet","tags","entity","parentTag","checkWildCard","wildCardIsSet","childTag","parentWildCardIsSet","_typeof","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","constructor","BATCH_ACTION_TYPE","dispatchBatch","___WEBPACK_IMPORTED_MODULE_0__","resolveBatchAction","store","action","payload","dispatch","batchIdx","thunk","batchAction","meta","pure","rootBatchId","newBatch","getState","parentBatchIds","batchItem","isPromiseLike","then","once","findInArray","cloneDeep","fast_clone__WEBPACK_IMPORTED_MODULE_0__","fast_clone__WEBPACK_IMPORTED_MODULE_0___default","promise","values","predicate","clone","actionTypes","INIT","Store","_this","mutator","state","_ref$actionNormalizer","actionNormalizer","ActionNormalizer","_ref$actionResolver","actionResolver","ActionResolver","_ref$subscribable","subscribable","Subscribable","_ref$cloneDeep","_cloneDeep","_ref$pureByDefault","pureByDefault","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default","_observable","isAction","tmp","_actionNormalizer","normalize","callBack","_afterDispatchNormalization","_subscribable","callSubscribers","_actionResolver","resolve","setAction","_setAction","_callSubscribers","applyMutator","_applyMutator","pureAction","_pureByDefault","originalPayload","_isMutating","_applyMutatorBatch","_action","_mutator","impure","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default","listener","remember","subscribe","func","_this2","avoidFn","isInitAction","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default","undo","redo","AbstractActionNormalizerDecorator","_ref2","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default","options","_typeof2","source","ownKeys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","typeMutator","combineMutators","consumer","mutators","mutatorKeys","_mutatorKeys","propName","_ref$callSubscribersL","callSubscribersLazy","AbstractActionResolverDecorator","_ref3","cloneAction","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","_currentListeners","_nextListeners","slice","_separateNextListeners","isSubscribed","_subscribersCalled","_lastListenerOptions","index","splice","listenerOptions","BatchActionNormalizerDecorator","_AbstractActionNormal","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","apply","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default","batchItems","map","reverse","storeProxy","childAction","ds","BatchActionResolverDecorator","_AbstractActionResolv","_getPrototypeOf2","_len","args","_key","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default","_eventByBatchId","_observableBatchByBatchId","_childsByBatchId","parentId","typeThunk","dispatchThunk","dispatchedActions","dispatchedAction","webpackPolyfill","deprecate","paths","_store__WEBPACK_IMPORTED_MODULE_0__","_store_types__WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","_action__WEBPACK_IMPORTED_MODULE_2__","_action_types__WEBPACK_IMPORTED_MODULE_3__","_event__WEBPACK_IMPORTED_MODULE_4__","_event_types__WEBPACK_IMPORTED_MODULE_5__","_mutator__WEBPACK_IMPORTED_MODULE_6__","_mutator_types__WEBPACK_IMPORTED_MODULE_7__","_undoable__WEBPACK_IMPORTED_MODULE_8__","_undoable_types__WEBPACK_IMPORTED_MODULE_9__","_subscribable__WEBPACK_IMPORTED_MODULE_10__","_subscribable_types__WEBPACK_IMPORTED_MODULE_11__","_observable__WEBPACK_IMPORTED_MODULE_12__","_actionNormalizer__WEBPACK_IMPORTED_MODULE_13__","_actionNormalizer_types__WEBPACK_IMPORTED_MODULE_14__","_actionNormalizer_batchActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_15__","_actionNormalizer_dateActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_16__","_actionNormalizer_undoableActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_17__","_actionResolver__WEBPACK_IMPORTED_MODULE_18__","_actionResolver_types__WEBPACK_IMPORTED_MODULE_19__","_actionResolver_batchActionResolverDecorator__WEBPACK_IMPORTED_MODULE_20__","_util_dispatchBatch__WEBPACK_IMPORTED_MODULE_21__","_util_dispatchThunk__WEBPACK_IMPORTED_MODULE_22__","_util_dispatchPromise__WEBPACK_IMPORTED_MODULE_23__","_util_dispatchActions__WEBPACK_IMPORTED_MODULE_24__","_util_types__WEBPACK_IMPORTED_MODULE_25__","_util__WEBPACK_IMPORTED_MODULE_26__","Function","Date","setTime","getTime","RegExp","newRegExp","fixTypes","JSON","parse","stringify","fixPropertyValue","original","copy","originalValue","newValue","isNaN","NaN","Infinity","getOwnPropertyNames","regexpText","String","slashIndex","lastIndexOf","_observable__WEBPACK_IMPORTED_MODULE_0__","_observable_types__WEBPACK_IMPORTED_MODULE_1__","_setPrototypeOf","setUndoData","undoData","getUndoData","setUndoableCache","undoableCache","createUndoThunk","id","createRedoThunk","createUndoableMutator","_ref$tags","actionFilter","past","future","pastAction","do","futureAction","DateActionNormalizerDecorator","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default","date","UndoableActionNormalizerDecorator","dispatchPromise","dispatchActions","actions"],"mappings":"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","file":"core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"core\"] = factory();\n\telse\n\t\troot[\"alo\"] = root[\"alo\"] || {}, root[\"alo\"][\"core\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","// Originally created by dongwoo-kim (https://github.com/dongwoo-kim)\n// https://github.com/nhn/tui.grid/blob/55278fba5303fcef928715cbb003aeed0964dd29/src/helper/observable.ts\n\nimport { Dictionary } from \"../util/types\";\nimport {\n  ObserverInfo,\n  ObservableInfo,\n  Observable,\n  BooleanSet,\n  ObserveFn,\n  AvoidFn\n} from \"./types\";\nimport { isPlainObject } from \"../util/isPlainObject\";\n\nconst generateObserverId = (() => {\n  let lastId = 0;\n  return () => {\n    lastId += 1;\n    return `@observer${lastId}`;\n  };\n})();\n\nconst generateObservableId = (() => {\n  let lastId = 0;\n  return () => {\n    lastId += 1;\n    return `@observable${lastId}`;\n  };\n})();\n\n// store all observer info\nconst observerInfoMap: Dictionary<ObserverInfo> = {};\n\nconst observableInfoMap: Dictionary<ObservableInfo<any>> = {};\n\n// observerId stack for managing recursive observing calls\nconst observerIdStack: string[] = [];\n\nfunction isObservable<T>(resultObj: T): resultObj is Observable<T> {\n  return (\n    resultObj !== null &&\n    typeof resultObj === \"object\" &&\n    resultObj[\"__observableId\"] != null\n  );\n}\n\nlet observerAvoid = false;\nconst avoid: AvoidFn = function() {\n  if (observerAvoid) {\n    return;\n  }\n\n  observerAvoid = true;\n  observerIdStack.pop();\n};\n\nfunction callObserver(observerId: string) {\n  observerAvoid = false;\n  observerIdStack.push(observerId);\n\n  const observerInfo = observerInfoMap[observerId];\n\n  if (observerInfo.running) {\n    console.error(\"Bad observer\", observerInfo.fn);\n    throw new Error(`Bad recursion detected in observer`);\n  }\n\n  observerInfo.running = true;\n  observerInfo.fn(avoid);\n  observerInfo.running = false;\n\n  if (!observerAvoid) {\n    observerIdStack.pop();\n  }\n  observerAvoid = false;\n}\n\nfunction setValue<T, K extends keyof T>(\n  storage: T,\n  observerIdSet: BooleanSet,\n  key: keyof T,\n  value: T[K]\n) {\n  if (storage[key] !== value) {\n    storage[key] = value;\n    notifyObservers(Object.keys(observerIdSet));\n  }\n}\n\nexport function observe(\n  fn: ObserveFn,\n  notifyInBatches: string | boolean = false\n) {\n  const observerId = generateObserverId();\n  observerInfoMap[observerId] = {\n    running: false,\n    notifyInBatches,\n    fn,\n    targetObserverIdSets: []\n  };\n  callObserver(observerId);\n\n  // return unobserve function\n  return () => {\n    observerInfoMap[observerId].targetObserverIdSets.forEach(idSet => {\n      delete idSet[observerId];\n    });\n  };\n}\n\nexport const removeProp = function<\n  T extends Observable<any>,\n  K extends keyof T\n>(obj: T, key: K) {\n  const { storage, propObserverIdSetMap } = observableInfoMap[\n    obj.__observableId\n  ];\n  delete storage[key];\n  delete obj[key];\n  delete propObserverIdSetMap[key as any];\n};\n\nexport const setProp = function<T extends Observable<any>, K extends keyof T>(\n  obj: T,\n  key: K,\n  value: T[K],\n  deep = false\n) {\n  const { storage, propObserverIdSetMap } = observableInfoMap[\n    obj.__observableId\n  ];\n  const observerIdSet: BooleanSet = (propObserverIdSetMap[key as any] =\n    propObserverIdSetMap[key as any] || {});\n\n  if (deep) {\n    const isObject = value !== null && typeof value === \"object\";\n    if (isObject) {\n      if (Array.isArray(value)) {\n        for (const itemKey of Object.keys(value)) {\n          var itemValue = value[itemKey];\n          if (!isPlainObject(itemValue)) {\n            continue;\n          }\n\n          value[itemKey] = observable(itemValue);\n        }\n      } else {\n        value = observable(value);\n      }\n    }\n  }\n\n  if (storage[key] !== undefined && obj[key] !== undefined) {\n    console.log(\"already existing\");\n    setValue(storage, observerIdSet, key, value);\n    return;\n  }\n\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: true,\n    get() {\n      const observerId = observerIdStack[observerIdStack.length - 1];\n      if (observerId && !observerIdSet[observerId]) {\n        observerIdSet[observerId] = true;\n        observerInfoMap[observerId].targetObserverIdSets.push(observerIdSet);\n      }\n      return storage[key];\n    }\n  });\n\n  (storage as any)[key] = value;\n  Object.defineProperty(obj, key, {\n    set(value) {\n      setValue(storage, observerIdSet, key, value);\n    }\n  });\n};\n\nexport function observable<T extends Dictionary<any>>(\n  obj: T,\n  deep: boolean = true\n): Observable<T> {\n  if (isObservable(obj)) {\n    return obj;\n  }\n\n  if (Array.isArray(obj)) {\n    throw new Error(\"Array object cannot be Reactive\");\n  }\n\n  const observableId = generateObservableId();\n  const resultObj = {} as T;\n\n  observableInfoMap[observableId] = {\n    storage: {},\n    propObserverIdSetMap: {}\n  };\n\n  Object.defineProperty(resultObj, \"__observableId\", {\n    value: observableId\n  });\n\n  for (const key of Object.keys(obj)) {\n    setProp(resultObj, key, obj[key], deep);\n  }\n\n  return resultObj as Observable<T>;\n}\n\n// Used to optimize observer-to-observer calls:\n// For nested notifyObservers calls, the observers will be called only once in the most outward notifyObservers call\nconst plannedObserverCalls = {};\nlet nextPlanIdx = 0;\nconst notifyObservers = function(observerIds: string[]) {\n  let planIdx = nextPlanIdx++;\n\n  let notify = true;\n  if (batchInfo.count > 0) {\n    notify = false;\n  }\n\n  for (const observerId of observerIds) {\n    if (plannedObserverCalls[observerId] != null) {\n      continue;\n    }\n\n    plannedObserverCalls[observerId] = planIdx;\n  }\n  for (const observerId of observerIds) {\n    const notifyInBatches = observerInfoMap[observerId].notifyInBatches;\n    if (\n      notify ||\n      notifyInBatches === true ||\n      notifyInBatches === batchInfo.batchId\n    ) {\n      if (plannedObserverCalls[observerId] !== planIdx) {\n        continue;\n      }\n      callObserver(observerId);\n    } else {\n      if (batchInfo.observerIds.indexOf(observerId) === -1) {\n        batchInfo.observerIds.push(observerId);\n      }\n    }\n\n    delete plannedObserverCalls[observerId];\n  }\n};\n\nexport function notify<T extends Observable<any>, K extends keyof T>(\n  obj: T,\n  key: K\n) {\n  if (isObservable(obj)) {\n    const propObserverIdSetMap =\n      observableInfoMap[obj.__observableId].propObserverIdSetMap[key as string];\n    notifyObservers(Object.keys(propObserverIdSetMap));\n  }\n}\n\nconst batchInfo: { count: number; observerIds: string[]; batchId: any } = {\n  count: 0,\n  observerIds: [],\n  batchId: null\n};\nexport const batch = function(fn: () => void) {\n  batchStart();\n  fn();\n  batchEnd();\n};\n\nexport const batchStart = function() {\n  batchInfo.count++;\n};\n\nexport const batchEnd = function() {\n  if (batchInfo.count === 0) return;\n\n  batchInfo.count--;\n  if (batchInfo.count === 0) {\n    let observerIds = batchInfo.observerIds;\n    batchInfo.observerIds = [];\n    notifyObservers(observerIds);\n  }\n};\n\nexport function getOriginObject<T>(obj: Observable<T>) {\n  const result = {} as T;\n  const storage = observableInfoMap[obj.__observableId].storage;\n  for (const key of Object.keys(storage)) {\n    const value = storage[key];\n    result[key] = isObservable(value) ? getOriginObject(value) : value;\n  }\n\n  return result;\n}\n\nlet computedPropsBatchIdx = 0;\nexport const computedProps = function<\n  P extends {\n    [key: string]: (\n      obj: any,\n      value: any,\n      key: any,\n      avoid: AvoidFn,\n      init: boolean\n    ) => any;\n  }\n>(propsObj: P, batch: boolean = true): { [K in keyof P]: ReturnType<P[K]> } {\n  const batchId = \"computed-props-\" + computedPropsBatchIdx++;\n\n  let obj = {};\n  const objKeys = Object.keys(propsObj);\n  for (const key of objKeys) {\n    obj[key] = null;\n  }\n\n  obj = observable(obj, false);\n\n  for (const key of objKeys) {\n    let init = true;\n    observe(function(avoid) {\n      let prevBatchId = batchInfo.batchId;\n      if (batch) {\n        batchStart();\n        batchInfo.batchId = batchId;\n      }\n\n      const value = propsObj[key](\n        obj,\n        observableInfoMap[obj[\"__observableId\"]].storage[key],\n        key,\n        avoid,\n        init\n      );\n      avoid();\n      obj[key] = value;\n\n      if (batch) {\n        batchEnd();\n        batchInfo.batchId = prevBatchId;\n      }\n    }, batchId);\n    init = false;\n  }\n\n  return obj as any;\n};\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","import { Event, Tag, EntityId, Entity } from \"./types\";\nimport { Action } from \"../action/types\";\n\nlet idx = 0;\nlet parentByTag = {};\nlet entityContainerByTag = {};\nlet childrenByTag = {};\n\nconst registerEntityContainer = function(containerTag: Tag, tag: Tag) {\n  entityContainerByTag[tag] = containerTag;\n  if (childrenByTag[tag]) {\n    for (const child of childrenByTag[tag]) {\n      registerEntityContainer(containerTag, child);\n    }\n  }\n};\n\nexport const createTag = function({\n  name = \"\",\n  children,\n  entityContainer = false\n}: {\n  name?: string;\n  children?: Tag[];\n  entityContainer?: boolean;\n} = {}): Tag {\n  const tag = `${idx++}-${name}`;\n\n  if (children) {\n    setTagChildren(tag, children, entityContainer);\n  }\n\n  return tag;\n};\n\nexport const setTagChildren = function(\n  tag: Tag,\n  children: Tag[],\n  entityContainer = false\n) {\n  childrenByTag[tag] = children;\n\n  for (const child of children) {\n    parentByTag[child] = tag;\n    if (entityContainer) {\n      registerEntityContainer(tag, child);\n    }\n  }\n};\n\nconst getTagEntity = function(\n  event: Event,\n  tag: Tag,\n  entityId: EntityId,\n  initialize = false\n): Entity | undefined {\n  const containerTag = entityContainerByTag[tag];\n  if (!containerTag) return;\n\n  if (initialize) {\n    const container = (event.containers[containerTag] =\n      event.containers[containerTag] || {});\n    return (container[entityId] = container[entityId] || {});\n  } else {\n    const container = event.containers[containerTag];\n    if (!container) return;\n    return container[entityId];\n  }\n};\n\nexport const setWildCard = function(\n  subject: Event | Action,\n  tag: Tag = \"\",\n  entityId?: EntityId\n) {\n  const event: Event =\n    (subject as Action).type !== undefined\n      ? (subject as Action).event\n      : (subject as Event);\n\n  event.tagsSet = true;\n\n  event.tags[tag + \"*\"] = true;\n\n  if (entityId != null) {\n    const entity = getTagEntity(event, tag, entityId, true);\n    if (entity) {\n      entity[tag + \"*\"] = true;\n    }\n  }\n};\n\nexport const setTag = function(\n  subject: Event | Action,\n  tag: Tag,\n  entityId?: EntityId,\n  entity?: Entity\n) {\n  const event: Event =\n    (subject as Action).type !== undefined\n      ? (subject as Action).event\n      : (subject as Event);\n\n  event.tagsSet = true;\n\n  event.tags[tag] = event.tags[tag] || true;\n\n  if (entityId != null) {\n    entity = entity || getTagEntity(event, tag, entityId, true);\n    if (entity) {\n      entity[tag] = true;\n    }\n  }\n\n  const parentTag = parentByTag[tag];\n  if (parentTag && !event.tags[parentTag]) {\n    setTag(event, parentTag, entityId);\n  }\n};\n\nconst parentWildCardIsSet = function(\n  event: Event,\n  childTag: Tag,\n  entity?: Entity\n) {\n  while (true) {\n    childTag = parentByTag[childTag];\n    if (!childTag) {\n      return false;\n    }\n\n    if (entity && entity[childTag + \"*\"]) {\n      return true;\n    }\n\n    if (event.tags[childTag + \"*\"]) {\n      return true;\n    }\n  }\n};\n\nexport const tagIsSet = function(\n  subject: Event | Action,\n  tag: Tag,\n  entityId?: EntityId,\n  checkWildCard = true\n) {\n  const event: Event =\n    (subject as Action).type !== undefined\n      ? (subject as Action).event\n      : (subject as Event);\n\n  if (checkWildCard && event.tags[\"*\"]) {\n    return true;\n  }\n\n  let tagIsSet = event.tags[tag];\n  let entity;\n\n  if (entityId != null) {\n    entity = getTagEntity(event, tag, entityId);\n    if (entity) {\n      tagIsSet = entity[tag];\n    } else {\n      tagIsSet = false;\n    }\n  }\n\n  const wildCardIsSet =\n    !tagIsSet && (checkWildCard && parentWildCardIsSet(event, tag, entity));\n\n  return !!(tagIsSet || wildCardIsSet);\n};\n\nexport const createEvent = function(): Event {\n  return {\n    tagsSet: false,\n    tags: {},\n    containers: {}\n  };\n};\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","import { StoreDispatchApi, Action, NormalizedAction } from \"../main/core\";\nimport { isPromiseLike } from \".\";\nimport { BatchAction, Thunk } from \"./types\";\n\nconst resolveBatchAction = function(\n  store: StoreDispatchApi,\n  action: BatchAction\n): Action | undefined {\n  if (!action.payload) {\n    // No child actions were dispatched\n    return;\n  }\n\n  return store.dispatch(action);\n};\n\nexport const BATCH_ACTION_TYPE = \"@@batch\";\nlet batchIdx = 0;\nexport const dispatchBatch = function<\n  S extends StoreDispatchApi,\n  T extends Thunk<StoreDispatchApi<ReturnType<S[\"getState\"]>>>\n>(\n  store: S,\n  thunk: T\n): ReturnType<T> extends Promise<any>\n  ? Promise<Action | undefined>\n  : Action | undefined {\n  const batchId = batchIdx++;\n  const batchAction: BatchAction = {\n    type: BATCH_ACTION_TYPE,\n    payload: [],\n    meta: {\n      pure: true,\n      batchId,\n      rootBatchId: batchId,\n      batch: true,\n      newBatch: true\n    }\n  };\n\n  const result = thunk({\n    getState: store.getState,\n    dispatch: function(action) {\n      action.meta = action.meta || {};\n\n      if (action.meta.batchId == null) {\n        action.meta.batchId = batchAction.meta.batchId;\n      }\n\n      action.meta.rootBatchId = batchAction.meta.batchId;\n\n      action.meta.parentBatchIds = action.meta.parentBatchIds || [];\n      action.meta.parentBatchIds.push(batchAction.meta.batchId);\n\n      action.meta.batchItem = true;\n\n      return store.dispatch(action);\n    }\n  } as S);\n\n  if (isPromiseLike(result)) {\n    return result.then(function() {\n      return resolveBatchAction(store, batchAction);\n    }) as any;\n  }\n\n  return resolveBatchAction(store, batchAction) as any;\n};\n","import clone from \"fast-clone\";\n\nexport const isPromiseLike = function(promise): promise is Promise<any> {\n  return promise && (<Promise<any>>promise).then !== undefined;\n};\n\nexport var once = function(fn) {\n  var done = false;\n  var result;\n\n  return function() {\n    if (!done) {\n      result = fn();\n      done = true;\n    }\n\n    return result;\n  };\n};\n\nexport const findInArray = function(\n  values: any[],\n  predicate: (value, key, values) => any\n) {\n  let idx = 0;\n  for (const value of values) {\n    const result = predicate(value, idx, values);\n    if (result) {\n      return result;\n    }\n\n    idx++;\n  }\n};\n\nexport { isPlainObject } from \"./isPlainObject\";\n\nexport const cloneDeep = function(value) {\n  return clone(value);\n};\n","import { Action, NewAction, NormalizedAction } from \"../action/types\";\nimport { ActionNormalizer } from \"../actionNormalizer\";\nimport {\n  ActionNormalizerInterface,\n  NormalizeOptions\n} from \"../actionNormalizer/types\";\nimport { ActionResolver } from \"../actionResolver\";\nimport { ActionResolverInterface } from \"../actionResolver/types\";\nimport { DeepPartial } from \"../util/types\";\nimport { isAction } from \"../action\";\nimport { Listener, SubscribableInterface } from \"../subscribable/types\";\nimport { Mutator } from \"../mutator/types\";\nimport { setWildCard } from \"../event\";\nimport { StoreInterface } from \"./types\";\nimport { Subscribable } from \"../subscribable\";\nimport { cloneDeep as _cloneDeep, isPlainObject } from \"../util\";\nimport { observe, observable, batch } from \"../observable\";\nimport { ObserveFn, AvoidFn } from \"../observable/types\";\n\nexport var actionTypes = {\n  INIT: \"@@init\"\n};\n\nexport class Store<T extends Mutator = Mutator> implements StoreInterface {\n  _isMutating: boolean;\n  _observable: {\n    state: any;\n  } = observable({\n    state: null\n  });\n  _action: Action;\n  _mutator: Mutator;\n  _actionNormalizer: ActionNormalizerInterface;\n  _actionResolver: ActionResolverInterface;\n  _subscribable: SubscribableInterface<Store<T>>;\n  _cloneDeep: typeof _cloneDeep;\n  _pureByDefault: boolean;\n\n  constructor({\n    mutator,\n    state,\n    actionNormalizer = new ActionNormalizer(),\n    actionResolver = new ActionResolver(),\n    subscribable = new Subscribable(),\n    cloneDeep = _cloneDeep,\n    pureByDefault = false\n  }: {\n    mutator: T;\n    state?: DeepPartial<ReturnType<ReturnType<T>>>;\n    actionNormalizer?: ActionNormalizerInterface;\n    actionResolver?: ActionResolverInterface;\n    subscribable?: SubscribableInterface<Store<T>>;\n    cloneDeep?: typeof _cloneDeep;\n    pureByDefault?: boolean;\n  }) {\n    this._actionResolver = actionResolver;\n    this._actionNormalizer = actionNormalizer;\n    this._subscribable = subscribable;\n    this._cloneDeep = cloneDeep;\n    this._pureByDefault = pureByDefault;\n\n    this._isMutating = false;\n    this._mutator = mutator;\n\n    // Initial set action\n    this.dispatch({\n      type: actionTypes.INIT,\n      meta: {\n        impure: true\n      },\n      payload: state\n    });\n  }\n\n  /**\n   * Returns the current state\n   */\n  getState = (): ReturnType<T> => {\n    return this._observable.state;\n  };\n\n  /**\n   * Get the last dispatched action\n   */\n  getAction(): Action {\n    return this._action;\n  }\n\n  subscribe(listener: Listener<this>, remember = false) {\n    return this._subscribable.subscribe(listener, remember);\n  }\n\n  getActionNormalizer() {\n    return this._actionNormalizer;\n  }\n\n  setActionNormalizer(actionNormalizer: ActionNormalizerInterface) {\n    this._actionNormalizer = actionNormalizer;\n  }\n\n  getActionResolver() {\n    return this._actionResolver;\n  }\n\n  setActionResolver(actionResolver: ActionResolverInterface) {\n    this._actionResolver = actionResolver;\n  }\n\n  getSubscribable() {\n    return this._subscribable;\n  }\n\n  setSubscribable(subscribable: SubscribableInterface<Store<T>>) {\n    this._subscribable = subscribable;\n  }\n\n  /**\n   * Send a message which will trigger an action\n   */\n  dispatch = (action: NewAction): Action | undefined => {\n    if (!isAction(action)) {\n      if (action) {\n        console.error(\"Invalid action dispatched\", action);\n      }\n\n      return;\n    }\n\n    if (!action.meta) action.meta = {};\n    if (!action.meta.tmp) action.meta.tmp = {};\n\n    return this._actionNormalizer.normalize({\n      action: action as NormalizedAction,\n      callBack: this._afterDispatchNormalization,\n      store: this\n    });\n  };\n\n  observe(func: (store: this, avoidFn: AvoidFn) => any) {\n    return observe(avoidFn => {\n      func(this, avoidFn);\n    });\n  }\n\n  _callSubscribers = () => {\n    this._subscribable.callSubscribers(this);\n  };\n\n  _afterDispatchNormalization: NormalizeOptions[\"callBack\"] = action => {\n    return this._actionResolver.resolve({\n      action: action,\n      store: this,\n      setAction: this._setAction,\n      callSubscribers: this._callSubscribers,\n      applyMutator: this._applyMutator\n    });\n  };\n\n  _applyMutatorBatch(action: Action) {\n    const isInitAction = action.type === actionTypes.INIT;\n\n    if (isInitAction) {\n      this._observable.state = isPlainObject(action.payload)\n        ? observable(action.payload)\n        : action.payload;\n      setWildCard(action.event);\n    }\n\n    try {\n      let result = this._mutator(\n        action,\n        this._observable.state,\n        \"state\",\n        this._observable\n      );\n      // TODO: Maybe the observable should just return an observable of the user wants to use observables?\n      if (isInitAction && isPlainObject(result)) {\n        result = observable(result);\n      }\n      this._observable.state = result;\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  _applyMutator = (action: Action) => {\n    let pureAction =\n      action.meta.pure != null ? action.meta.pure : this._pureByDefault;\n    let originalPayload = action.payload;\n    if (action.payload != null && !pureAction) {\n      action.payload = this._cloneDeep(originalPayload);\n    }\n\n    if (this._isMutating) {\n      throw new Error(\"Mutations already in progress\");\n    }\n\n    this._isMutating = true;\n\n    batch(() => {\n      this._applyMutatorBatch(action);\n    });\n\n    this._isMutating = false;\n\n    action.payload = originalPayload;\n  };\n\n  /**\n   * Override the last dispatched action\n   *\n   * @param action New action\n   */\n  _setAction = (action: Action) => {\n    this._action = action;\n  };\n}\n","import { ActionNormalizerInterface, NormalizeOptions } from \"./types\";\n\nexport class ActionNormalizer implements ActionNormalizerInterface {\n  normalize({ action, callBack }: NormalizeOptions) {\n    if (!action.meta.undo && !action.meta.redo) action.meta.do = true;\n\n    return callBack(action);\n  }\n}\n\nexport abstract class AbstractActionNormalizerDecorator\n  implements ActionNormalizerInterface {\n  _actionNormalizer: ActionNormalizerInterface;\n\n  constructor({\n    actionNormalizer\n  }: {\n    actionNormalizer: ActionNormalizerInterface;\n  }) {\n    this._actionNormalizer = actionNormalizer;\n  }\n\n  normalize(options: NormalizeOptions) {\n    return this._actionNormalizer.normalize(options);\n  }\n}\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","import { Action } from \"../action/types\";\nimport { Mutator, MutatorsObj, MutatorsReturnObject } from \"./types\";\n\nexport const typeMutator = function<T extends Mutator<R>, R = any>(\n  consumer: T\n) {\n  return consumer;\n};\n\nexport const combineMutators = function<\n  TMutatorsObj extends MutatorsObj = MutatorsObj\n>(mutators: TMutatorsObj) {\n  const mutatorKeys = Object.keys(mutators);\n  const mutator = function(\n    action: Action,\n    state: Partial<MutatorsReturnObject<TMutatorsObj>> = {}\n  ): MutatorsReturnObject<TMutatorsObj> {\n    for (const propName of mutatorKeys) {\n      (state as any)[propName] = mutators[propName](\n        action,\n        state[propName],\n        propName,\n        state\n      );\n    }\n\n    return state as any;\n  };\n\n  return mutator;\n};\n","export const isPlainObject = function(obj) {\n  return obj !== null && typeof obj === \"object\" && !Array.isArray(obj);\n};\n","import { Action } from \"../action/types\";\nimport { createEvent } from \"../event\";\nimport { ActionResolverInterface, ResolveOptions } from \"./types\";\n\nexport class ActionResolver implements ActionResolverInterface {\n  callSubscribersLazy: boolean;\n\n  constructor({\n    callSubscribersLazy = false\n  }: { callSubscribersLazy?: boolean } = {}) {\n    this.callSubscribersLazy = callSubscribersLazy;\n  }\n\n  resolve({\n    action,\n    callSubscribers,\n    applyMutator,\n    setAction\n  }: ResolveOptions): Action | undefined {\n    action.event = createEvent();\n\n    applyMutator(action as Action);\n\n    setAction(action as Action);\n    if (!this.callSubscribersLazy || action.event.tagsSet) {\n      callSubscribers();\n    }\n\n    return action as Action;\n  }\n}\n\nexport abstract class AbstractActionResolverDecorator\n  implements ActionResolverInterface {\n  _actionResolver: ActionResolverInterface;\n\n  constructor({ actionResolver }: { actionResolver: ActionResolverInterface }) {\n    this._actionResolver = actionResolver;\n  }\n\n  resolve(options: ResolveOptions) {\n    return this._actionResolver.resolve(options);\n  }\n}\n","import { NewAction, Action, NormalizedAction } from \"./types\";\n\nexport const isAction = function(action): action is NewAction {\n  return action && (<NewAction>action).type !== undefined;\n};\n\nexport const cloneAction = function(\n  action: NormalizedAction | Action\n): NormalizedAction {\n  return {\n    ...action,\n    event: undefined,\n    meta: {\n      ...action.meta,\n      tmp: {}\n    }\n  };\n};\n","import { SubscribableInterface, Listener } from \"./types\";\n\n/**\n * Implements a very basic and general subscribable:\n * a list of listeners which will be called in specific moments - moments defined by the child class\n * New listeners will not be directly called, when they are subscribed while a broadcast is happening\n */\nexport class Subscribable<T = any> implements SubscribableInterface<T> {\n  _currentListeners: Function[];\n  _nextListeners: Function[];\n  _lastListenerOptions?: T;\n  _subscribersCalled = false;\n\n  constructor() {\n    this._currentListeners = [];\n    // Will be copied shallowly from currentListeners by _separateNextListeners\n    this._nextListeners = this._currentListeners;\n  }\n\n  /**\n   * Creates a copy of currentListeners for the futureListeners (Look at subscribe for more information)\n   */\n  _separateNextListeners() {\n    if (this._currentListeners === this._nextListeners) {\n      this._nextListeners = this._currentListeners.slice();\n    }\n  }\n\n  /**\n   * Adds a function to the subscribers list.\n   *\n   * The function gets called with the store as a parameter\n   *\n   * If subscribe is called in an other listener and is therefore in a _callSubscribers call,\n   * the new listener will only be called in future _callSubscribers calls!\n   *\n   * @param {function} listener\n   */\n  subscribe(listener: Listener<T>, remember = false) {\n    this._separateNextListeners();\n    var isSubscribed = true;\n    this._nextListeners.push(listener);\n\n    if (remember && this._subscribersCalled) {\n      listener(this._lastListenerOptions as T);\n    }\n\n    return function() {\n      if (isSubscribed) {\n        isSubscribed = false;\n        this._separateNextListeners();\n        var index = this._nextListeners.indexOf(listener);\n        this._nextListeners.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Should be called by the child class, when a broadcast to the subscribers should occur\n   * This also sets the listeners registered in nextListeners as currentListeners\n   */\n  callSubscribers(listenerOptions: T) {\n    this._subscribersCalled = true;\n    this._lastListenerOptions = listenerOptions;\n    this._currentListeners = this._nextListeners;\n    for (var listener of this._currentListeners) {\n      listener(listenerOptions);\n    }\n  }\n}\n\n/**\n * Callback used by _callSubscribers\n * @callback listenerCallback\n * @param {Store} store\n *\n * TODO: This notation currently doesnt work with vscode https://github.com/Microsoft/TypeScript/issues/7515\n */\n","import { AbstractActionNormalizerDecorator } from \".\";\nimport { Action } from \"../action/types\";\nimport { NormalizeOptions } from \"./types\";\nimport { isAction, cloneAction } from \"../action\";\nimport { dispatchBatch, BATCH_ACTION_TYPE } from \"../util/dispatchBatch\";\nimport { StoreDispatchApi } from \"../store/types\";\n\n/**\n * Handles batch actions which are dispatched for a second time\n */\nexport class BatchActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options: NormalizeOptions) {\n    const { action, store } = options;\n\n    if (\n      !isAction(action) ||\n      action.type !== BATCH_ACTION_TYPE ||\n      action.meta.newBatch\n    ) {\n      return this._actionNormalizer.normalize(options);\n    }\n\n    let batchItems: Action[] = action.payload.map(action =>\n      cloneAction(action)\n    );\n    if (action.meta.undo) {\n      batchItems.reverse();\n    }\n\n    let storeProxy: StoreDispatchApi = {\n      getState: store.getState,\n      dispatch: function(childAction) {\n        childAction.meta = childAction.meta || {};\n\n        // Handle recursive batches\n        if (action.meta.batchId != null) {\n          childAction.meta.rootBatchId = action.meta.rootBatchId;\n          childAction.meta.parentBatchIds = action.meta.parentBatchIds;\n        }\n\n        if (\n          childAction.type === BATCH_ACTION_TYPE &&\n          !childAction.meta.batchItem\n        ) {\n          // This is the final new batch action created by \"dispatchBatch\"\n          // We now apply metas from our original batch options.action at the top\n          childAction.meta = { ...action.meta, ...childAction.meta };\n        }\n\n        return store.dispatch(childAction);\n      }\n    };\n\n    // For now we just use the dispatchBatch function to rehandle the old batch action\n    const newBatchAction = dispatchBatch(storeProxy, function(ds) {\n      for (const batchItem of batchItems) {\n        // Apply do/undo/redo signals from the batch action to its item\n        if (action.meta.undo) {\n          batchItem.meta.do = !batchItem.meta.do;\n          batchItem.meta.undo = !batchItem.meta.undo;\n        }\n        if (action.meta.redo && batchItem.meta.do) {\n          batchItem.meta.redo = true;\n        }\n\n        ds.dispatch(batchItem);\n      }\n    });\n\n    return newBatchAction;\n  }\n}\n","import { AbstractActionResolverDecorator } from \".\";\nimport { batchStart, batchEnd } from \"../observable\";\nimport { createEvent } from \"../event\";\nimport { BATCH_ACTION_TYPE } from \"../util/dispatchBatch\";\nimport { Action } from \"../action/types\";\nimport { ResolveOptions } from \"./types\";\n\nexport class BatchActionResolverDecorator extends AbstractActionResolverDecorator {\n  _eventByBatchId = {};\n  _childsByBatchId = {};\n  _observableBatchByBatchId = {};\n\n  resolve(options: ResolveOptions) {\n    const { store, setAction, applyMutator } = options;\n\n    if (\n      !options.action.meta.batchItem &&\n      options.action.type !== BATCH_ACTION_TYPE\n    ) {\n      return this._actionResolver.resolve(options);\n    }\n\n    const batchId = options.action.meta.batchId;\n    const rootBatchId = options.action.meta.rootBatchId;\n\n    options.action.event = this._eventByBatchId[rootBatchId] =\n      this._eventByBatchId[rootBatchId] || createEvent();\n    const action: Action = options.action as Action;\n    delete action.meta.batchId;\n    delete action.meta.rootBatchId;\n    delete action.meta.newBatch;\n    const parentBatchIds = options.action.meta.parentBatchIds;\n    delete action.meta.parentBatchIds;\n\n    if (action.meta.batchItem && action.type !== BATCH_ACTION_TYPE) {\n      if (this._observableBatchByBatchId[rootBatchId] == null) {\n        batchStart();\n        this._observableBatchByBatchId[rootBatchId] = true;\n      }\n      applyMutator(action);\n    }\n\n    if (action.type === BATCH_ACTION_TYPE) {\n      action.payload = this._childsByBatchId[batchId];\n      delete this._childsByBatchId[batchId];\n    }\n\n    if (action.meta.batchItem) {\n      if (action.type !== BATCH_ACTION_TYPE && parentBatchIds) {\n        for (const parentId of parentBatchIds) {\n          this._childsByBatchId[parentId] =\n            this._childsByBatchId[parentId] || [];\n          this._childsByBatchId[parentId].push(action);\n        }\n      }\n\n      delete action.meta.batchItem;\n\n      return action;\n    }\n\n    delete this._eventByBatchId[batchId];\n\n    if (this._observableBatchByBatchId[rootBatchId]) {\n      delete this._observableBatchByBatchId[rootBatchId];\n      batchEnd();\n    }\n\n    return this._actionResolver.resolve(options);\n  }\n}\n","import { isPromiseLike } from \".\";\nimport { StoreDispatchApi, Action } from \"../main/core\";\nimport { Thunk } from \"./types\";\n\nexport const typeThunk = <T extends Thunk>(thunk: T) => thunk;\n\nexport const dispatchThunk = function<\n  S extends StoreDispatchApi,\n  T extends Thunk<StoreDispatchApi<ReturnType<S[\"getState\"]>>>\n>(\n  store: S,\n  thunk: T\n): ReturnType<T> extends Promise<any> ? Promise<Action[]> : Action[] {\n  const dispatchedActions: Action[] = [];\n\n  const result = thunk({\n    getState: store.getState,\n    dispatch: function(action) {\n      const dispatchedAction = store.dispatch(action);\n      if (dispatchedAction) {\n        dispatchedActions.push(dispatchedAction);\n      }\n\n      return dispatchedAction;\n    }\n  });\n  if (isPromiseLike(result)) {\n    return result.then(function() {\n      return dispatchedActions;\n    }) as any;\n  }\n\n  return dispatchedActions as any;\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","export * from \"../store\";\nexport * from \"../store/types\";\n\nexport * from \"../action\";\nexport * from \"../action/types\";\n\nexport * from \"../event\";\nexport * from \"../event/types\";\n\nexport * from \"../mutator\";\nexport * from \"../mutator/types\";\n\nexport * from \"../undoable\";\nexport * from \"../undoable/types\";\n\nexport * from \"../subscribable\";\nexport * from \"../subscribable/types\";\n\nexport * from \"./observable\";\n\nexport * from \"../actionNormalizer\";\nexport * from \"../actionNormalizer/types\";\nexport * from \"../actionNormalizer/batchActionNormalizerDecorator\";\nexport * from \"../actionNormalizer/dateActionNormalizerDecorator\";\nexport * from \"../actionNormalizer/undoableActionNormalizerDecorator\";\n\nexport * from \"../actionResolver\";\nexport * from \"../actionResolver/types\";\nexport * from \"../actionResolver/batchActionResolverDecorator\";\n\nexport * from \"../util/dispatchBatch\";\nexport * from \"../util/dispatchThunk\";\nexport * from \"../util/dispatchPromise\";\nexport * from \"../util/dispatchActions\";\nexport * from \"../util/types\";\nexport { once, findInArray } from \"../util\";\n","\"use strict\";\nvar windowOrGlobal = Function('return this')();\n(function (root) {\n    /* istanbul ignore next */\n    if (typeof exports !== 'undefined') {\n        /* istanbul ignore next */\n        if (typeof module !== 'undefined' && module && module.exports) {\n            exports = module.exports = clone;\n        }\n        exports.clone = clone;\n    }\n    else {\n        /* istanbul ignore next */\n        root.clone = clone;\n    }\n    function clone(value) {\n        var type = typeof value;\n        switch (type) {\n            case 'object':\n                // null and undefined\n                if (value == null) {\n                    return value;\n                }\n                var result = void 0;\n                if (value instanceof Date) {\n                    result = new Date();\n                    result.setTime(value.getTime());\n                    return result;\n                }\n                else if (value instanceof RegExp) {\n                    result = newRegExp(value);\n                    return result;\n                }\n                result = JSON.parse(JSON.stringify(value));\n                fixTypes(value, result);\n                return result;\n            default:\n                return value;\n        }\n    }\n    function fixPropertyValue(original, copy, key) {\n        var originalValue = original[key];\n        var originalType = typeof originalValue;\n        switch (originalType) {\n            case 'object':\n                if (originalValue instanceof Date) {\n                    var newValue = new Date();\n                    newValue.setTime(originalValue.getTime());\n                    copy[key] = newValue;\n                }\n                else if (originalValue instanceof RegExp) {\n                    copy[key] = newRegExp(originalValue);\n                }\n                else if (originalValue == null) {\n                    copy[key] = originalValue;\n                }\n                else {\n                    fixTypes(originalValue, copy[key]);\n                }\n                break;\n            case 'number':\n                if (isNaN(originalValue)) {\n                    copy[key] = NaN;\n                }\n                else if (originalValue == Infinity) {\n                    copy[key] = Infinity;\n                }\n                break;\n            default:\n                break;\n        }\n    }\n    function fixTypes(original, copy) {\n        if (original instanceof Array) {\n            for (var index = 0; index < original.length; index++) {\n                fixPropertyValue(original, copy, index);\n            }\n        }\n        else {\n            var keys = Object.getOwnPropertyNames(original);\n            keys.forEach(function (key) {\n                fixPropertyValue(original, copy, key);\n            });\n        }\n    }\n    function newRegExp(value) {\n        var regexpText = String(value);\n        var slashIndex = regexpText.lastIndexOf('/');\n        return new RegExp(regexpText.slice(1, slashIndex), regexpText.slice(slashIndex + 1));\n    }\n})(windowOrGlobal);\n","export * from \"../observable\";\nexport * from \"../observable/types\";\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","import { actionTypes } from \"../store\";\nimport { NewAction } from \"../action/types\";\nimport { typeMutator } from \"../mutator\";\nimport { Tag } from \"../event/types\";\nimport { setTagChildren, setTag } from \"../event\";\nimport { typeThunk } from \"../main/core\";\nimport {\n  UndoableAction,\n  UndoRedoAction,\n  ActionFilter,\n  UndoableMutatorState\n} from \"./types\";\n\nexport const setUndoData = function(\n  action: UndoableAction,\n  key: string | number,\n  value?: any\n) {\n  const undoData = (action.meta.undoData = action.meta.undoData || {});\n  if (action.meta.do) undoData[key] = value;\n\n  return undoData[key];\n};\n\nexport const getUndoData = function(\n  action: UndoableAction,\n  key: string | number\n) {\n  const undoData = (action.meta.undoData = action.meta.undoData || {});\n\n  return undoData[key];\n};\n\nconst setUndoableCache = function(action: UndoRedoAction, value: NewAction) {\n  action.meta = action.meta || {};\n  action.meta.undoableCache = value;\n};\n\nconst undoActionTypePrefix = \"@@undo_\";\nconst redoActionTypePrefix = \"@@redo_\";\n\nexport const createUndoThunk = function(id) {\n  return typeThunk(store => {\n    const action = store.dispatch({\n      type: undoActionTypePrefix + id\n    });\n    if (action && action.meta && action.meta.undoableCache) {\n      store.dispatch({\n        type: action.meta.undoableCache.type,\n        payload: action.meta.undoableCache.payload,\n        meta: action.meta.undoableCache.meta\n      });\n      delete action.meta.undoableCache;\n    }\n  });\n};\n\nexport const createRedoThunk = function(id) {\n  return typeThunk(store => {\n    const action = store.dispatch({\n      type: redoActionTypePrefix + id\n    });\n    if (action && action.meta && action.meta.undoableCache) {\n      store.dispatch({\n        type: action.meta.undoableCache.type,\n        payload: action.meta.undoableCache.payload,\n        meta: action.meta.undoableCache.meta\n      });\n      delete action.meta.undoableCache;\n    }\n  });\n};\n\nexport const createUndoableMutator = function({\n  id,\n  tags = {},\n  actionFilter\n}: {\n  id: string;\n  tags?: {\n    self?: Tag;\n    past?: Tag;\n    future?: Tag;\n  };\n  actionFilter?: ActionFilter;\n}) {\n  if (tags.self && (tags.past || tags.future)) {\n    let children: Tag[] = [];\n    if (tags.past) children.push(tags.past);\n    if (tags.future) children.push(tags.future);\n    setTagChildren(tags.self, children);\n  }\n\n  return typeMutator(function(\n    action,\n    state: UndoableMutatorState = { past: [], future: [] }\n  ) {\n    if (action.type === undoActionTypePrefix + id) {\n      // Handle undo\n\n      if (state.past.length === 0) {\n        return state;\n      }\n\n      const pastAction = state.past.pop();\n      if (tags.past) setTag(action.event, tags.past);\n\n      if (!pastAction) {\n        console.log(\"this actually happens\");\n        return state;\n      }\n\n      setUndoableCache(action, {\n        type: pastAction.type,\n        payload: pastAction.payload,\n        meta: { ...pastAction.meta, do: false, redo: false, undo: true }\n      });\n\n      state.future.push(pastAction);\n      if (tags.future) setTag(action.event, tags.future);\n    } else if (action.type === redoActionTypePrefix + id) {\n      // Handle redo\n\n      if (state.future.length === 0) {\n        return state;\n      }\n\n      const futureAction = state.future.pop();\n      if (tags.future) setTag(action.event, tags.future);\n\n      if (!futureAction) {\n        return state;\n      }\n\n      setUndoableCache(action, {\n        type: futureAction.type,\n        payload: futureAction.payload,\n        meta: { ...futureAction.meta, do: true, redo: true, undo: false }\n      });\n\n      state.past.push(futureAction);\n      if (tags.past) setTag(action.event, tags.past);\n    } else {\n      // Handle new actions\n\n      if (action.type == actionTypes.INIT) {\n        return state;\n      }\n\n      if (action.meta.undo || action.meta.redo) {\n        return state;\n      }\n\n      if (actionFilter && !actionFilter(action)) {\n        return state;\n      }\n\n      state.future = [];\n      if (tags.future) setTag(action.event, tags.future);\n\n      state.past.push({\n        type: action.type,\n        payload: action.payload,\n        meta: action.meta\n      });\n      if (tags.past) setTag(action.event, tags.past);\n    }\n\n    return state;\n  });\n};\n","import { AbstractActionNormalizerDecorator } from \".\";\nimport { NormalizeOptions } from \"./types\";\n\nexport class DateActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options: NormalizeOptions) {\n    options.action.meta.date = new Date();\n\n    return this._actionNormalizer.normalize(options);\n  }\n}\n","import { AbstractActionNormalizerDecorator } from \".\";\nimport { NormalizeOptions } from \"./types\";\n\nexport class UndoableActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options: NormalizeOptions) {\n    if (options.action.meta.undoData) {\n      options.action.meta.undoData = { ...options.action.meta.undoData };\n    }\n\n    return this._actionNormalizer.normalize(options);\n  }\n}\n","import { StoreDispatchApi, NewAction, Action } from \"../main/core\";\n\nexport const dispatchPromise = function(\n  store: StoreDispatchApi,\n  promise: Promise<NewAction>\n): Promise<Action | undefined> {\n  return promise.then(function(action) {\n    return store.dispatch(action);\n  });\n};\n","import { StoreDispatchApi, NewAction, Action } from \"../main/core\";\n\nexport const dispatchActions = function(\n  store: StoreDispatchApi,\n  actions: NewAction[]\n) {\n  let result: Action[] = [];\n\n  for (const action of actions) {\n    const dispatchedAction = store.dispatch(action);\n    if (dispatchedAction) {\n      result.push(dispatchedAction);\n    }\n  }\n\n  return result;\n};\n"],"sourceRoot":""}