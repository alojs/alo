{"version":3,"sources":["webpack://alo/webpack/universalModuleDefinition","webpack://alo/webpack/bootstrap","webpack://alo/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://alo/./lib/alo/event/index.ts","webpack://alo/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://alo/./node_modules/@babel/runtime/helpers/createClass.js","webpack://alo/./lib/alo/main/core.ts","webpack://alo/./lib/alo/util/index.ts","webpack://alo/./node_modules/@babel/runtime/helpers/objectSpread.js","webpack://alo/./lib/alo/mutator.ts","webpack://alo/./lib/alo/actionNormalizer/index.ts","webpack://alo/./lib/alo/store/index.ts","webpack://alo/./lib/alo/action/index.ts","webpack://alo/./lib/alo/actionResolver/index.ts","webpack://alo/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://alo/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://alo/./node_modules/@babel/runtime/helpers/inherits.js","webpack://alo/./lib/alo/subscribable/index.ts","webpack://alo/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://alo/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://alo/./lib/alo/selector.ts","webpack://alo/./lib/alo/undoable/index.ts","webpack://alo/./lib/alo/actionNormalizer/batchActionNormalizerDecorator.ts","webpack://alo/./lib/alo/actionNormalizer/dateActionNormalizerDecorator.ts","webpack://alo/./lib/alo/actionResolver/batchActionResolverDecorator.ts","webpack://alo/./lib/alo/util/dispatchBatch.ts","webpack://alo/./lib/alo/util/dispatchThunk.ts","webpack://alo/./lib/alo/util/dispatchPromise.ts","webpack://alo/./lib/alo/util/dispatchActions.ts","webpack://alo/./node_modules/fast-clone/index.js","webpack://alo/(webpack)/buildin/module.js","webpack://alo/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://alo/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://alo/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://alo/./node_modules/@babel/runtime/helpers/typeof.js","webpack://alo/./node_modules/@babel/runtime/helpers/setPrototypeOf.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","__webpack_exports__","createTag","setTagChildren","setWildCard","setTag","parentWildCardIsSet","tagIsSet","createEvent","idx","parentByTag","entityContainerByTag","childrenByTag","registerEntityContainer","containerTag","tag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","err","_ref","arguments","length","_ref$name","children","_ref$entityContainer","entityContainer","concat","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","child","event","tags","tagsSet","entityId","parentTag","containerEvent","containers","childTag","origTag","checkWildCard","containerEntityEvent","wildCardIsSet","instance","Constructor","TypeError","_defineProperties","target","props","descriptor","protoProps","staticProps","_store__WEBPACK_IMPORTED_MODULE_0__","_store_types__WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","indexOf","_action__WEBPACK_IMPORTED_MODULE_2__","_action_types__WEBPACK_IMPORTED_MODULE_3__","_event__WEBPACK_IMPORTED_MODULE_4__","_event_types__WEBPACK_IMPORTED_MODULE_5__","_mutator__WEBPACK_IMPORTED_MODULE_6__","_selector__WEBPACK_IMPORTED_MODULE_7__","_undoable__WEBPACK_IMPORTED_MODULE_8__","_undoable_types__WEBPACK_IMPORTED_MODULE_9__","_subscribable__WEBPACK_IMPORTED_MODULE_10__","_subscribable_types__WEBPACK_IMPORTED_MODULE_11__","_actionNormalizer__WEBPACK_IMPORTED_MODULE_12__","_actionNormalizer_types__WEBPACK_IMPORTED_MODULE_13__","_actionNormalizer_batchActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_14__","_actionNormalizer_dateActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_15__","_actionResolver__WEBPACK_IMPORTED_MODULE_16__","_actionResolver_types__WEBPACK_IMPORTED_MODULE_17__","_actionResolver_batchActionResolverDecorator__WEBPACK_IMPORTED_MODULE_18__","_util_dispatchBatch__WEBPACK_IMPORTED_MODULE_19__","_util_dispatchThunk__WEBPACK_IMPORTED_MODULE_20__","_util_dispatchPromise__WEBPACK_IMPORTED_MODULE_21__","_util_dispatchActions__WEBPACK_IMPORTED_MODULE_22__","_util_types__WEBPACK_IMPORTED_MODULE_23__","_util__WEBPACK_IMPORTED_MODULE_24__","isPromiseLike","once","findInArray","cloneDeep","fast_clone__WEBPACK_IMPORTED_MODULE_0__","fast_clone__WEBPACK_IMPORTED_MODULE_0___default","promise","then","fn","result","values","predicate","clone","source","ownKeys","keys","getOwnPropertySymbols","filter","sym","getOwnPropertyDescriptor","forEach","typeMutator","consumer","combineMutators","mutators","mutatorPairs","entries","action","state","_i","_mutatorPairs","_mutatorPairs$_i","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","propName","mutator","ActionNormalizer","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default","callBack","meta","undo","redo","AbstractActionNormalizerDecorator","_ref2","actionNormalizer","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default","_actionNormalizer","options","normalize","actionTypes","INIT","Store","_this","_ref$actionNormalizer","_ref$actionResolver","actionResolver","ActionResolver","_ref$subscribable","subscribable","Subscribable","_ref$cloneDeep","_cloneDeep","_ref$pureByDefault","pureByDefault","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default","_state","isAction","tmp","_afterDispatchNormalization","store","console","error","_subscribable","callSubscribers","_actionResolver","resolve","setAction","_setAction","_callSubscribers","applyMutator","_applyMutator","pureAction","pure","_pureByDefault","originalPayload","payload","_isMutating","Error","type","_mutator","_action","dispatch","impure","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default","listener","remember","subscribe","cloneAction","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","AbstractActionResolverDecorator","_typeof","assertThisInitialized","self","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","constructor","_currentListeners","_nextListeners","slice","_separateNextListeners","isSubscribed","push","_subscribersCalled","_lastListenerOptions","index","splice","listenerOptions","ReferenceError","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","createSelector","selectFunc","lastResult","lastAction","changed","decoratedLastResult","nextResult","combineSelectorResults","selectorResults","reduce","accumulator","selectorResult","setUndoData","undoData","getUndoData","setUndoableCache","undoableCache","createUndoThunk","id","typeThunk","createRedoThunk","createUndoableMutator","_ref$tags","actionFilter","past","future","pastAction","pop","log","do","futureAction","BatchActionNormalizerDecorator","_AbstractActionNormal","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","apply","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default","BATCH_ACTION_TYPE","newBatch","batchItems","map","reverse","storeProxy","getState","childAction","batchId","rootBatchId","parentBatchIds","batchItem","dispatchBatch","ds","DateActionNormalizerDecorator","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default","date","Date","BatchActionResolverDecorator","_AbstractActionResolv","_getPrototypeOf2","_len","args","Array","_key","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default","_eventByBatchId","_childsByBatchId","parentId","___WEBPACK_IMPORTED_MODULE_0__","resolveBatchAction","batchIdx","thunk","batchAction","batch","dispatchThunk","dispatchedActions","dispatchedAction","dispatchPromise","dispatchActions","actions","Function","setTime","getTime","RegExp","newRegExp","fixTypes","JSON","parse","stringify","fixPropertyValue","original","copy","originalValue","newValue","isNaN","NaN","Infinity","getOwnPropertyNames","regexpText","String","slashIndex","lastIndexOf","webpackPolyfill","deprecate","paths","isArray","_arr","_n","_d","_e","_s","_typeof2","_setPrototypeOf"],"mappings":"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","file":"core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"alo\"] = factory();\n\telse\n\t\troot[\"alo\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import { Event, Tag, EntityId } from \"./types\";\n\nlet idx = 0;\nlet parentByTag = {};\nlet entityContainerByTag = {};\nlet childrenByTag = {};\n\nconst registerEntityContainer = function(containerTag, tag) {\n  entityContainerByTag[tag] = containerTag;\n  if (childrenByTag[tag]) {\n    for (const child of childrenByTag[tag]) {\n      registerEntityContainer(containerTag, child);\n    }\n  }\n};\n\nexport const createTag = function({\n  name = \"\",\n  children,\n  entityContainer = false\n}: {\n  name?: string;\n  children?: Tag[];\n  entityContainer?: boolean;\n} = {}): Tag {\n  const tag = `${idx++}-${name}`;\n\n  if (children) {\n    setTagChildren(tag, children, entityContainer);\n  }\n\n  return tag;\n};\n\nexport const setTagChildren = function(\n  tag: Tag,\n  children: Tag[],\n  entityContainer = false\n) {\n  childrenByTag[tag] = children;\n\n  for (const child of children) {\n    parentByTag[child] = tag;\n    if (entityContainer) {\n      registerEntityContainer(tag, child);\n    }\n  }\n};\n\nexport const setWildCard = function(event, tag = \"\") {\n  event.tags[\"*\" + tag] = true;\n  event.tagsSet = true;\n};\n\nexport const setTag = function(event: Event, tag: string, entityId?: EntityId) {\n  event.tagsSet = true;\n\n  event.tags[tag] = event.tags[tag] || true;\n\n  const parentTag = parentByTag[tag];\n  if (parentTag && !event.tags[parentTag]) {\n    setTag(event, parentTag, entityId);\n  }\n\n  const containerTag = entityContainerByTag[tag];\n  if (entityId && containerTag) {\n    const containerEvent = (event.containers[containerTag] =\n      event.containers[containerTag] || {});\n    const containerEntityEvent = (containerEvent[entityId] =\n      containerEvent[entityId] || {});\n    containerEntityEvent[tag] = true;\n  }\n};\n\nexport const parentWildCardIsSet = function(event: Event, childTag) {\n  let origTag = childTag;\n\n  while (true) {\n    childTag = parentByTag[childTag];\n    if (!childTag) {\n      return false;\n    }\n\n    if (event.tags[\"*\" + childTag]) {\n      event.tags[origTag] = true;\n      return true;\n    }\n  }\n};\n\nexport const tagIsSet = function(\n  event: Event,\n  tag,\n  entityId?: EntityId,\n  checkWildCard = true\n) {\n  if (checkWildCard && event.tags[\"*\"]) {\n    return true;\n  }\n\n  let tagIsSet = event.tags[tag];\n  if (entityId != null) {\n    const containerTag = entityContainerByTag[tag];\n    if (containerTag) {\n      const containerEvent = event.containers[containerTag];\n      const containerEntityEvent = containerEvent && containerEvent[entityId];\n      tagIsSet = containerEntityEvent && containerEntityEvent[tag];\n    }\n  }\n\n  const wildCardIsSet =\n    !tagIsSet && (checkWildCard && parentWildCardIsSet(event, tag));\n\n  return !!(tagIsSet || wildCardIsSet);\n};\n\nexport const createEvent = function(): Event {\n  return {\n    tagsSet: false,\n    tags: {},\n    containers: {}\n  };\n};\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","export * from \"../store\";\nexport * from \"../store/types\";\n\nexport * from \"../action\";\nexport * from \"../action/types\";\n\nexport * from \"../event\";\nexport * from \"../event/types\";\n\nexport { combineMutators, typeMutator } from \"../mutator\";\n\n// exporting interfaces results in warnings (https://github.com/webpack/webpack/issues/7378)\nexport * from \"../selector\";\n\nexport * from \"../undoable\";\nexport * from \"../undoable/types\";\n\nexport * from \"../subscribable\";\nexport * from \"../subscribable/types\";\n\nexport * from \"../actionNormalizer\";\nexport * from \"../actionNormalizer/types\";\nexport * from \"../actionNormalizer/batchActionNormalizerDecorator\";\nexport * from \"../actionNormalizer/dateActionNormalizerDecorator\";\n\nexport * from \"../actionResolver\";\nexport * from \"../actionResolver/types\";\nexport * from \"../actionResolver/batchActionResolverDecorator\";\n\nexport * from \"../util/dispatchBatch\";\nexport * from \"../util/dispatchThunk\";\nexport * from \"../util/dispatchPromise\";\nexport * from \"../util/dispatchActions\";\nexport * from \"../util/types\";\nexport { once, findInArray } from \"../util\";\n","import clone from \"fast-clone\";\n\nexport const isPromiseLike = function(promise): promise is Promise<any> {\n  return promise && (<Promise<any>>promise).then !== undefined;\n};\n\nexport var once = function(fn) {\n  var done = false;\n  var result;\n\n  return function() {\n    if (!done) {\n      result = fn();\n      done = true;\n    }\n\n    return result;\n  };\n};\n\nexport const findInArray = function(\n  values: any[],\n  predicate: (value, key, values) => any\n) {\n  let idx = 0;\n  for (const value of values) {\n    const result = predicate(value, idx, values);\n    if (result) {\n      return result;\n    }\n\n    idx++;\n  }\n};\n\nexport const cloneDeep = function(value) {\n  return clone(value);\n};\n","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","import { Action } from \"./action/types\";\n\nexport interface Mutator<T = any> {\n  (action: Action, state: T): T;\n}\n\nexport const typeMutator = function<T extends Mutator>(consumer: T) {\n  return consumer;\n};\n\ntype MutatorsObj = {\n  [propName: string]: Mutator;\n};\n\ntype MutatorsReturnObject<TMutatorsObj extends MutatorsObj> = {\n  [P in keyof TMutatorsObj]: ReturnType<TMutatorsObj[P]>\n};\n\nexport const combineMutators = function<\n  TMutatorsObj extends MutatorsObj = MutatorsObj\n>(mutators: TMutatorsObj) {\n  const mutatorPairs = Object.entries(mutators);\n  const mutator = function(\n    action: Action,\n    state: Partial<MutatorsReturnObject<TMutatorsObj>> = {}\n  ): MutatorsReturnObject<TMutatorsObj> {\n    let result: any = {};\n\n    for (const [propName, mutator] of mutatorPairs) {\n      result[propName] = mutator(action, state[propName]);\n    }\n\n    return result;\n  };\n\n  return mutator;\n};\n","import { ActionNormalizerInterface, NormalizeOptions } from \"./types\";\n\nexport class ActionNormalizer implements ActionNormalizerInterface {\n  normalize({ action, callBack }: NormalizeOptions) {\n    if (!action.meta.undo && !action.meta.redo) action.meta.do = true;\n\n    return callBack(action);\n  }\n}\n\nexport abstract class AbstractActionNormalizerDecorator\n  implements ActionNormalizerInterface {\n  _actionNormalizer: ActionNormalizerInterface;\n\n  constructor({\n    actionNormalizer\n  }: {\n    actionNormalizer: ActionNormalizerInterface;\n  }) {\n    this._actionNormalizer = actionNormalizer;\n  }\n\n  normalize(options: NormalizeOptions) {\n    return this._actionNormalizer.normalize(options);\n  }\n}\n","import { Action, NewAction, NormalizedAction } from \"../action/types\";\nimport { ActionNormalizer } from \"../actionNormalizer\";\nimport {\n  ActionNormalizerInterface,\n  NormalizeOptions\n} from \"../actionNormalizer/types\";\nimport { ActionResolver } from \"../actionResolver\";\nimport { ActionResolverInterface } from \"../actionResolver/types\";\nimport { DeepPartial } from \"../util/types\";\nimport { isAction } from \"../action\";\nimport { Listener, SubscribableInterface } from \"../subscribable/types\";\nimport { Mutator } from \"../mutator\";\nimport { setWildCard } from \"../event\";\nimport { StoreInterface } from \"./types\";\nimport { Subscribable } from \"../subscribable\";\nimport { cloneDeep as _cloneDeep } from \"../util\";\n\nexport var actionTypes = {\n  INIT: \"@@init\"\n};\n\nexport class Store<T extends Mutator = Mutator> implements StoreInterface {\n  _isMutating: boolean;\n  _state: any = null;\n  _action: Action;\n  _effectHandler: any;\n  _mutator: Mutator;\n  _actionNormalizer: ActionNormalizerInterface;\n  _actionResolver: ActionResolverInterface;\n  _subscribable: SubscribableInterface<Store<T>>;\n  _cloneDeep: typeof _cloneDeep;\n  _pureByDefault: boolean;\n\n  constructor({\n    mutator,\n    state,\n    actionNormalizer = new ActionNormalizer(),\n    actionResolver = new ActionResolver(),\n    subscribable = new Subscribable(),\n    cloneDeep = _cloneDeep,\n    pureByDefault = false\n  }: {\n    mutator: T;\n    state?: DeepPartial<ReturnType<ReturnType<T>>>;\n    actionNormalizer?: ActionNormalizerInterface;\n    actionResolver?: ActionResolverInterface;\n    subscribable?: SubscribableInterface<Store<T>>;\n    cloneDeep?: typeof _cloneDeep;\n    pureByDefault?: boolean;\n  }) {\n    this._actionResolver = actionResolver;\n    this._actionNormalizer = actionNormalizer;\n    this._subscribable = subscribable;\n    this._cloneDeep = cloneDeep;\n    this._pureByDefault = pureByDefault;\n\n    this._isMutating = false;\n    this._mutator = mutator;\n\n    // Initial set action\n    this.dispatch({\n      type: actionTypes.INIT,\n      meta: {\n        impure: true\n      },\n      payload: state\n    });\n  }\n\n  /**\n   * Returns the current state\n   */\n  getState = (): ReturnType<T> => {\n    return this._state;\n  };\n\n  /**\n   * Get the last dispatched action\n   */\n  getAction(): Action {\n    return this._action;\n  }\n\n  subscribe(listener: Listener<this>, remember = false) {\n    return this._subscribable.subscribe(listener, remember);\n  }\n\n  getActionNormalizer() {\n    return this._actionNormalizer;\n  }\n\n  setActionNormalizer(actionNormalizer: ActionNormalizerInterface) {\n    this._actionNormalizer = actionNormalizer;\n  }\n\n  getActionResolver() {\n    return this._actionResolver;\n  }\n\n  setActionResolver(actionResolver: ActionResolverInterface) {\n    this._actionResolver = actionResolver;\n  }\n\n  getSubscribable() {\n    return this._subscribable;\n  }\n\n  setSubscribable(subscribable: SubscribableInterface<Store<T>>) {\n    this._subscribable = subscribable;\n  }\n\n  /**\n   * Send a message which will trigger an action\n   */\n  dispatch = (action: NewAction): Action | undefined => {\n    if (!isAction(action)) {\n      if (action) {\n        console.error(\"Invalid action dispatched\", action);\n      }\n\n      return;\n    }\n\n    if (!action.meta) action.meta = {};\n    if (!action.meta.tmp) action.meta.tmp = {};\n\n    return this._actionNormalizer.normalize({\n      action: action as NormalizedAction,\n      callBack: this._afterDispatchNormalization,\n      store: this\n    });\n  };\n\n  _callSubscribers = () => {\n    this._subscribable.callSubscribers(this);\n  };\n\n  _afterDispatchNormalization: NormalizeOptions[\"callBack\"] = action => {\n    return this._actionResolver.resolve({\n      action: action,\n      store: this,\n      setAction: this._setAction,\n      callSubscribers: this._callSubscribers,\n      applyMutator: this._applyMutator\n    });\n  };\n\n  _applyMutator = (action: Action) => {\n    let pureAction =\n      action.meta.pure != null ? action.meta.pure : this._pureByDefault;\n    let originalPayload = action.payload;\n    if (action.payload != null && !pureAction) {\n      action.payload = this._cloneDeep(originalPayload);\n    }\n\n    if (this._isMutating) {\n      throw new Error(\"Mutations already in progress\");\n    }\n\n    this._isMutating = true;\n\n    if (action.type === actionTypes.INIT) {\n      this._state = action.payload;\n      setWildCard(action.event);\n    }\n\n    try {\n      this._state = this._mutator(action, this._state);\n    } catch (err) {\n      console.error(err);\n    }\n\n    this._isMutating = false;\n\n    action.payload = originalPayload;\n  };\n\n  /**\n   * Override the last dispatched action\n   *\n   * @param action New action\n   */\n  _setAction = (action: Action) => {\n    this._action = action;\n  };\n}\n","import { NewAction, Action, NormalizedAction } from \"./types\";\n\nexport const isAction = function(action): action is NewAction {\n  return action && (<NewAction>action).type !== undefined;\n};\n\nexport const cloneAction = function(\n  action: NormalizedAction | Action\n): NormalizedAction {\n  return {\n    ...action,\n    event: undefined,\n    meta: {\n      ...action.meta,\n      tmp: {}\n    }\n  };\n};\n","import { Action } from \"../action/types\";\nimport { createEvent } from \"../event\";\nimport { ActionResolverInterface, ResolveOptions } from \"./types\";\n\nexport class ActionResolver implements ActionResolverInterface {\n  resolve({\n    action,\n    callSubscribers,\n    applyMutator,\n    setAction\n  }: ResolveOptions): Action | undefined {\n    action.event = createEvent();\n\n    applyMutator(action as Action);\n\n    setAction(action as Action);\n    if (action.event.tagsSet) {\n      callSubscribers();\n    }\n\n    return action as Action;\n  }\n}\n\nexport abstract class AbstractActionResolverDecorator\n  implements ActionResolverInterface {\n  _actionResolver: ActionResolverInterface;\n\n  constructor({ actionResolver }: { actionResolver: ActionResolverInterface }) {\n    this._actionResolver = actionResolver;\n  }\n\n  resolve(options: ResolveOptions) {\n    return this._actionResolver.resolve(options);\n  }\n}\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","import { SubscribableInterface, Listener } from \"./types\";\n\n/**\n * Implements a very basic and general subscribable:\n * a list of listeners which will be called in specific moments - moments defined by the child class\n * New listeners will not be directly called, when they are subscribed while a broadcast is happening\n */\nexport class Subscribable<T = any> implements SubscribableInterface<T> {\n  _currentListeners: Function[];\n  _nextListeners: Function[];\n  _lastListenerOptions?: T;\n  _subscribersCalled = false;\n\n  constructor() {\n    this._currentListeners = [];\n    // Will be copied shallowly from currentListeners by _separateNextListeners\n    this._nextListeners = this._currentListeners;\n  }\n\n  /**\n   * Creates a copy of currentListeners for the futureListeners (Look at subscribe for more information)\n   */\n  _separateNextListeners() {\n    if (this._currentListeners === this._nextListeners) {\n      this._nextListeners = this._currentListeners.slice();\n    }\n  }\n\n  /**\n   * Adds a function to the subscribers list.\n   *\n   * The function gets called with the store as a parameter\n   *\n   * If subscribe is called in an other listener and is therefore in a _callSubscribers call,\n   * the new listener will only be called in future _callSubscribers calls!\n   *\n   * @param {function} listener\n   */\n  subscribe(listener: Listener<T>, remember = false) {\n    this._separateNextListeners();\n    var isSubscribed = true;\n    this._nextListeners.push(listener);\n\n    if (remember && this._subscribersCalled) {\n      listener(this._lastListenerOptions as T);\n    }\n\n    return function() {\n      if (isSubscribed) {\n        isSubscribed = false;\n        this._separateNextListeners();\n        var index = this._nextListeners.indexOf(listener);\n        this._nextListeners.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Should be called by the child class, when a broadcast to the subscribers should occur\n   * This also sets the listeners registered in nextListeners as currentListeners\n   */\n  callSubscribers(listenerOptions: T) {\n    this._subscribersCalled = true;\n    this._lastListenerOptions = listenerOptions;\n    this._currentListeners = this._nextListeners;\n    for (var listener of this._currentListeners) {\n      listener(listenerOptions);\n    }\n  }\n}\n\n/**\n * Callback used by _callSubscribers\n * @callback listenerCallback\n * @param {Store} store\n *\n * TODO: This notation currently doesnt work with vscode https://github.com/Microsoft/TypeScript/issues/7515\n */\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","import { Action } from \"./action/types\";\nimport { FirstArgument } from \"./util/types\";\n\nexport interface SelectFuncResult<T = any> {\n  changed?: boolean;\n  value: T;\n}\n\ntype Selector = (options, action: Action) => SelectFuncResult;\n\ntype SelectFunc = (\n  options: any,\n  action: Action,\n  last?: false | SelectFuncResult\n) => SelectFuncResult;\n\nexport interface SelectorResult<T extends SelectFunc> {\n  changed: boolean;\n  value: ReturnType<T>[\"value\"];\n}\n\nexport const createSelector = function<T extends SelectFunc>(\n  selectFunc: T,\n  pure = false\n) {\n  type Result = SelectorResult<T>;\n\n  let lastResult: Result;\n  let lastAction: Action | null = null;\n\n  return function(options: FirstArgument<T>, action: Action) {\n    // If a selector is pure, it will have the same result, if the current action object is the same as last one\n    if (pure && lastAction === action) {\n      lastResult = { ...lastResult, changed: false };\n\n      return lastResult;\n    }\n\n    const decoratedLastResult = lastResult\n      ? { ...lastResult, changed: false }\n      : false;\n\n    let nextResult: any = selectFunc(options, action, decoratedLastResult);\n    if (nextResult.changed == null) {\n      nextResult.changed = true;\n    }\n\n    lastResult = nextResult;\n    if (pure) {\n      lastAction = action;\n    }\n\n    return lastResult;\n  };\n};\n\ntype SelectorResultsObj = {\n  [propName: string]: SelectFuncResult;\n};\n\ntype CombinedSelectorResults<T extends SelectorResultsObj> = {\n  value: { [P in keyof T]: T[P][\"value\"] };\n  changed: boolean;\n};\n\nexport const combineSelectorResults = function<T extends SelectorResultsObj>(\n  selectorResults: T\n): CombinedSelectorResults<T> {\n  let changed = false;\n  let value: any = Object.keys(selectorResults).reduce(\n    (accumulator: object, key: string) => {\n      let selectorResult = selectorResults[key];\n\n      accumulator[key] = selectorResult.value;\n      if (selectorResult.changed) {\n        changed = true;\n      }\n\n      return accumulator;\n    },\n    {}\n  );\n\n  return { changed, value };\n};\n","import { actionTypes } from \"../store\";\nimport { NewAction } from \"../action/types\";\nimport { Mutator, typeMutator } from \"../mutator\";\nimport { Tag } from \"../event/types\";\nimport { setTagChildren, setTag } from \"../event\";\nimport { typeThunk } from \"../main/core\";\nimport {\n  UndoableAction,\n  UndoRedoAction,\n  ActionFilter,\n  UndoableMutatorState\n} from \"./types\";\n\nexport const setUndoData = function(\n  action: UndoableAction,\n  key: string | number,\n  value?: any\n) {\n  const undoData = (action.meta.tmp.undoData = action.meta.tmp.undoData || {});\n  if (action.meta.do) undoData[key] = value;\n\n  return undoData[key];\n};\n\nexport const getUndoData = function(\n  action: UndoableAction,\n  key: string | number\n) {\n  const undoData = (action.meta.tmp.undoData = action.meta.tmp.undoData || {});\n\n  return undoData[key];\n};\n\nconst setUndoableCache = function(action: UndoRedoAction, value: NewAction) {\n  action.meta = action.meta || {};\n  action.meta.undoableCache = value;\n};\n\nconst undoActionTypePrefix = \"@@undo_\";\nconst redoActionTypePrefix = \"@@redo_\";\n\nexport const createUndoThunk = function(id) {\n  return typeThunk(store => {\n    const action = store.dispatch({\n      type: undoActionTypePrefix + id\n    });\n    if (action && action.meta && action.meta.undoableCache) {\n      store.dispatch({\n        type: action.meta.undoableCache.type,\n        payload: action.meta.undoableCache.payload,\n        meta: action.meta.undoableCache.meta\n      });\n      delete action.meta.undoableCache;\n    }\n  });\n};\n\nexport const createRedoThunk = function(id) {\n  return typeThunk(store => {\n    const action = store.dispatch({\n      type: redoActionTypePrefix + id\n    });\n    if (action && action.meta && action.meta.undoableCache) {\n      store.dispatch(action.meta.undoableCache);\n      delete action.meta.undoableCache;\n    }\n  });\n};\n\nexport const createUndoableMutator = function({\n  id,\n  tags = {},\n  actionFilter\n}: {\n  id: string;\n  tags?: {\n    self?: Tag;\n    past?: Tag;\n    future?: Tag;\n  };\n  actionFilter?: ActionFilter;\n}) {\n  if (tags.self && (tags.past || tags.future)) {\n    let children: Tag[] = [];\n    if (tags.past) children.push(tags.past);\n    if (tags.future) children.push(tags.future);\n    setTagChildren(tags.self, children);\n  }\n\n  return typeMutator(function(\n    action,\n    state: UndoableMutatorState = { past: [], future: [] }\n  ) {\n    if (action.type === undoActionTypePrefix + id) {\n      // Handle undo\n\n      if (state.past.length === 0) {\n        return state;\n      }\n\n      const pastAction = state.past.pop();\n      if (tags.past) setTag(action.event, tags.past);\n\n      if (!pastAction) {\n        console.log(\"this actually happens\");\n        return state;\n      }\n\n      setUndoableCache(action, {\n        type: pastAction.type,\n        payload: pastAction.payload,\n        meta: { ...pastAction.meta, do: false, redo: false, undo: true }\n      });\n\n      state.future.push(pastAction);\n      if (tags.future) setTag(action.event, tags.future);\n    } else if (action.type === redoActionTypePrefix + id) {\n      // Handle redo\n\n      if (state.future.length === 0) {\n        return state;\n      }\n\n      const futureAction = state.future.pop();\n      if (tags.future) setTag(action.event, tags.future);\n\n      if (!futureAction) {\n        return state;\n      }\n\n      setUndoableCache(action, {\n        type: futureAction.type,\n        payload: futureAction.payload,\n        meta: { ...futureAction.meta, do: true, redo: true, undo: false }\n      });\n\n      state.past.push(futureAction);\n      if (tags.past) setTag(action.event, tags.past);\n    } else {\n      // Handle new actions\n\n      if (action.type == actionTypes.INIT) {\n        return state;\n      }\n\n      if (action.meta.undo || action.meta.redo) {\n        return state;\n      }\n\n      if (actionFilter && !actionFilter(action)) {\n        return state;\n      }\n\n      state.future = [];\n      if (tags.future) setTag(action.event, tags.future);\n\n      state.past.push({\n        type: action.type,\n        payload: action.payload,\n        meta: action.meta\n      });\n      if (tags.past) setTag(action.event, tags.past);\n    }\n\n    return state;\n  });\n};\n","import { AbstractActionNormalizerDecorator } from \".\";\nimport { Action } from \"../action/types\";\nimport { NormalizeOptions } from \"./types\";\nimport { isAction, cloneAction } from \"../action\";\nimport {\n  StoreDispatchApi,\n  dispatchBatch,\n  BATCH_ACTION_TYPE\n} from \"../main/core\";\n\n/**\n * Handles batch actions which are dispatched for a second time\n */\nexport class BatchActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options: NormalizeOptions) {\n    const { action, store } = options;\n\n    if (\n      !isAction(action) ||\n      action.type !== BATCH_ACTION_TYPE ||\n      action.meta.newBatch\n    ) {\n      return this._actionNormalizer.normalize(options);\n    }\n\n    let batchItems: Action[] = action.payload.map(action =>\n      cloneAction(action)\n    );\n    if (action.meta.undo) {\n      batchItems.reverse();\n    }\n\n    let storeProxy: StoreDispatchApi = {\n      getState: store.getState,\n      dispatch: function(childAction) {\n        childAction.meta = childAction.meta || {};\n\n        // Handle recursive batches\n        if (action.meta.batchId != null) {\n          childAction.meta.rootBatchId = action.meta.rootBatchId;\n          childAction.meta.parentBatchIds = action.meta.parentBatchIds;\n        }\n\n        if (\n          childAction.type === BATCH_ACTION_TYPE &&\n          !childAction.meta.batchItem\n        ) {\n          // This is the final new batch action created by \"dispatchBatch\"\n          // We now apply metas from our original batch options.action at the top\n          childAction.meta = { ...action.meta, ...childAction.meta };\n        }\n\n        return store.dispatch(childAction);\n      }\n    };\n\n    // For now we just use the dispatchBatch function to rehandle the old batch action\n    const newBatchAction = dispatchBatch(storeProxy, function(ds) {\n      for (const batchItem of batchItems) {\n        // Apply do/undo/redo signals from the batch action to its item\n        if (action.meta.undo) {\n          batchItem.meta.do = !batchItem.meta.do;\n          batchItem.meta.undo = !batchItem.meta.undo;\n        }\n        if (action.meta.redo && batchItem.meta.do) {\n          batchItem.meta.redo = true;\n        }\n\n        ds.dispatch(batchItem);\n      }\n    });\n\n    return newBatchAction;\n  }\n}\n","import { AbstractActionNormalizerDecorator } from \".\";\nimport { NormalizeOptions } from \"./types\";\n\nexport class DateActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options: NormalizeOptions) {\n    options.action.meta.date = new Date();\n\n    return this._actionNormalizer.normalize(options);\n  }\n}\n","import { AbstractActionResolverDecorator } from \".\";\nimport { BATCH_ACTION_TYPE, createEvent } from \"../main/core\";\nimport { Action } from \"../action/types\";\nimport { ResolveOptions } from \"./types\";\n\nexport class BatchActionResolverDecorator extends AbstractActionResolverDecorator {\n  _eventByBatchId = {};\n  _childsByBatchId = {};\n\n  resolve(options: ResolveOptions) {\n    const { store, setAction, applyMutator } = options;\n\n    if (\n      !options.action.meta.batchItem &&\n      options.action.type !== BATCH_ACTION_TYPE\n    ) {\n      return this._actionResolver.resolve(options);\n    }\n\n    const batchId = options.action.meta.batchId;\n    const rootBatchId = options.action.meta.rootBatchId;\n\n    options.action.event = this._eventByBatchId[rootBatchId] =\n      this._eventByBatchId[rootBatchId] || createEvent();\n    const action: Action = options.action as Action;\n    delete action.meta.batchId;\n    delete action.meta.rootBatchId;\n    delete action.meta.newBatch;\n    const parentBatchIds = options.action.meta.parentBatchIds;\n    delete action.meta.parentBatchIds;\n\n    if (action.meta.batchItem && action.type !== BATCH_ACTION_TYPE) {\n      applyMutator(action);\n    }\n\n    if (action.type === BATCH_ACTION_TYPE) {\n      action.payload = this._childsByBatchId[batchId];\n      delete this._childsByBatchId[batchId];\n    }\n\n    if (action.meta.batchItem) {\n      if (action.type !== BATCH_ACTION_TYPE && parentBatchIds) {\n        for (const parentId of parentBatchIds) {\n          this._childsByBatchId[parentId] =\n            this._childsByBatchId[parentId] || [];\n          this._childsByBatchId[parentId].push(action);\n        }\n      }\n\n      delete action.meta.batchItem;\n\n      return action;\n    }\n\n    delete this._eventByBatchId[batchId];\n\n    setAction(action as Action);\n    if (action.event.tagsSet) {\n      store._callSubscribers();\n    }\n\n    return action;\n  }\n}\n","import { StoreDispatchApi, Action, NormalizedAction } from \"../main/core\";\nimport { isPromiseLike } from \".\";\nimport { BatchAction, Thunk } from \"./types\";\n\nconst resolveBatchAction = function(\n  store: StoreDispatchApi,\n  action: BatchAction\n): Action | undefined {\n  if (!action.payload) {\n    // No child actions were dispatched\n    return;\n  }\n\n  return store.dispatch(action);\n};\n\nexport const BATCH_ACTION_TYPE = \"@@batch\";\nlet batchIdx = 0;\nexport const dispatchBatch = function<\n  S extends StoreDispatchApi,\n  T extends Thunk<StoreDispatchApi<ReturnType<S[\"getState\"]>>>\n>(\n  store: S,\n  thunk: T\n): ReturnType<T> extends Promise<any>\n  ? Promise<Action | undefined>\n  : Action | undefined {\n  const batchId = batchIdx++;\n  const batchAction: BatchAction = {\n    type: BATCH_ACTION_TYPE,\n    payload: [],\n    meta: {\n      pure: true,\n      batchId,\n      rootBatchId: batchId,\n      batch: true,\n      newBatch: true\n    }\n  };\n\n  const result = thunk({\n    getState: store.getState,\n    dispatch: function(action) {\n      action.meta = action.meta || {};\n\n      if (action.meta.batchId == null) {\n        action.meta.batchId = batchAction.meta.batchId;\n      }\n\n      action.meta.rootBatchId = batchAction.meta.batchId;\n\n      action.meta.parentBatchIds = action.meta.parentBatchIds || [];\n      action.meta.parentBatchIds.push(batchAction.meta.batchId);\n\n      action.meta.batchItem = true;\n\n      return store.dispatch(action);\n    }\n  } as S);\n\n  if (isPromiseLike(result)) {\n    return result.then(function() {\n      return resolveBatchAction(store, batchAction);\n    }) as any;\n  }\n\n  return resolveBatchAction(store, batchAction) as any;\n};\n","import { isPromiseLike } from \".\";\nimport { StoreDispatchApi, Action } from \"../main/core\";\nimport { Thunk } from \"./types\";\n\nexport const typeThunk = <T extends Thunk>(thunk: T) => thunk;\n\nexport const dispatchThunk = function<\n  S extends StoreDispatchApi,\n  T extends Thunk<StoreDispatchApi<ReturnType<S[\"getState\"]>>>\n>(\n  store: S,\n  thunk: T\n): ReturnType<T> extends Promise<any> ? Promise<Action[]> : Action[] {\n  const dispatchedActions: Action[] = [];\n\n  const result = thunk({\n    getState: store.getState,\n    dispatch: function(action) {\n      const dispatchedAction = store.dispatch(action);\n      if (dispatchedAction) {\n        dispatchedActions.push(dispatchedAction);\n      }\n\n      return dispatchedAction;\n    }\n  });\n  if (isPromiseLike(result)) {\n    return result.then(function() {\n      return dispatchedActions;\n    }) as any;\n  }\n\n  return dispatchedActions as any;\n};\n","import { StoreDispatchApi, NewAction, Action } from \"../main/core\";\n\nexport const dispatchPromise = function(\n  store: StoreDispatchApi,\n  promise: Promise<NewAction>\n): Promise<Action | undefined> {\n  return promise.then(function(action) {\n    return store.dispatch(action);\n  });\n};\n","import { StoreDispatchApi, NewAction, Action } from \"../main/core\";\n\nexport const dispatchActions = function(\n  store: StoreDispatchApi,\n  actions: NewAction[]\n) {\n  let result: Action[] = [];\n\n  for (const action of actions) {\n    const dispatchedAction = store.dispatch(action);\n    if (dispatchedAction) {\n      result.push(dispatchedAction);\n    }\n  }\n\n  return result;\n};\n","\"use strict\";\nvar windowOrGlobal = Function('return this')();\n(function (root) {\n    /* istanbul ignore next */\n    if (typeof exports !== 'undefined') {\n        /* istanbul ignore next */\n        if (typeof module !== 'undefined' && module && module.exports) {\n            exports = module.exports = clone;\n        }\n        exports.clone = clone;\n    }\n    else {\n        /* istanbul ignore next */\n        root.clone = clone;\n    }\n    function clone(value) {\n        var type = typeof value;\n        switch (type) {\n            case 'object':\n                // null and undefined\n                if (value == null) {\n                    return value;\n                }\n                var result = void 0;\n                if (value instanceof Date) {\n                    result = new Date();\n                    result.setTime(value.getTime());\n                    return result;\n                }\n                else if (value instanceof RegExp) {\n                    result = newRegExp(value);\n                    return result;\n                }\n                result = JSON.parse(JSON.stringify(value));\n                fixTypes(value, result);\n                return result;\n            default:\n                return value;\n        }\n    }\n    function fixPropertyValue(original, copy, key) {\n        var originalValue = original[key];\n        var originalType = typeof originalValue;\n        switch (originalType) {\n            case 'object':\n                if (originalValue instanceof Date) {\n                    var newValue = new Date();\n                    newValue.setTime(originalValue.getTime());\n                    copy[key] = newValue;\n                }\n                else if (originalValue instanceof RegExp) {\n                    copy[key] = newRegExp(originalValue);\n                }\n                else if (originalValue == null) {\n                    copy[key] = originalValue;\n                }\n                else {\n                    fixTypes(originalValue, copy[key]);\n                }\n                break;\n            case 'number':\n                if (isNaN(originalValue)) {\n                    copy[key] = NaN;\n                }\n                else if (originalValue == Infinity) {\n                    copy[key] = Infinity;\n                }\n                break;\n            default:\n                break;\n        }\n    }\n    function fixTypes(original, copy) {\n        if (original instanceof Array) {\n            for (var index = 0; index < original.length; index++) {\n                fixPropertyValue(original, copy, index);\n            }\n        }\n        else {\n            var keys = Object.getOwnPropertyNames(original);\n            keys.forEach(function (key) {\n                fixPropertyValue(original, copy, key);\n            });\n        }\n    }\n    function newRegExp(value) {\n        var regexpText = String(value);\n        var slashIndex = regexpText.lastIndexOf('/');\n        return new RegExp(regexpText.slice(1, slashIndex), regexpText.slice(slashIndex + 1));\n    }\n})(windowOrGlobal);\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;"],"sourceRoot":""}