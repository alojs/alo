{"version":3,"sources":["webpack://alo/webpack/universalModuleDefinition","webpack://alo/webpack/bootstrap","webpack://alo/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://alo/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://alo/./node_modules/@babel/runtime/helpers/createClass.js","webpack://alo/./node_modules/@babel/runtime/helpers/objectSpread.js","webpack://alo/./lib/alo/event/index.ts","webpack://alo/./lib/alo/actionNormalizer/index.ts","webpack://alo/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://alo/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://alo/./node_modules/@babel/runtime/helpers/inherits.js","webpack://alo/./lib/alo/util.ts","webpack://alo/./lib/alo/actionResolver/index.ts","webpack://alo/./lib/alo/main/main.ts","webpack://alo/./lib/alo/undoable.ts","webpack://alo/./lib/alo/action/index.ts","webpack://alo/./lib/alo/store/index.ts","webpack://alo/./lib/alo/subscribable/index.ts","webpack://alo/./lib/alo/mutator.ts","webpack://alo/./node_modules/@babel/runtime/helpers/typeof.js","webpack://alo/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://alo/./lib/alo/selector.ts","webpack://alo/./lib/alo/actionNormalizer/batchActionNormalizerDecorator.ts","webpack://alo/./lib/alo/actionNormalizer/promiseActionNormalizerDecorator.ts","webpack://alo/./lib/alo/actionNormalizer/thunkActionNormalizerDecorator.ts","webpack://alo/./lib/alo/actionResolver/batchActionResolverDecorator.ts","webpack://alo/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://alo/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://alo/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://alo/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://alo/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://alo/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://alo/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://alo/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://alo/./node_modules/@babel/runtime/helpers/nonIterableSpread.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","obj","configurable","writable","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","arguments","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","__webpack_exports__","createTag","setWildCard","setTag","parentWildCardIsSet","tagIsSet","createEvent","idx","parentByTag","entityContainerByTag","childrenByTag","registerEntityContainer","containerTag","tag","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","iterator","next","done","err","_ref","_ref$name","children","_ref$entityContainer","entityContainer","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","child","event","tags","tagsSet","entityId","parentTag","containerEvent","containers","childTag","origTag","checkWildCard","containerEntityEvent","wildCardIsSet","ActionNormalizer","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default","action","callBack","AbstractActionNormalizerDecorator","_ref2","actionNormalizer","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default","_actionNormalizer","options","normalize","_typeof","assertThisInitialized","self","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","subClass","superClass","constructor","isPromise","promise","then","isFunction","apply","ActionResolver","callSubscribers","applyMutator","setAction","AbstractActionResolverDecorator","actionResolver","_actionResolver","resolve","_store__WEBPACK_IMPORTED_MODULE_0__","_store_types__WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","indexOf","_action__WEBPACK_IMPORTED_MODULE_2__","_action_types__WEBPACK_IMPORTED_MODULE_3__","_event__WEBPACK_IMPORTED_MODULE_4__","_mutator__WEBPACK_IMPORTED_MODULE_5__","_selector__WEBPACK_IMPORTED_MODULE_6__","_undoable__WEBPACK_IMPORTED_MODULE_7__","_subscribable__WEBPACK_IMPORTED_MODULE_8__","_subscribable_types__WEBPACK_IMPORTED_MODULE_9__","_actionNormalizer__WEBPACK_IMPORTED_MODULE_10__","_actionNormalizer_types__WEBPACK_IMPORTED_MODULE_11__","_actionNormalizer_batchActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_12__","_actionNormalizer_promiseActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_13__","_actionNormalizer_thunkActionNormalizerDecorator__WEBPACK_IMPORTED_MODULE_14__","_actionResolver__WEBPACK_IMPORTED_MODULE_15__","_actionResolver_types__WEBPACK_IMPORTED_MODULE_16__","_actionResolver_batchActionResolverDecorator__WEBPACK_IMPORTED_MODULE_17__","undoData","id","meta","setUndoableCache","undoableCache","undoAction","dispatch","type","payload","redoAction","createUndoableMutator","_ref$tags","actionFilter","ctx","state","past","future","pop","push","joinTags","console","log","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_0___default","do","redo","undo","actionTypes","INIT","isAction","normalizeNewAction","Store","_this","mutator","_ref$actionNormalizer","_ref$actionResolver","_ref$subscribable","subscribable","Subscribable","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default","_state","unnormalizedAction","_afterDispatchNormalization","store","_subscribable","Error","_setAction","_callSubscribers","_applyMutator","_isMutating","_mutator","error","_action","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default","listener","remember","subscribe","_currentListeners","_nextListeners","slice","_separateNextListeners","isSubscribed","_subscribersCalled","_lastListenerOptions","index","splice","listenerOptions","typeMutator","consumer","combineMutators","mutators","mutatorPairs","entries","result","_i","_mutatorPairs","_mutatorPairs$_i","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","propName","_typeof2","ReferenceError","createSelector","selectFunc","lastResult","pure","lastAction","changed","decoratedLastResult","nextResult","combineSelectorResults","selectorResults","reduce","accumulator","selectorResult","BATCH_ACTION_TYPE","batchAction","batch","getState","batchIdx","BatchActionNormalizerDecorator","_AbstractActionNormal","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_4___default","isBatch","batchId","newBatch","batchNormalizedCallback","batchItem","getActionNormalizer","PromiseActionNormalizerDecorator","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default","typeThunk","thunk","ThunkActionNormalizerDecorator","BatchActionResolverDecorator","_AbstractActionResolv","_getPrototypeOf2","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_2___default","_len","args","Array","_key","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default","_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8___default","_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_7___default","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_3___default","_eventByBatchId","batchItems","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default","reverse","batchedAction","newBatchActionItem","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","arrayWithoutHoles","iterableToArray","nonIterableSpread","isArray","_arr","_n","_d","_e","_s","_setPrototypeOf","arr2","iter","toString","from"],"mappings":";;;;;;CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,OAAA,GAAAH,GACA,iBAAAC,QACAA,QAAA,IAAAD,IAEAD,EAAA,IAAAC,IARA,CASCK,OAAA,WACD,mBCTA,IAAAC,EAAA,GAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,GAAA,CACAC,EAAAD,EACAE,GAAA,EACAT,QAAA,IAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA0DA,OArDAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,EAAA,CAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAtB,GACA,oBAAAuB,eAAAC,aACAN,OAAAC,eAAAnB,EAAAuB,OAAAC,YAAA,CAAwDC,MAAA,WAExDP,OAAAC,eAAAnB,EAAA,cAAiDyB,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAhC,GACA,IAAAe,EAAAf,KAAA2B,WACA,WAA2B,OAAA3B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,oBCnEAtC,EAAAD,QAfA,SAAAwC,EAAAT,EAAAN,GAYA,OAXAM,KAAAS,EACAtB,OAAAC,eAAAqB,EAAAT,EAAA,CACAN,QACAL,YAAA,EACAqB,cAAA,EACAC,UAAA,IAGAF,EAAAT,GAAAN,EAGAe,kBCNAvC,EAAAD,QANA,SAAA2C,EAAAC,GACA,KAAAD,aAAAC,GACA,UAAAC,UAAA,qDCFA,SAAAC,EAAAC,EAAAC,GACA,QAAAxC,EAAA,EAAiBA,EAAAwC,EAAAC,OAAkBzC,IAAA,CACnC,IAAA0C,EAAAF,EAAAxC,GACA0C,EAAA9B,WAAA8B,EAAA9B,aAAA,EACA8B,EAAAT,cAAA,EACA,UAAAS,MAAAR,UAAA,GACAxB,OAAAC,eAAA4B,EAAAG,EAAAnB,IAAAmB,IAUAjD,EAAAD,QANA,SAAA4C,EAAAO,EAAAC,GAGA,OAFAD,GAAAL,EAAAF,EAAAR,UAAAe,GACAC,GAAAN,EAAAF,EAAAQ,GACAR,oBCbA,IAAAzB,EAAqBb,EAAQ,GAqB7BL,EAAAD,QAnBA,SAAA+C,GACA,QAAAvC,EAAA,EAAiBA,EAAA6C,UAAAJ,OAAsBzC,IAAA,CACvC,IAAA8C,EAAA,MAAAD,UAAA7C,GAAA6C,UAAA7C,GAAA,GACA+C,EAAArC,OAAAsC,KAAAF,GAEA,mBAAApC,OAAAuC,wBACAF,IAAAG,OAAAxC,OAAAuC,sBAAAH,GAAAK,OAAA,SAAAC,GACA,OAAA1C,OAAA2C,yBAAAP,EAAAM,GAAAxC,eAIAmC,EAAAO,QAAA,SAAA/B,GACAZ,EAAA4B,EAAAhB,EAAAuB,EAAAvB,MAIA,OAAAgB,iCChBAzC,EAAAQ,EAAAiD,EAAA,sBAAAC,IAAA1D,EAAAQ,EAAAiD,EAAA,sBAAAE,IAAA3D,EAAAQ,EAAAiD,EAAA,sBAAAG,IAAA5D,EAAAQ,EAAAiD,EAAA,sBAAAI,IAAA7D,EAAAQ,EAAAiD,EAAA,sBAAAK,IAAA9D,EAAAQ,EAAAiD,EAAA,sBAAAM,IAAA,IAAIC,EAAM,EACNC,EAAc,GACdC,EAAuB,GACvBC,EAAgB,GAEdC,EAA0B,SAA1BA,EAAmCC,EAAcC,GAErD,GADAJ,EAAqBI,GAAOD,EACxBF,EAAcG,GAAM,KAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IACtB,QAAAC,EAAAC,EAAoBT,EAAcG,GAAlCrD,OAAA4D,cAAAN,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,EAAwC,CACtCH,EAAwBC,EADcM,EAAAxD,QADlB,MAAA6D,GAAAR,GAAA,EAAAC,EAAAO,EAAA,YAAAT,GAAA,MAAAK,EAAA,QAAAA,EAAA,oBAAAJ,EAAA,MAAAC,MAObf,EAAY,SAAAuB,GAQtB,IAAAC,EAAAD,EAPDxE,YAOC,IAAAyE,EAPM,GAONA,EANDC,EAMCF,EANDE,SAMCC,EAAAH,EALDI,uBAKC,IAAAD,KACKd,EAAG,GAAAlB,OAAMY,IAAN,KAAAZ,OAAe3C,GAExB,GAAI0E,EAAU,CACZhB,EAAcG,GAAOa,EADT,IAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAAd,EAAA,IAGZ,QAAAe,EAAAC,EAAoBP,EAApBlE,OAAA4D,cAAAS,GAAAG,EAAAC,EAAAZ,QAAAC,MAAAO,GAAA,EAA8B,KAAnBK,EAAmBF,EAAAtE,MAC5B8C,EAAY0B,GAASrB,EACjBe,GACFjB,EAAwBE,EAAKqB,IANrB,MAAAX,GAAAO,GAAA,EAAAC,EAAAR,EAAA,YAAAM,GAAA,MAAAI,EAAA,QAAAA,EAAA,oBAAAH,EAAA,MAAAC,IAWd,OAAOlB,GAGIX,EAAc,SAASiC,GAAiB,IAAVtB,EAAUvB,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,GAAAA,UAAA,GAAJ,GAC/C6C,EAAMC,KAAK,IAAMvB,IAAO,EACxBsB,EAAME,SAAU,GAGLlC,EAAS,SAATA,EACXgC,EACAtB,EACAyB,GAEAH,EAAME,SAAU,EAEhBF,EAAMC,KAAKvB,GAAOsB,EAAMC,KAAKvB,KAAQ,EAErC,IAAM0B,EAAY/B,EAAYK,GAC1B0B,IAAcJ,EAAMC,KAAKG,IAC3BpC,EAAOgC,EAAOI,EAAWD,GAG3B,IAAM1B,EAAeH,EAAqBI,GAC1C,GAAIyB,GAAY1B,EAAc,CAC5B,IAAM4B,EAAkBL,EAAMM,WAAW7B,GACvCuB,EAAMM,WAAW7B,IAAiB,IACN4B,EAAeF,GAC3CE,EAAeF,IAAa,IACTzB,IAAO,IAInBT,EAAsB,SAAS+B,EAAcO,GAGxD,IAFA,IAAIC,EAAUD,IAED,CAEX,KADAA,EAAWlC,EAAYkC,IAErB,OAAO,EAGT,GAAIP,EAAMC,KAAK,IAAMM,GAEnB,OADAP,EAAMC,KAAKO,IAAW,GACf,IAKAtC,EAAW,SACtB8B,EACAtB,EACAyB,GAEA,IADAM,IACAtD,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,KAAAA,UAAA,GACA,GAAIsD,GAAiBT,EAAMC,KAAK,KAC9B,OAAO,EAGT,IAAI/B,EAAW8B,EAAMC,KAAKvB,GAC1B,GAAgB,MAAZyB,EAAkB,CACpB,IAAM1B,EAAeH,EAAqBI,GAC1C,GAAID,EAAc,CAChB,IAAM4B,EAAiBL,EAAMM,WAAW7B,GAClCiC,EAAuBL,GAAkBA,EAAeF,GAC9DjC,EAAWwC,GAAwBA,EAAqBhC,IAI5D,IAAMiC,GACHzC,GAAauC,GAAiBxC,EAAoB+B,EAAOtB,GAE5D,SAAUR,IAAYyC,IAGXxC,EAAc,WACzB,MAAO,CACL+B,SAAS,EACTD,KAAM,GACNK,WAAY,uJCjHHM,EAAb,oBAAAA,IAAAC,IAAAC,KAAAF,GAAA,OAAAG,IAAAH,EAAA,EAAA/E,IAAA,YAAAN,MAAA,SAAA8D,GAOK,IALD2B,EAKC3B,EALD2B,OAMA,OAAOC,EADN5B,EAJD4B,UAKgBD,OARpBJ,EAAA,GAYsBM,EAAtB,WAIE,SAAAA,EAAAC,GAIG,IAHDC,EAGCD,EAHDC,iBAGCP,IAAAC,KAAAI,GAAAG,IAAAP,KAAA,4BACDA,KAAKQ,kBAAoBF,EAT7B,OAAAL,IAAAG,EAAA,EAAArF,IAAA,YAAAN,MAAA,SAYYgG,GACR,OAAOT,KAAKQ,kBAAkBE,UAAUD,OAb5CL,EAAA,oBCfA,IAAAO,EAAcrH,EAAQ,IAEtBsH,EAA4BtH,EAAQ,IAUpCL,EAAAD,QARA,SAAA6H,EAAAlH,GACA,OAAAA,GAAA,WAAAgH,EAAAhH,IAAA,mBAAAA,EAIAiH,EAAAC,GAHAlH,kBCNA,SAAAmH,EAAA7G,GAIA,OAHAhB,EAAAD,QAAA8H,EAAA5G,OAAA6G,eAAA7G,OAAA8G,eAAA,SAAA/G,GACA,OAAAA,EAAAgH,WAAA/G,OAAA8G,eAAA/G,IAEA6G,EAAA7G,GAGAhB,EAAAD,QAAA8H,mBCPA,IAAAC,EAAqBzH,EAAQ,IAiB7BL,EAAAD,QAfA,SAAAkI,EAAAC,GACA,sBAAAA,GAAA,OAAAA,EACA,UAAAtF,UAAA,sDAGAqF,EAAA9F,UAAAlB,OAAAY,OAAAqG,KAAA/F,UAAA,CACAgG,YAAA,CACA3G,MAAAyG,EACAxF,UAAA,EACAD,cAAA,KAGA0F,GAAAJ,EAAAG,EAAAC,4GCKaE,EAAY,SAASC,GAChC,YAAwCtD,IAAlBsD,EAASC,MAOpBC,EAAa,SAAShG,GACjC,SAAUA,GAAOA,EAAI4F,aAAe5F,EAAI7B,MAAQ6B,EAAIiG,iKCxBzCC,EAAb,oBAAAA,IAAA3B,IAAAC,KAAA0B,GAAA,OAAAzB,IAAAyB,EAAA,EAAA3G,IAAA,UAAAN,MAAA,SAAA8D,GAMqB,IAJjB2B,EAIiB3B,EAJjB2B,OACAyB,EAGiBpD,EAHjBoD,gBACAC,EAEiBrD,EAFjBqD,aACAC,EACiBtD,EADjBsD,UAEM3C,EAAQ7B,cAUd,OATA6C,EAAOhB,MAAQA,EAEf0C,EAAa1B,GAEb2B,EAAU3B,GACNA,EAAOhB,MAAME,SACfuC,IAGKzB,MAjBXwB,EAAA,GAqBsBI,EAAtB,WAIE,SAAAA,EAAAzB,GAA6E,IAA/D0B,EAA+D1B,EAA/D0B,eAA+DhC,IAAAC,KAAA8B,GAAAvB,IAAAP,KAAA,0BAC3EA,KAAKgC,gBAAkBD,EAL3B,OAAA9B,IAAA6B,EAAA,EAAA/G,IAAA,UAAAN,MAAA,SAQUgG,GACN,OAAOT,KAAKgC,gBAAgBC,QAAQxB,OATxCqB,EAAA,iCCzBAxI,EAAAgB,EAAAyC,GAAA,IAAAmF,EAAA5I,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,gCAAAmF,EAAA,IAAA5I,EAAAQ,EAAAiD,EAAA,0BAAAmF,EAAA,QAAAC,EAAA7I,EAAA,YAAA8I,KAAAD,EAAA,4NAAAE,QAAAD,GAAA,YAAArH,GAAAzB,EAAAQ,EAAAiD,EAAAhC,EAAA,kBAAAoH,EAAApH,KAAA,CAAAqH,GAAA,IAAAE,EAAAhJ,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,6BAAAuF,EAAA,QAAAC,EAAAjJ,EAAA,YAAA8I,KAAAG,EAAA,4NAAAF,QAAAD,GAAA,YAAArH,GAAAzB,EAAAQ,EAAAiD,EAAAhC,EAAA,kBAAAwH,EAAAxH,KAAA,CAAAqH,GAAA,IAAAI,EAAAlJ,EAAA,GAAAA,EAAAQ,EAAAiD,EAAA,8BAAAyF,EAAA,IAAAlJ,EAAAQ,EAAAiD,EAAA,2BAAAyF,EAAA,IAAAlJ,EAAAQ,EAAAiD,EAAA,gCAAAyF,EAAA,IAAAlJ,EAAAQ,EAAAiD,EAAA,gCAAAyF,EAAA,IAAAlJ,EAAAQ,EAAAiD,EAAA,6BAAAyF,EAAA,IAAAlJ,EAAAQ,EAAAiD,EAAA,wCAAAyF,EAAA,QAAAC,EAAAnJ,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,oCAAA0F,EAAA,IAAAnJ,EAAAQ,EAAAiD,EAAA,gCAAA0F,EAAA,QAAAC,EAAApJ,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,mCAAA2F,EAAA,IAAApJ,EAAAQ,EAAAiD,EAAA,2CAAA2F,EAAA,QAAAC,EAAArJ,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,0CAAA4F,EAAA,IAAArJ,EAAAQ,EAAAiD,EAAA,6BAAA4F,EAAA,IAAArJ,EAAAQ,EAAAiD,EAAA,+BAAA4F,EAAA,IAAArJ,EAAAQ,EAAAiD,EAAA,+BAAA4F,EAAA,QAAAC,EAAAtJ,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,iCAAA6F,EAAA,QAAAC,EAAAvJ,EAAA,YAAA8I,KAAAS,EAAA,qRAAAR,QAAAD,GAAA,YAAArH,GAAAzB,EAAAQ,EAAAiD,EAAAhC,EAAA,kBAAA8H,EAAA9H,KAAA,CAAAqH,GAAA,IAAAU,EAAAxJ,EAAA,GAAAA,EAAAQ,EAAAiD,EAAA,qCAAA+F,EAAA,IAAAxJ,EAAAQ,EAAAiD,EAAA,sDAAA+F,EAAA,QAAAC,EAAAzJ,EAAA,YAAA8I,KAAAW,EAAA,4UAAAV,QAAAD,GAAA,YAAArH,GAAAzB,EAAAQ,EAAAiD,EAAAhC,EAAA,kBAAAgI,EAAAhI,KAAA,CAAAqH,GAAA,IAAAY,EAAA1J,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,sCAAAiG,EAAA,IAAA1J,EAAAQ,EAAAiD,EAAA,gCAAAiG,EAAA,IAAA1J,EAAAQ,EAAAiD,EAAA,mDAAAiG,EAAA,QAAAC,EAAA3J,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,qDAAAkG,EAAA,QAAAC,EAAA5J,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,8BAAAmG,EAAA,IAAA5J,EAAAQ,EAAAiD,EAAA,mDAAAmG,EAAA,QAAAC,EAAA7J,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,mCAAAoG,EAAA,IAAA7J,EAAAQ,EAAAiD,EAAA,oDAAAoG,EAAA,QAAAC,EAAA9J,EAAA,YAAA8I,KAAAgB,EAAA,khBAAAf,QAAAD,GAAA,YAAArH,GAAAzB,EAAAQ,EAAAiD,EAAAhC,EAAA,kBAAAqI,EAAArI,KAAA,CAAAqH,GAAA,IAAAiB,EAAA/J,EAAA,IAAAA,EAAAQ,EAAAiD,EAAA,iDAAAsG,EAAA,8LCsBaC,EAAW,SACtBpD,EACAqD,EACA9I,GAMA,OAJAyF,EAAOsD,KAAKF,SAAWpD,EAAOsD,KAAKF,UAAY,GAE3CpD,EAAOsD,KAAP,KAAgBtD,EAAOsD,KAAKF,SAASC,GAAM9I,GAExCyF,EAAOsD,KAAKF,SAASC,IAGxBE,EAAmB,SAASvD,EAAwBzF,GACxDyF,EAAOsD,KAAOtD,EAAOsD,MAAQ,GAC7BtD,EAAOsD,KAAKE,cAAgBjJ,GAMjBkJ,EAAa,SAASJ,GACjC,OAAO,SAAAK,GACL,IAAI1D,EAAyB,CAC3B2D,KANuB,UAMMN,GAE/BK,EAAS1D,GACLA,EAAOsD,MAAQtD,EAAOsD,KAAKE,gBAC7BE,EAAS,CACPC,KAAM3D,EAAOsD,KAAKE,cAAcG,KAChCC,QAAS5D,EAAOsD,KAAKE,cAAcI,QACnCN,KAAMtD,EAAOsD,KAAKE,cAAcF,cAE3BtD,EAAOsD,KAAKE,iBAKZK,EAAa,SAASR,GACjC,OAAO,SAAAK,GACL,IAAI1D,EAAyB,CAC3B2D,KAtBuB,UAsBMN,GAE/BK,EAAS1D,GACLA,EAAOsD,MAAQtD,EAAOsD,KAAKE,gBAC7BE,EAAS1D,EAAOsD,KAAKE,sBACdxD,EAAOsD,KAAKE,iBAUZM,EAAwB,SAAAzF,GAYlC,IAXDgF,EAWChF,EAXDgF,GAWCU,EAAA1F,EAVDY,YAUC,IAAA8E,EAVM,GAUNA,EATDC,EASC3F,EATD2F,aA6FA,OAnF+C,SAC7CC,GAGA,IAFAC,EAEA/H,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,GAAAA,UAAA,GAFQ,CAAEgI,KAAM,GAAIC,OAAQ,IAC5B1G,EACAvB,UAAAJ,OAAA,EAAAI,UAAA,QAAA2B,EACA,GAAImG,EAAIjE,OAAO2D,OAxDU,UAwDsBN,EAAI,CAGjD,GAA0B,IAAtBa,EAAMC,KAAKpI,OACb,OAAOmI,EAGT,IAAMlE,EAASkE,EAAMC,KAAKE,MAG1B,GAFAJ,EAAIK,KAAKC,SAAS7G,EAAKuB,EAAK0B,KAAM1B,EAAKkF,QAElCnE,EAEH,OADAwE,QAAQC,IAAI,yBACLP,EAGTX,EAAiBU,EAAIjE,OAAQ,CAC3B2D,KAAM3D,EAAO2D,KACbC,QAAS5D,EAAO4D,QAChBN,KAAMoB,IAAA,GAAK1E,EAAOsD,KAAd,CAAoBqB,IAAI,EAAOC,MAAM,EAAOC,MAAM,MAGxDX,EAAME,OAAOE,KAAK,CAChBX,KAAM3D,EAAO2D,KACbC,QAAS5D,EAAO4D,QAChBN,KAAMtD,EAAOsD,OAEfW,EAAIK,KAAKC,SAAS7G,EAAKuB,EAAK0B,KAAM1B,EAAKmF,cAClC,GAAIH,EAAIjE,OAAO2D,OAlFG,UAkF6BN,EAAI,CAGxD,GAA4B,IAAxBa,EAAME,OAAOrI,OACf,OAAOmI,EAGT,IAAMlE,EAASkE,EAAME,OAAOC,MAG5B,GAFAJ,EAAIK,KAAKC,SAAS7G,EAAKuB,EAAK0B,KAAM1B,EAAKmF,UAElCpE,EACH,OAAOkE,EAGTX,EAAiBU,EAAIjE,OAAQ,CAC3B2D,KAAM3D,EAAO2D,KACbC,QAAS5D,EAAO4D,QAChBN,KAAMoB,IAAA,GAAK1E,EAAOsD,KAAd,CAAoBqB,IAAI,EAAMC,MAAM,EAAMC,MAAM,MAGtDX,EAAMC,KAAKG,KAAKtE,GAChBiE,EAAIK,KAAKC,SAAS7G,EAAKuB,EAAK0B,KAAM1B,EAAKkF,WAClC,CAGL,GAAIF,EAAIjE,OAAO2D,MAAQmB,IAAYC,KACjC,OAAOb,EAGT,GAAID,EAAIjE,OAAOsD,KAAKuB,MAAQZ,EAAIjE,OAAOsD,KAAKsB,KAC1C,OAAOV,EAGT,GAAIF,IAAiBA,EAAaC,EAAIjE,QACpC,OAAOkE,EAGTA,EAAME,OAAS,GACfH,EAAIK,KAAKC,SAAS7G,EAAKuB,EAAK0B,KAAM1B,EAAKmF,SAEvCF,EAAMC,KAAKG,KAAK,CACdX,KAAMM,EAAIjE,OAAO2D,KACjBC,QAASK,EAAIjE,OAAO4D,QACpBN,KAAMW,EAAIjE,OAAOsD,OAEnBW,EAAIK,KAAKC,SAAS7G,EAAKuB,EAAK0B,KAAM1B,EAAKkF,OAGzC,OAAOD,kCCxKX9K,EAAAQ,EAAAiD,EAAA,sBAAAmI,IAAA5L,EAAAQ,EAAAiD,EAAA,sBAAAoI,IAAO,IAAMD,EAAW,SAAShF,GAC/B,OAAOA,QAAuClC,IAAjBkC,EAAQ2D,MAG1BsB,EAAqB,SAChCjF,GAKA,OAHKA,EAAOsD,OAAMtD,EAAOsD,KAAO,IAC3BtD,EAAOsD,KAAKuB,MAAS7E,EAAOsD,KAAKsB,OAAM5E,EAAOsD,KAAP,IAAiB,GAEtDtD,2LCIE8E,EAAc,CACvBC,KAAM,UAGKG,EAAb,WAUE,SAAAA,EAAA7G,GAYG,IAAA8G,EAAArF,KAXDsF,EAWC/G,EAXD+G,QACAlB,EAUC7F,EAVD6F,MAUCmB,EAAAhH,EATD+B,wBASC,IAAAiF,EATkB,IAAIzF,IAStByF,EAAAC,EAAAjH,EARDwD,sBAQC,IAAAyD,EARgB,IAAI9D,IAQpB8D,EAAAC,EAAAlH,EAPDmH,oBAOC,IAAAD,EAPc,IAAIE,IAOlBF,EAAAG,IAAA5F,KAAAoF,GAAAS,IAAA7F,KAAA,sBAAA6F,IAAA7F,KAAA,SApBW,MAoBX6F,IAAA7F,KAAA,kBAAA6F,IAAA7F,KAAA,yBAAA6F,IAAA7F,KAAA,mBAAA6F,IAAA7F,KAAA,4BAAA6F,IAAA7F,KAAA,0BAAA6F,IAAA7F,KAAA,wBAAA6F,IAAA7F,KAAA,WAmBQ,WACT,OAAOqF,EAAKS,SApBXD,IAAA7F,KAAA,WA6DQ,SAAA+F,GACT,OAAOV,EAAK7E,kBAAkBE,UAAU,CACtCR,OAAQ6F,EACR5F,SAAUkF,EAAKW,4BACfC,MAAOZ,MAjERQ,IAAA7F,KAAA,mBAqEgB,WACjBqF,EAAKa,cAAcvE,gBAAgB0D,KAtElCQ,IAAA7F,KAAA,8BAyEyD,SAAAE,GAC1D,IAAKgF,YAAShF,GAAS,CACrB,GAAIA,EACF,MAAM,IAAIiG,MAAM,6BAGlB,OAAOjG,EAGT,OAAOmF,EAAKrD,gBAAgBC,QAAQ,CAClC/B,OAAQiF,YAAmBjF,GAC3B+F,MAAOZ,EACPxD,UAAWwD,EAAKe,WAChBzE,gBAAiB0D,EAAKgB,iBACtBzE,aAAcyD,EAAKiB,kBAvFpBT,IAAA7F,KAAA,gBA2Fa,SAACE,GAMf,GALIA,EAAO2D,OAASmB,EAAYC,OAC9BI,EAAKS,OAAS5F,EAAO4D,QACrB7G,YAAYiD,EAAOhB,QAGjBmG,EAAKkB,YACP,MAAM,IAAIJ,MAAM,iCAGlBd,EAAKkB,aAAc,EAEnB,IACElB,EAAKS,OAAST,EAAKmB,SAAStG,EAAQmF,EAAKS,QACzC,MAAOxH,GACPoG,QAAQ+B,MAAMnI,GAGhB+G,EAAKkB,aAAc,IA7GlBV,IAAA7F,KAAA,aAqHU,SAACE,GACZmF,EAAKqB,QAAUxG,IArHfF,KAAKgC,gBAAkBD,EACvB/B,KAAKQ,kBAAoBF,EACzBN,KAAKkG,cAAgBR,EAErB1F,KAAKuG,aAAc,EACnBvG,KAAK8F,OAAS1B,EACdpE,KAAKwG,SAAWlB,EAGhBtF,KAAK4D,SAAS,CACZC,KAAMmB,EAAYC,KAClBnB,QAASM,IAlCf,OAAAuC,IAAAvB,EAAA,EAAArK,IAAA,YAAAN,MAAA,WAiDI,OAAOuF,KAAK0G,UAjDhB,CAAA3L,IAAA,YAAAN,MAAA,SAoDYmM,GAA4C,IAAlBC,EAAkBxK,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,IAAAA,UAAA,GACpD,OAAO2D,KAAKkG,cAAcY,UAAUF,EAAUC,KArDlD,CAAA9L,IAAA,sBAAAN,MAAA,WAyDI,OAAOuF,KAAKQ,oBAzDhB,CAAAzF,IAAA,sBAAAN,MAAA,SA4DsB6F,GAClBN,KAAKQ,kBAAoBF,IA7D7B,CAAAvF,IAAA,oBAAAN,MAAA,WAiEI,OAAOuF,KAAKgC,kBAjEhB,CAAAjH,IAAA,oBAAAN,MAAA,SAoEoBsH,GAChB/B,KAAKgC,gBAAkBD,IArE3B,CAAAhH,IAAA,kBAAAN,MAAA,WAyEI,OAAOuF,KAAKkG,gBAzEhB,CAAAnL,IAAA,kBAAAN,MAAA,SA4EkBiL,GACd1F,KAAKkG,cAAgBR,MA7EzBN,EAAA,qHCbaO,EAAb,WAME,SAAAA,IAAcC,IAAA5F,KAAA2F,GAAAE,IAAA7F,KAAA,4BAAA6F,IAAA7F,KAAA,yBAAA6F,IAAA7F,KAAA,+BAAA6F,IAAA7F,KAAA,sBAFO,GAGnBA,KAAK+G,kBAAoB,GAEzB/G,KAAKgH,eAAiBhH,KAAK+G,kBAT/B,OAAAJ,IAAAhB,EAAA,EAAA5K,IAAA,yBAAAN,MAAA,WAgBQuF,KAAK+G,oBAAsB/G,KAAKgH,iBAClChH,KAAKgH,eAAiBhH,KAAK+G,kBAAkBE,WAjBnD,CAAAlM,IAAA,YAAAN,MAAA,SA+BYmM,GAAyC,IAAlBC,EAAkBxK,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,IAAAA,UAAA,GACjD2D,KAAKkH,yBACL,IAAIC,GAAe,EAOnB,OANAnH,KAAKgH,eAAexC,KAAKoC,GAErBC,GAAY7G,KAAKoH,oBACnBR,EAAS5G,KAAKqH,sBAGT,WACL,GAAIF,EAAc,CAChBA,GAAe,EACfnH,KAAKkH,yBACL,IAAII,EAAQtH,KAAKgH,eAAe3E,QAAQuE,GACxC5G,KAAKgH,eAAeO,OAAOD,EAAO,OA7C1C,CAAAvM,IAAA,kBAAAN,MAAA,SAsDkB+M,GACdxH,KAAKoH,oBAAqB,EAC1BpH,KAAKqH,qBAAuBG,EAC5BxH,KAAK+G,kBAAoB/G,KAAKgH,eAHI,IAAAnJ,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAIlC,QAAAC,EAAAC,EAAqB8B,KAAK+G,kBAA1BxM,OAAA4D,cAAAN,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,EAA6C,EAC3C+I,EAD2C3I,EAAAxD,OAClC+M,IALuB,MAAAlJ,GAAAR,GAAA,EAAAC,EAAAO,EAAA,YAAAT,GAAA,MAAAK,EAAA,QAAAA,EAAA,oBAAAJ,EAAA,MAAAC,QAtDtC4H,EAAA,sHCDa8B,EAAc,SAA4BC,GACrD,OAAOA,GAWIC,EAAkB,SAE7BC,GACA,IAAMC,EAAe3N,OAAO4N,QAAQF,GAcpC,OAbgB,SACd1H,GAKA,IAHoC,IADpCkE,EACoC/H,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,GAAAA,UAAA,GADiB,GAEjD0L,EAAc,GAElBC,EAAA,EAAAC,EAAkCJ,EAAlCG,EAAAC,EAAAhM,OAAA+L,IAAgD,KAAAE,EAAAC,IAAAF,EAAAD,GAAA,GAApCI,EAAoCF,EAAA,GAA1B5C,EAA0B4C,EAAA,GAC9CH,EAAOK,GAAY9C,EAAQpF,EAAQkE,EAAMgE,IAG3C,OAAOL,mBChCX,SAAAM,EAAA7M,GAA6U,OAA1O6M,EAA3E,mBAAA9N,QAAA,iBAAAA,OAAA4D,SAA2E,SAAA3C,GAAoC,cAAAA,GAA+B,SAAAA,GAAoC,OAAAA,GAAA,mBAAAjB,QAAAiB,EAAA4F,cAAA7G,QAAAiB,IAAAjB,OAAAa,UAAA,gBAAAI,IAAmIA,GAE7U,SAAAmF,EAAAnF,GAWA,MAVA,mBAAAjB,QAAA,WAAA8N,EAAA9N,OAAA4D,UACAlF,EAAAD,QAAA2H,EAAA,SAAAnF,GACA,OAAA6M,EAAA7M,IAGAvC,EAAAD,QAAA2H,EAAA,SAAAnF,GACA,OAAAA,GAAA,mBAAAjB,QAAAiB,EAAA4F,cAAA7G,QAAAiB,IAAAjB,OAAAa,UAAA,SAAAiN,EAAA7M,IAIAmF,EAAAnF,GAGAvC,EAAAD,QAAA2H,iBCRA1H,EAAAD,QARA,SAAA6H,GACA,YAAAA,EACA,UAAAyH,eAAA,6DAGA,OAAAzH,qJCgBa0H,EAAiB,SAC5BC,GAEA,IAGIC,EAJJC,EACArM,UAAAJ,OAAA,QAAA+B,IAAA3B,UAAA,IAAAA,UAAA,GAIIsM,EAA4B,KAEhC,OAAO,SAASlI,EAA2BP,GAEzC,GAAIwI,GAAQC,IAAezI,EAGzB,OAFAuI,EAAa7D,IAAA,GAAK6D,EAAR,CAAoBG,SAAS,IAKzC,IAAMC,IAAsBJ,GAAU7D,IAAA,GAC7B6D,EAD6B,CACjBG,SAAS,IAG1BE,EAAkBN,EAAW/H,EAASP,EAAQ2I,GAUlD,OAT0B,MAAtBC,EAAWF,UACbE,EAAWF,SAAU,GAInBF,IACFC,EAAazI,GAFfuI,EAAaK,IAkBJC,EAAyB,SACpCC,GAEA,IAAIJ,GAAU,EACVnO,EAAaP,OAAOsC,KAAKwM,GAAiBC,OAC5C,SAACC,EAAqBnO,GACpB,IAAIoO,EAAiBH,EAAgBjO,GAOrC,OALAmO,EAAYnO,GAAOoO,EAAe1O,MAC9B0O,EAAeP,UACjBA,GAAU,GAGLM,GAET,IAGF,MAAO,CAAEN,UAASnO,0QC9EP2O,EAAoB,UAEpBC,EAAc,SAASnJ,GAClC,IAAIoJ,EAAQ,SAAS1F,EAAU2F,GAC7B,OAAOrJ,EAAO0D,EAAU2F,IAM1B,OAFAD,EAAK,SAAc,EAEZA,GAGLE,EAAW,EACFC,EAAb,SAAAC,GAAA,SAAAD,IAAA,OAAA7D,IAAA5F,KAAAyJ,GAAAE,IAAA3J,KAAA4J,IAAAH,GAAAhI,MAAAzB,KAAA3D,YAAA,OAAAwN,IAAAJ,EAAAC,GAAA/C,IAAA8C,EAAA,EAAA1O,IAAA,YAAAN,MAAA,SACYgG,GAA2B,IAC3BN,EAA4BM,EAA5BN,SAAUD,EAAkBO,EAAlBP,OAAQ+F,EAAUxF,EAAVwF,MAE1B,IAAKzE,YAAWtB,KAAYA,EAAO4J,QACjC,OAAO9J,KAAKQ,kBAAkBE,UAAUD,GAG1C,IAAIsJ,EAAUP,IAEVH,EAAgC,CAClCxF,KAAMuF,EACNtF,QAAS,GACTN,KAAM,CAAE8F,OAAO,EAAMS,UAASC,UAAU,IAGpCC,EAA0B,SAAS/J,GAOvC,OANCmJ,EAAYvF,QAAwBU,KAAKtE,GAC1CA,EAAOsD,KAAOtD,EAAOsD,MAAQ,GAC7BtD,EAAOsD,KAAKuG,QAAUA,EACtB7J,EAAOsD,KAAK0G,WAAY,EACxB/J,EAASD,GAEFA,GAUL6H,EAAS7H,EARI,SAASA,GACxB+F,EAAMkE,sBAAsBzJ,UAAU,CACpCR,SACA+F,QACA9F,SAAU8J,KAIgBhE,EAAMsD,UACpC,OAAIlI,YAAU0G,GACLA,EAAOxG,KAAK,WACjB,OAAOpB,EAASkJ,KAIblJ,EAASkJ,OAxCpBI,EAAA,CAAoDrJ,8KChBvCgK,EAAb,SAAAV,GAAA,SAAAU,IAAA,OAAArK,IAAAC,KAAAoK,GAAAC,IAAArK,KAAAsK,IAAAF,GAAA3I,MAAAzB,KAAA3D,YAAA,OAAAkO,IAAAH,EAAAV,GAAAzJ,IAAAmK,EAAA,EAAArP,IAAA,YAAAN,MAAA,SACYgG,GAAS,IACTP,EAAkBO,EAAlBP,OAAQ+F,EAAUxF,EAAVwF,MAEhB,OAAK5E,YAAUnB,GAIRA,EAAOqB,KAAK,SAAArB,GACjB,OAAO+F,EAAMkE,sBAAsBzJ,UAA5BkE,IAAA,GAA2CnE,EAA3C,CAAoDP,cAJpDF,KAAKQ,kBAAkBE,UAAUD,OAL9C2J,EAAA,MAAsDhK,mNCCzCoK,EAAY,SAAwBC,GAAxB,OAAqCA,GAEjDC,EAAb,SAAAhB,GAAA,SAAAgB,IAAA,OAAA3K,IAAAC,KAAA0K,GAAAL,IAAArK,KAAAsK,IAAAI,GAAAjJ,MAAAzB,KAAA3D,YAAA,OAAAkO,IAAAG,EAAAhB,GAAAzJ,IAAAyK,EAAA,EAAA3P,IAAA,YAAAN,MAAA,SACYgG,GAAS,IACTP,EAAkBO,EAAlBP,OAAQ+F,EAAUxF,EAAVwF,MAEhB,IAAKzE,YAAWtB,GACd,OAAOF,KAAKQ,kBAAkBE,UAAUD,GAG1C,IAAMH,EAAmB2F,EAAMkE,sBAQ/B,OAAOjK,EAPU,SAASA,GACxB,OAAOI,EAAiBI,UAAjBkE,IAAA,GACFnE,EADE,CAELP,aAIoB+F,EAAMsD,cAhBlCmB,EAAA,CAAoDtK,yPCDvCuK,EAAb,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAAxF,EAAAyF,IAAA9K,KAAA2K,GAAA,QAAAI,EAAA1O,UAAAJ,OAAA+O,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAA7O,UAAA6O,GAAA,OAAA7F,EAAA8F,IAAAnL,MAAA6K,EAAAO,IAAAT,IAAAhR,KAAA8H,MAAAoJ,EAAA,CAAA7K,MAAAtD,OAAAsO,KAAAK,IAAAC,IAAAjG,GAAA,kBACoB,IADpBA,EAAA,OAAAkG,IAAAZ,EAAAC,GAAAY,IAAAb,EAAA,EAAA5P,IAAA,UAAAN,MAAA,SAGUgG,GAAyB,IACvBP,EAA2CO,EAA3CP,OAAQ+F,EAAmCxF,EAAnCwF,MAAOpE,EAA4BpB,EAA5BoB,UAAWD,EAAiBnB,EAAjBmB,aAGlC,GAAI1B,EAAOsD,KAAK0G,UAAW,CACzB,IAAMhL,EAASc,KAAKyL,gBAAgBvL,EAAOsD,KAAKuG,SAC9C/J,KAAKyL,gBAAgBvL,EAAOsD,KAAKuG,UAAY1M,wBAQ/C,OAPA6C,EAAOhB,MAAQA,SAERgB,EAAOsD,KAAK0G,iBACZhK,EAAOsD,KAAKuG,QAEnBnI,EAAa1B,GAENA,EAGT,GAAIA,EAAO2D,OAASuF,oBAAmB,CAErC,GAAKlJ,EAAOsD,KAAKwG,SAoCV,CACL,IAAM9K,EAASc,KAAKyL,gBAAgBvL,EAAOsD,KAAKuG,SAC9C/J,KAAKyL,gBAAgBvL,EAAOsD,KAAKuG,UAAY1M,wBAa/C,OAVA6C,EAAOhB,MAAQA,SACRgB,EAAOsD,KAAKwG,gBACZhK,KAAKyL,gBAAgBvL,EAAOsD,KAAKuG,gBACjC7J,EAAOsD,KAAKuG,QAEnBlI,EAAU3B,GACNhB,EAAME,SACR6G,EAAMI,mBAGDnG,EAlDP,IAAMhB,EAAQ7B,wBAEVqO,EAAuBC,IAAIzL,EAAO4D,SAClC5D,EAAOsD,KAAKuB,MACd2G,EAAWE,UALY,IAAA/N,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IAQzB,QAAAC,EAAAC,EAA4BwN,EAA5BnR,OAAA4D,cAAAN,GAAAI,EAAAC,EAAAE,QAAAC,MAAAR,GAAA,EAAwC,KAA7BgO,EAA6B5N,EAAAxD,MAChCqR,EAAqBlH,IAAA,GACtBiH,EADmB,CAEtBrI,KAAMoB,IAAA,GACDiH,EAAcrI,QAKjBtD,EAAOsD,KAAKuB,OACd+G,EAAmBtI,KAAnB,IAA8BsI,EAAmBtI,KAAnB,GAC9BsI,EAAmBtI,KAAKuB,MAAQ+G,EAAmBtI,KAAKuB,MAEtD7E,EAAOsD,KAAKsB,MAAQgH,EAAmBtI,KAAnB,KACtBsI,EAAmBtI,KAAKsB,MAAO,GAGjCgH,EAAmB5M,MAAQA,EAE3B0C,EAAa1B,IA3BU,MAAA5B,GAAAR,GAAA,EAAAC,EAAAO,EAAA,YAAAT,GAAA,MAAAK,EAAA,QAAAA,EAAA,oBAAAJ,EAAA,MAAAC,GAmCzB,OALA8D,EAAU3B,GACNhB,EAAME,SACR6G,EAAMI,mBAGDnG,EAoBX,OAAOF,KAAKgC,gBAAgBC,QAAQxB,OA7ExCkK,EAAA,CAAkD7I,sBCLlD,IAAAiK,EAAqBzS,EAAQ,IAE7B0S,EAA2B1S,EAAQ,IAEnC2S,EAAsB3S,EAAQ,IAM9BL,EAAAD,QAJA,SAAAkT,EAAA1S,GACA,OAAAuS,EAAAG,IAAAF,EAAAE,EAAA1S,IAAAyS,sBCPA,IAAAE,EAAwB7S,EAAQ,IAEhC8S,EAAsB9S,EAAQ,IAE9B+S,EAAwB/S,EAAQ,IAMhCL,EAAAD,QAJA,SAAAkT,GACA,OAAAC,EAAAD,IAAAE,EAAAF,IAAAG,oBCHApT,EAAAD,QAJA,SAAAkT,GACA,GAAAjB,MAAAqB,QAAAJ,GAAA,OAAAA,kBCyBAjT,EAAAD,QA1BA,SAAAkT,EAAA1S,GACA,IAAA+S,EAAA,GACAC,GAAA,EACAC,GAAA,EACAC,OAAA1O,EAEA,IACA,QAAA2O,EAAA3E,EAAAkE,EAAA3R,OAAA4D,cAA6CqO,GAAAG,EAAA3E,EAAA5J,QAAAC,QAC7CkO,EAAA/H,KAAAmI,EAAAlS,QAEAjB,GAAA+S,EAAAtQ,SAAAzC,GAH4EgT,GAAA,IAKzE,MAAAlO,GACHmO,GAAA,EACAC,EAAApO,EACG,QACH,IACAkO,GAAA,MAAAxE,EAAA,QAAAA,EAAA,SACK,QACL,GAAAyE,EAAA,MAAAC,GAIA,OAAAH,kBCnBAtT,EAAAD,QAJA,WACA,UAAA6C,UAAA,wECDA,SAAA+Q,EAAA3S,EAAAqB,GAMA,OALArC,EAAAD,QAAA4T,EAAA1S,OAAA6G,gBAAA,SAAA9G,EAAAqB,GAEA,OADArB,EAAAgH,UAAA3F,EACArB,GAGA2S,EAAA3S,EAAAqB,GAGArC,EAAAD,QAAA4T,iBCCA3T,EAAAD,QAVA,SAAAkT,GACA,GAAAjB,MAAAqB,QAAAJ,GAAA,CACA,QAAA1S,EAAA,EAAAqT,EAAA,IAAA5B,MAAAiB,EAAAjQ,QAAiDzC,EAAA0S,EAAAjQ,OAAgBzC,IACjEqT,EAAArT,GAAA0S,EAAA1S,GAGA,OAAAqT,mBCFA5T,EAAAD,QAJA,SAAA8T,GACA,GAAAvS,OAAA4D,YAAAjE,OAAA4S,IAAA,uBAAA5S,OAAAkB,UAAA2R,SAAApT,KAAAmT,GAAA,OAAA7B,MAAA+B,KAAAF,mBCGA7T,EAAAD,QAJA,WACA,UAAA6C,UAAA","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"alo\"] = factory();\n\telse\n\t\troot[\"alo\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var defineProperty = require(\"./defineProperty\");\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\nmodule.exports = _objectSpread;","import { Event } from \"./types\";\n\nlet idx = 0;\nlet parentByTag = {};\nlet entityContainerByTag = {};\nlet childrenByTag = {};\n\nconst registerEntityContainer = function(containerTag, tag) {\n  entityContainerByTag[tag] = containerTag;\n  if (childrenByTag[tag]) {\n    for (const child of childrenByTag[tag]) {\n      registerEntityContainer(containerTag, child);\n    }\n  }\n};\n\nexport const createTag = function({\n  name = \"\",\n  children,\n  entityContainer = false\n}: {\n  name?: string;\n  children?: string[];\n  entityContainer?: boolean;\n}) {\n  const tag = `${idx++}-${name}`;\n\n  if (children) {\n    childrenByTag[tag] = children;\n\n    for (const child of children) {\n      parentByTag[child] = tag;\n      if (entityContainer) {\n        registerEntityContainer(tag, child);\n      }\n    }\n  }\n\n  return tag;\n};\n\nexport const setWildCard = function(event, tag = \"\") {\n  event.tags[\"*\" + tag] = true;\n  event.tagsSet = true;\n};\n\nexport const setTag = function(\n  event: Event,\n  tag: string,\n  entityId?: number | string\n) {\n  event.tagsSet = true;\n\n  event.tags[tag] = event.tags[tag] || true;\n\n  const parentTag = parentByTag[tag];\n  if (parentTag && !event.tags[parentTag]) {\n    setTag(event, parentTag, entityId);\n  }\n\n  const containerTag = entityContainerByTag[tag];\n  if (entityId && containerTag) {\n    const containerEvent = (event.containers[containerTag] =\n      event.containers[containerTag] || {});\n    const containerEntityEvent = (containerEvent[entityId] =\n      containerEvent[entityId] || {});\n    containerEntityEvent[tag] = true;\n  }\n};\n\nexport const parentWildCardIsSet = function(event: Event, childTag) {\n  let origTag = childTag;\n\n  while (true) {\n    childTag = parentByTag[childTag];\n    if (!childTag) {\n      return false;\n    }\n\n    if (event.tags[\"*\" + childTag]) {\n      event.tags[origTag] = true;\n      return true;\n    }\n  }\n};\n\nexport const tagIsSet = function(\n  event: Event,\n  tag,\n  entityId?: number | string,\n  checkWildCard = true\n) {\n  if (checkWildCard && event.tags[\"*\"]) {\n    return true;\n  }\n\n  let tagIsSet = event.tags[tag];\n  if (entityId != null) {\n    const containerTag = entityContainerByTag[tag];\n    if (containerTag) {\n      const containerEvent = event.containers[containerTag];\n      const containerEntityEvent = containerEvent && containerEvent[entityId];\n      tagIsSet = containerEntityEvent && containerEntityEvent[tag];\n    }\n  }\n\n  const wildCardIsSet =\n    !tagIsSet && (checkWildCard && parentWildCardIsSet(event, tag));\n\n  return !!(tagIsSet || wildCardIsSet);\n};\n\nexport const createEvent = function(): Event {\n  return {\n    tagsSet: false,\n    tags: {},\n    containers: {}\n  };\n};\n","import { NewAction } from \"../action/types\";\nimport { ActionNormalizerInterface, NormalizeOptions } from \"./types\";\n\nexport class ActionNormalizer implements ActionNormalizerInterface {\n  normalize<T>({\n    action,\n    callBack\n  }: {\n    action: T;\n    callBack: (action: NewAction) => any;\n  }) {\n    return callBack(action as any);\n  }\n}\n\nexport abstract class AbstractActionNormalizerDecorator\n  implements ActionNormalizerInterface {\n  _actionNormalizer: ActionNormalizerInterface;\n\n  constructor({\n    actionNormalizer\n  }: {\n    actionNormalizer: ActionNormalizerInterface;\n  }) {\n    this._actionNormalizer = actionNormalizer;\n  }\n\n  normalize(options: NormalizeOptions) {\n    return this._actionNormalizer.normalize(options);\n  }\n}\n","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","// https://stackoverflow.com/a/49936686\n// https://github.com/krzkaczor/ts-essentials/blob/4bfaf215f1aae39a7be70d178b2226ebdbbcec61/lib/types.ts#L9\nexport type DeepPartial<T> = {\n  [P in keyof T]?: T[P] extends Array<infer U>\n    ? Array<DeepPartial<U>>\n    : T[P] extends ReadonlyArray<infer U>\n    ? ReadonlyArray<DeepPartial<U>>\n    : DeepPartial<T[P]>\n};\n\n// https://stackoverflow.com/a/50677584\nexport type FirstArgument<T> = T extends (arg1: infer U, ...args: any[]) => any\n  ? U\n  : any;\n\nexport var isObjectLike = function(value) {\n  return value != null && typeof value == \"object\";\n};\n\nexport const isPromise = function(promise): promise is Promise<any> {\n  return (<Promise<any>>promise).then !== undefined;\n};\n\nexport const isArray = function(arr): arr is Array<any> {\n  return (<Array<any>>arr).length !== undefined && !isFunction(arr);\n};\n\nexport const isFunction = function(obj): obj is Function {\n  return !!(obj && obj.constructor && obj.call && obj.apply);\n};\n\nexport var get = function(obj, path, create) {\n  var length = path.length;\n  for (var idx = 0; idx < length; idx++) {\n    var key = path[idx];\n    var nextObj = obj[key];\n    if (nextObj == null) {\n      if (create) {\n        nextObj = obj[key] = {};\n      } else {\n        return nextObj;\n      }\n    }\n    obj = nextObj;\n  }\n\n  return obj;\n};\n\nexport var mergeDeep = function(target, value, backup = {}) {\n  var keys = Object.keys(value);\n  for (var key of keys) {\n    if (isObjectLike(target[key]) && isObjectLike(value[key])) {\n      backup[key] = {};\n      mergeDeep(target[key], value[key], backup[key]);\n    } else {\n      backup[key] = target[key];\n      target[key] = value[key];\n    }\n  }\n\n  return {\n    backup,\n    target\n  };\n};\n\nexport var cloneDeep = function(value) {\n  if (isObjectLike(value)) {\n    if (value.length != null) {\n      value = value.map(function(item) {\n        return cloneDeep(item);\n      });\n    } else {\n      value = Object.keys(value).reduce(function(accumulator, key) {\n        accumulator[key] = cloneDeep(value[key]);\n\n        return accumulator;\n      }, {});\n      value = Object.assign({}, value);\n    }\n  }\n\n  return value;\n};\n\nexport var once = function(fn) {\n  var done = false;\n  var result;\n\n  return function() {\n    if (!done) {\n      result = fn();\n      done = true;\n    }\n\n    return result;\n  };\n};\n","import { Action } from \"../action/types\";\nimport { createEvent } from \"../event\";\nimport { ActionResolverInterface, ResolveOptions } from \"./types\";\n\nexport class ActionResolver implements ActionResolverInterface {\n  resolve({\n    action,\n    callSubscribers,\n    applyMutator,\n    setAction\n  }: ResolveOptions) {\n    const event = createEvent();\n    action.event = event;\n\n    applyMutator(action as Action);\n\n    setAction(action as Action);\n    if (action.event.tagsSet) {\n      callSubscribers();\n    }\n\n    return action;\n  }\n}\n\nexport abstract class AbstractActionResolverDecorator\n  implements ActionResolverInterface {\n  _actionResolver: ActionResolverInterface;\n\n  constructor({ actionResolver }: { actionResolver: ActionResolverInterface }) {\n    this._actionResolver = actionResolver;\n  }\n\n  resolve(options: ResolveOptions) {\n    return this._actionResolver.resolve(options);\n  }\n}\n","export * from \"../store\";\nexport * from \"../store/types\";\n\nexport { isAction } from \"../action\";\nexport * from \"../action/types\";\n\nexport {\n  createTag,\n  setTag,\n  setWildCard,\n  createEvent,\n  tagIsSet,\n  parentWildCardIsSet\n} from \"../event\";\n\nexport { combineMutators, typeMutator } from \"../mutator\";\n\n// exporting interfaces results in warnings (https://github.com/webpack/webpack/issues/7378)\n// export { createSelector, SelectFuncResult } from './v2/selector'\nexport * from \"../selector\";\n\nexport {\n  createUndoableMutator,\n  undoData,\n  undoAction,\n  redoAction\n} from \"../undoable\";\n\nexport * from \"../subscribable\";\nexport * from \"../subscribable/types\";\n\nexport * from \"../actionNormalizer\";\nexport * from \"../actionNormalizer/types\";\nexport * from \"../actionNormalizer/batchActionNormalizerDecorator\";\nexport * from \"../actionNormalizer/promiseActionNormalizerDecorator\";\nexport * from \"../actionNormalizer/thunkActionNormalizerDecorator\";\n\nexport * from \"../actionResolver\";\nexport * from \"../actionResolver/types\";\nexport * from \"../actionResolver/batchActionResolverDecorator\";\n","import { actionTypes } from \"./store\";\nimport { Action, NewAction, ActionMeta } from \"./action/types\";\nimport { Mutator } from \"./mutator\";\n\ntype ActionFilter = (action: Action) => boolean;\n\ninterface UndoableAction extends Action {\n  meta: UndoableActionMeta;\n}\n\ninterface UndoableActionMeta extends ActionMeta {\n  undoData?: {};\n}\n\ninterface UndoRedoAction extends NewAction {\n  meta?: UndoRedoActionMeta;\n}\n\ninterface UndoRedoActionMeta extends ActionMeta {\n  undoableCache?: NewAction;\n}\n\nexport const undoData = function(\n  action: UndoableAction,\n  id: string | number,\n  value: any\n) {\n  action.meta.undoData = action.meta.undoData || {};\n\n  if (action.meta.do) action.meta.undoData[id] = value;\n\n  return action.meta.undoData[id];\n};\n\nconst setUndoableCache = function(action: UndoRedoAction, value: NewAction) {\n  action.meta = action.meta || {};\n  action.meta.undoableCache = value;\n};\n\nconst undoActionTypePrefix = \"@@undo_\";\nconst redoActionTypePrefix = \"@@redo_\";\n\nexport const undoAction = function(id) {\n  return dispatch => {\n    let action: UndoRedoAction = {\n      type: undoActionTypePrefix + id\n    };\n    dispatch(action);\n    if (action.meta && action.meta.undoableCache) {\n      dispatch({\n        type: action.meta.undoableCache.type,\n        payload: action.meta.undoableCache.payload,\n        meta: action.meta.undoableCache.meta\n      });\n      delete action.meta.undoableCache;\n    }\n  };\n};\n\nexport const redoAction = function(id) {\n  return dispatch => {\n    let action: UndoRedoAction = {\n      type: redoActionTypePrefix + id\n    };\n    dispatch(action);\n    if (action.meta && action.meta.undoableCache) {\n      dispatch(action.meta.undoableCache);\n      delete action.meta.undoableCache;\n    }\n  };\n};\n\ntype UndoableMutatorState = {\n  past: NewAction[];\n  future: NewAction[];\n};\n\nexport const createUndoableMutator = function({\n  id,\n  tags = {},\n  actionFilter\n}: {\n  id: string;\n  tags?: {\n    self?: Tag;\n    past?: Tag;\n    future?: Tag;\n  };\n  actionFilter?: ActionFilter;\n}) {\n  const mutator: Mutator<UndoableMutatorState> = function(\n    ctx,\n    state = { past: [], future: [] },\n    tag\n  ) {\n    if (ctx.action.type === undoActionTypePrefix + id) {\n      // Handle undo\n\n      if (state.past.length === 0) {\n        return state;\n      }\n\n      const action = state.past.pop();\n      ctx.push(joinTags(tag, tags.self, tags.past));\n\n      if (!action) {\n        console.log(\"this actually happens\");\n        return state;\n      }\n\n      setUndoableCache(ctx.action, {\n        type: action.type,\n        payload: action.payload,\n        meta: { ...action.meta, do: false, redo: false, undo: true }\n      });\n\n      state.future.push({\n        type: action.type,\n        payload: action.payload,\n        meta: action.meta\n      });\n      ctx.push(joinTags(tag, tags.self, tags.future));\n    } else if (ctx.action.type === redoActionTypePrefix + id) {\n      // Handle redo\n\n      if (state.future.length === 0) {\n        return state;\n      }\n\n      const action = state.future.pop();\n      ctx.push(joinTags(tag, tags.self, tags.future));\n\n      if (!action) {\n        return state;\n      }\n\n      setUndoableCache(ctx.action, {\n        type: action.type,\n        payload: action.payload,\n        meta: { ...action.meta, do: true, redo: true, undo: false }\n      });\n\n      state.past.push(action);\n      ctx.push(joinTags(tag, tags.self, tags.past));\n    } else {\n      // Handle new actions\n\n      if (ctx.action.type == actionTypes.INIT) {\n        return state;\n      }\n\n      if (ctx.action.meta.undo || ctx.action.meta.redo) {\n        return state;\n      }\n\n      if (actionFilter && !actionFilter(ctx.action)) {\n        return state;\n      }\n\n      state.future = [];\n      ctx.push(joinTags(tag, tags.self, tags.future));\n\n      state.past.push({\n        type: ctx.action.type,\n        payload: ctx.action.payload,\n        meta: ctx.action.meta\n      });\n      ctx.push(joinTags(tag, tags.self, tags.past));\n    }\n\n    return state;\n  };\n\n  return mutator;\n};\n","import { NewAction, NormalizedAction, Action } from \"./types\";\n\nexport const isAction = function(action): action is NewAction {\n  return action && (<NewAction>action).type !== undefined;\n};\n\nexport const normalizeNewAction = function(\n  action: NewAction\n): NormalizedAction {\n  if (!action.meta) action.meta = {};\n  if (!action.meta.undo && !action.meta.redo) action.meta.do = true;\n\n  return action as Action;\n};\n","import { Action } from \"../action/types\";\nimport { ActionNormalizer } from \"../actionNormalizer\";\nimport {\n  ActionNormalizerInterface,\n  NormalizeOptions\n} from \"../actionNormalizer/types\";\nimport { ActionResolver } from \"../actionResolver\";\nimport { ActionResolverInterface } from \"../actionResolver/types\";\nimport { DeepPartial } from \"../util\";\nimport { isAction, normalizeNewAction } from \"../action\";\nimport { Listener, SubscribableInterface } from \"../subscribable/types\";\nimport { Mutator } from \"../mutator\";\nimport { setWildCard } from \"../event\";\nimport { StoreInterface } from \"./types\";\nimport { Subscribable } from \"../subscribable\";\n\nexport var actionTypes = {\n  INIT: \"@@init\"\n};\n\nexport class Store<T extends Mutator> implements StoreInterface {\n  _isMutating: boolean;\n  _state: any = null;\n  _action: Action;\n  _effectHandler: any;\n  _mutator: Mutator;\n  _actionNormalizer: ActionNormalizerInterface;\n  _actionResolver: ActionResolverInterface;\n  _subscribable: SubscribableInterface<Store<T>>;\n\n  constructor({\n    mutator,\n    state,\n    actionNormalizer = new ActionNormalizer(),\n    actionResolver = new ActionResolver(),\n    subscribable = new Subscribable()\n  }: {\n    mutator: T;\n    state?: DeepPartial<ReturnType<ReturnType<T>>>;\n    actionNormalizer?: ActionNormalizerInterface;\n    actionResolver?: ActionResolverInterface;\n    subscribable?: SubscribableInterface<Store<T>>;\n  }) {\n    this._actionResolver = actionResolver;\n    this._actionNormalizer = actionNormalizer;\n    this._subscribable = subscribable;\n\n    this._isMutating = false;\n    this._state = state;\n    this._mutator = mutator;\n\n    // Initial set action\n    this.dispatch({\n      type: actionTypes.INIT,\n      payload: state\n    });\n  }\n\n  /**\n   * Returns the current state\n   */\n  getState = (): ReturnType<T> => {\n    return this._state;\n  };\n\n  /**\n   * Get the last dispatched action\n   */\n  getAction(): Action {\n    return this._action;\n  }\n\n  subscribe(listener: Listener<this>, remember = false) {\n    return this._subscribable.subscribe(listener, remember);\n  }\n\n  getActionNormalizer() {\n    return this._actionNormalizer;\n  }\n\n  setActionNormalizer(actionNormalizer: ActionNormalizerInterface) {\n    this._actionNormalizer = actionNormalizer;\n  }\n\n  getActionResolver() {\n    return this._actionResolver;\n  }\n\n  setActionResolver(actionResolver: ActionResolverInterface) {\n    this._actionResolver = actionResolver;\n  }\n\n  getSubscribable() {\n    return this._subscribable;\n  }\n\n  setSubscribable(subscribable: SubscribableInterface<Store<T>>) {\n    this._subscribable = subscribable;\n  }\n\n  /**\n   * Send a message which will trigger an action\n   */\n  dispatch = unnormalizedAction => {\n    return this._actionNormalizer.normalize({\n      action: unnormalizedAction,\n      callBack: this._afterDispatchNormalization,\n      store: this\n    });\n  };\n\n  _callSubscribers = () => {\n    this._subscribable.callSubscribers(this);\n  };\n\n  _afterDispatchNormalization: NormalizeOptions[\"callBack\"] = action => {\n    if (!isAction(action)) {\n      if (action) {\n        throw new Error(\"Invalid action dispatched\");\n      }\n\n      return action;\n    }\n\n    return this._actionResolver.resolve({\n      action: normalizeNewAction(action),\n      store: this,\n      setAction: this._setAction,\n      callSubscribers: this._callSubscribers,\n      applyMutator: this._applyMutator\n    });\n  };\n\n  _applyMutator = (action: Action) => {\n    if (action.type === actionTypes.INIT) {\n      this._state = action.payload;\n      setWildCard(action.event);\n    }\n\n    if (this._isMutating) {\n      throw new Error(\"Mutations already in progress\");\n    }\n\n    this._isMutating = true;\n\n    try {\n      this._state = this._mutator(action, this._state);\n    } catch (err) {\n      console.error(err);\n    }\n\n    this._isMutating = false;\n  };\n\n  /**\n   * Override the last dispatched action\n   *\n   * @param action New action\n   */\n  _setAction = (action: Action) => {\n    this._action = action;\n  };\n}\n","import { SubscribableInterface, Listener } from \"./types\";\n\n/**\n * Implements a very basic and general subscribable:\n * a list of listeners which will be called in specific moments - moments defined by the child class\n * New listeners will not be directly called, when they are subscribed while a broadcast is happening\n */\nexport class Subscribable<T = any> implements SubscribableInterface<T> {\n  _currentListeners: Function[];\n  _nextListeners: Function[];\n  _lastListenerOptions?: T;\n  _subscribersCalled = false;\n\n  constructor() {\n    this._currentListeners = [];\n    // Will be copied shallowly from currentListeners by _separateNextListeners\n    this._nextListeners = this._currentListeners;\n  }\n\n  /**\n   * Creates a copy of currentListeners for the futureListeners (Look at subscribe for more information)\n   */\n  _separateNextListeners() {\n    if (this._currentListeners === this._nextListeners) {\n      this._nextListeners = this._currentListeners.slice();\n    }\n  }\n\n  /**\n   * Adds a function to the subscribers list.\n   *\n   * The function gets called with the store as a parameter\n   *\n   * If subscribe is called in an other listener and is therefore in a _callSubscribers call,\n   * the new listener will only be called in future _callSubscribers calls!\n   *\n   * @param {function} listener\n   */\n  subscribe(listener: Listener<T>, remember = false) {\n    this._separateNextListeners();\n    var isSubscribed = true;\n    this._nextListeners.push(listener);\n\n    if (remember && this._subscribersCalled) {\n      listener(this._lastListenerOptions as T);\n    }\n\n    return function() {\n      if (isSubscribed) {\n        isSubscribed = false;\n        this._separateNextListeners();\n        var index = this._nextListeners.indexOf(listener);\n        this._nextListeners.splice(index, 1);\n      }\n    };\n  }\n\n  /**\n   * Should be called by the child class, when a broadcast to the subscribers should occur\n   * This also sets the listeners registered in nextListeners as currentListeners\n   */\n  callSubscribers(listenerOptions: T) {\n    this._subscribersCalled = true;\n    this._lastListenerOptions = listenerOptions;\n    this._currentListeners = this._nextListeners;\n    for (var listener of this._currentListeners) {\n      listener(listenerOptions);\n    }\n  }\n}\n\n/**\n * Callback used by _callSubscribers\n * @callback listenerCallback\n * @param {Store} store\n *\n * TODO: This notation currently doesnt work with vscode https://github.com/Microsoft/TypeScript/issues/7515\n */\n","import { Action } from \"./action/types\";\n\nexport interface Mutator<T = any> {\n  (action: Action, state: T): T;\n}\n\nexport const typeMutator = function<T extends Mutator>(consumer: T) {\n  return consumer;\n};\n\ntype MutatorsObj = {\n  [propName: string]: Mutator;\n};\n\ntype MutatorsReturnObject<TMutatorsObj extends MutatorsObj> = {\n  [P in keyof TMutatorsObj]: ReturnType<TMutatorsObj[P]>\n};\n\nexport const combineMutators = function<\n  TMutatorsObj extends MutatorsObj = MutatorsObj\n>(mutators: TMutatorsObj) {\n  const mutatorPairs = Object.entries(mutators);\n  const mutator = function(\n    action: Action,\n    state: Partial<MutatorsReturnObject<TMutatorsObj>> = {}\n  ): MutatorsReturnObject<TMutatorsObj> {\n    let result: any = {};\n\n    for (const [propName, mutator] of mutatorPairs) {\n      result[propName] = mutator(action, state[propName]);\n    }\n\n    return result;\n  };\n\n  return mutator;\n};\n","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","import { Action } from \"./action/types\";\nimport { FirstArgument } from \"./util\";\n\nexport interface SelectFuncResult<T = any> {\n  changed?: boolean;\n  value: T;\n}\n\ntype Selector = (options, action: Action) => SelectFuncResult;\n\ntype SelectFunc = (\n  options: any,\n  action: Action,\n  last?: false | SelectFuncResult\n) => SelectFuncResult;\n\nexport interface SelectorResult<T extends SelectFunc> {\n  changed: boolean;\n  value: ReturnType<T>[\"value\"];\n}\n\nexport const createSelector = function<T extends SelectFunc>(\n  selectFunc: T,\n  pure = false\n) {\n  type Result = SelectorResult<T>;\n\n  let lastResult: Result;\n  let lastAction: Action | null = null;\n\n  return function(options: FirstArgument<T>, action: Action) {\n    // If a selector is pure, it will have the same result, if the current action object is the same as last one\n    if (pure && lastAction === action) {\n      lastResult = { ...lastResult, changed: false };\n\n      return lastResult;\n    }\n\n    const decoratedLastResult = lastResult\n      ? { ...lastResult, changed: false }\n      : false;\n\n    let nextResult: any = selectFunc(options, action, decoratedLastResult);\n    if (nextResult.changed == null) {\n      nextResult.changed = true;\n    }\n\n    lastResult = nextResult;\n    if (pure) {\n      lastAction = action;\n    }\n\n    return lastResult;\n  };\n};\n\ntype SelectorResultsObj = {\n  [propName: string]: SelectFuncResult;\n};\n\ntype CombinedSelectorResults<T extends SelectorResultsObj> = {\n  value: { [P in keyof T]: T[P][\"value\"] };\n  changed: boolean;\n};\n\nexport const combineSelectorResults = function<T extends SelectorResultsObj>(\n  selectorResults: T\n): CombinedSelectorResults<T> {\n  let changed = false;\n  let value: any = Object.keys(selectorResults).reduce(\n    (accumulator: object, key: string) => {\n      let selectorResult = selectorResults[key];\n\n      accumulator[key] = selectorResult.value;\n      if (selectorResult.changed) {\n        changed = true;\n      }\n\n      return accumulator;\n    },\n    {}\n  );\n\n  return { changed, value };\n};\n","import { AbstractActionNormalizerDecorator } from \".\";\nimport { NormalizedAction, NewAction } from \"../action/types\";\nimport { isFunction, isPromise } from \"../util\";\nimport { NormalizeOptions } from \"./types\";\n\nexport const BATCH_ACTION_TYPE = \"@@batch\";\n\nexport const batchAction = function(action: Function) {\n  let batch = function(dispatch, getState) {\n    return action(dispatch, getState);\n  };\n\n  // TODO: Maybe change how the batch action is recognized\n  batch[\"isBatch\"] = true;\n\n  return batch;\n};\n\nlet batchIdx = 0;\nexport class BatchActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options: NormalizeOptions) {\n    const { callBack, action, store } = options;\n\n    if (!isFunction(action) || !action.isBatch) {\n      return this._actionNormalizer.normalize(options);\n    }\n\n    let batchId = batchIdx++;\n\n    let batchAction: NormalizedAction = {\n      type: BATCH_ACTION_TYPE,\n      payload: [],\n      meta: { batch: true, batchId, newBatch: true }\n    };\n\n    const batchNormalizedCallback = function(action) {\n      (batchAction.payload as NewAction[]).push(action);\n      action.meta = action.meta || {};\n      action.meta.batchId = batchId;\n      action.meta.batchItem = true;\n      callBack(action);\n\n      return action;\n    };\n    const dispatch = function(action) {\n      store.getActionNormalizer().normalize({\n        action,\n        store,\n        callBack: batchNormalizedCallback\n      });\n    };\n\n    let result = action(dispatch, store.getState);\n    if (isPromise(result)) {\n      return result.then(() => {\n        return callBack(batchAction);\n      });\n    }\n\n    return callBack(batchAction);\n  }\n}\n","import { isPromise } from \"../util\";\nimport { AbstractActionNormalizerDecorator } from \".\";\n\nexport class PromiseActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options) {\n    const { action, store } = options;\n\n    if (!isPromise(action)) {\n      return this._actionNormalizer.normalize(options);\n    }\n\n    return action.then(action => {\n      return store.getActionNormalizer().normalize({ ...options, action });\n    });\n  }\n}\n","import { isFunction } from \"../util\";\nimport { AbstractActionNormalizerDecorator } from \".\";\nimport { ThunkAction } from \"./types\";\n\nexport const typeThunk = <T extends ThunkAction>(thunk: T) => thunk;\n\nexport class ThunkActionNormalizerDecorator extends AbstractActionNormalizerDecorator {\n  normalize(options) {\n    const { action, store } = options;\n\n    if (!isFunction(action)) {\n      return this._actionNormalizer.normalize(options);\n    }\n\n    const actionNormalizer = store.getActionNormalizer();\n    const dispatch = function(action) {\n      return actionNormalizer.normalize({\n        ...options,\n        action\n      });\n    };\n\n    return action(dispatch, store.getState);\n  }\n}\n","import { AbstractActionResolverDecorator } from \".\";\nimport { BATCH_ACTION_TYPE, createEvent } from \"../main/main\";\nimport { Action } from \"../action/types\";\nimport { ResolveOptions } from \"./types\";\n\nexport class BatchActionResolverDecorator extends AbstractActionResolverDecorator {\n  _eventByBatchId = {};\n\n  resolve(options: ResolveOptions) {\n    const { action, store, setAction, applyMutator } = options;\n\n    // We collect all pushResults of the batch items\n    if (action.meta.batchItem) {\n      const event = (this._eventByBatchId[action.meta.batchId] =\n        this._eventByBatchId[action.meta.batchId] || createEvent());\n      action.event = event;\n\n      delete action.meta.batchItem;\n      delete action.meta.batchId;\n\n      applyMutator(action as Action);\n\n      return action;\n    }\n\n    if (action.type === BATCH_ACTION_TYPE) {\n      // Batch action which already, originally was dispatched and yet to be dispatched again in array form\n      if (!action.meta.newBatch) {\n        const event = createEvent();\n\n        let batchItems: Action[] = [...action.payload];\n        if (action.meta.undo) {\n          batchItems.reverse();\n        }\n\n        for (const batchedAction of batchItems) {\n          const newBatchActionItem = {\n            ...batchedAction,\n            meta: {\n              ...batchedAction.meta\n            }\n          };\n\n          // Apply do/undo/redo signals from the batch action to its item\n          if (action.meta.undo) {\n            newBatchActionItem.meta.do = !newBatchActionItem.meta.do;\n            newBatchActionItem.meta.undo = !newBatchActionItem.meta.undo;\n          }\n          if (action.meta.redo && newBatchActionItem.meta.do) {\n            newBatchActionItem.meta.redo = true;\n          }\n\n          newBatchActionItem.event = event;\n\n          applyMutator(action as Action);\n        }\n\n        setAction(action as Action);\n        if (event.tagsSet) {\n          store._callSubscribers();\n        }\n\n        return action;\n      } else {\n        const event = (this._eventByBatchId[action.meta.batchId] =\n          this._eventByBatchId[action.meta.batchId] || createEvent());\n\n        // If we get here, this is a new batch action\n        action.event = event;\n        delete action.meta.newBatch;\n        delete this._eventByBatchId[action.meta.batchId];\n        delete action.meta.batchId;\n\n        setAction(action as Action);\n        if (event.tagsSet) {\n          store._callSubscribers();\n        }\n\n        return action;\n      }\n    }\n\n    return this._actionResolver.resolve(options);\n  }\n}\n","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;"],"sourceRoot":""}