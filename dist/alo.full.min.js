!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define("alo",e):t.Alo=e()}(this,function(){"use strict";function t(){this.__data__=[],this.size=0}function e(t,e){return t===e||t!==t&&e!==e}function r(t,e){for(var r=t.length;r--;)if(mr(t[r][0],e))return r;return-1}function n(t){var e=this.__data__,r=wr(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Pr.call(e,r,1),--this.size,!0}function o(t){var e=this.__data__,r=Sr(e,t);return r<0?void 0:e[r][1]}function i(t){return Er(this.__data__,t)>-1}function u(t,e){var r=this.__data__,n=zr(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function a(t){var e=this,r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var o=t[r];e.set(o[0],o[1])}}function c(){this.__data__=new kr,this.size=0}function s(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function f(t){return this.__data__.get(t)}function p(t){return this.__data__.has(t)}function l(t,e){return e={exports:{}},t(e,e.exports),e.exports}function h(t){var e=tn.call(t,rn),r=t[rn];try{t[rn]=void 0;var n=!0}catch(t){}var o=en.call(t);return n&&(e?t[rn]=r:delete t[rn]),o}function d(t){return un.call(t)}function y(t){return null==t?void 0===t?ln:pn:hn&&hn in Object(t)?sn(t):fn(t)}function v(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function g(t){if(!gn(t))return!1;var e=vn(t);return e==mn||e==_n||e==bn||e==wn}function b(t){return!!En&&En in t}function m(t){if(null!=t){try{return xn.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function _(t){if(!In(t)||Fn(t))return!1;var e=Cn(t)?qn:kn;return e.test(Mn(t))}function w(t,e){return null==t?void 0:t[e]}function j(t,e){var r=Yn(t,e);return Wn(r)?r:void 0}function P(){this.__data__=eo?eo(null):{},this.size=0}function O(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function S(t){var e=this.__data__;if(oo){var r=e[t];return r===io?void 0:r}return ao.call(e,t)?e[t]:void 0}function A(t){var e=this.__data__;return so?void 0!==e[t]:po.call(e,t)}function E(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ho&&void 0===e?yo:e,this}function D(t){var e=this,r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var o=t[r];e.set(o[0],o[1])}}function z(){this.size=0,this.__data__={hash:new Po,map:new(So||Oo),string:new Po}}function x(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function R(t,e){var r=t.__data__;return Do(e)?r["string"==typeof e?"string":"hash"]:r.map}function C(t){var e=xo(this,t).delete(t);return this.size-=e?1:0,e}function F(t){return Co(this,t).get(t)}function I(t){return Io(this,t).has(t)}function M(t,e){var r=No(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function N(t){var e=this,r=-1,n=null==t?0:t.length;for(this.clear();++r<n;){var o=t[r];e.set(o[0],o[1])}}function k(t,e){var r=this.__data__;if(r instanceof Lo){var n=r.__data__;if(!Wo||n.length<Go-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Yo(n)}return r.set(t,e),this.size=r.size,this}function T(t){var e=this.__data__=new Ko(t);this.size=e.size}function B(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function U(t,e,r){"__proto__"==e&&ui?ui(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function $(t,e,r){var n=t[e];pi.call(t,e)&&si(n,r)&&(void 0!==r||e in t)||ci(t,e,r)}function q(t,e,r,n){var o=!r;r||(r={});for(var i=-1,u=e.length;++i<u;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),o?di(r,a,c):hi(r,a,c)}return r}function V(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function L(t){return null!=t&&"object"==typeof t}function W(t){return mi(t)&&bi(t)==_i}function Y(){return!1}function G(t,e){return e=null==e?Fi:e,!!e&&("number"==typeof t||Ii.test(t))&&t>-1&&t%1==0&&t<e}function H(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ni}function K(t){return Ui(t)&&Bi(t.length)&&!!pu[Ti(t)]}function Z(t){return function(e){return t(e)}}function J(t,e){var r=Pu(t),n=!r&&ju(t),o=!r&&!n&&Ou(t),i=!r&&!n&&!o&&Au(t),u=r||n||o||i,a=u?wu(t.length,String):[],c=a.length;for(var s in t)!e&&!Du.call(t,s)||u&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Su(s,c))||a.push(s);return a}function Q(t){var e=t&&t.constructor,r="function"==typeof e&&e.prototype||xu;return t===r}function X(t,e){return function(r){return t(e(r))}}function tt(t){if(!Nu(t))return ku(t);var e=[];for(var r in Object(t))Bu.call(t,r)&&"constructor"!=r&&e.push(r);return e}function et(t){return null!=t&&qu(t.length)&&!$u(t)}function rt(t){return Yu(t)?Lu(t):Wu(t)}function nt(t,e){return t&&Hu(e,Ku(e),t)}function ot(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function it(t){if(!Qu(t))return ta(t);var e=Xu(t),r=[];for(var n in t)("constructor"!=n||!e&&ra.call(t,n))&&r.push(n);return r}function ut(t){return ua(t)?oa(t,!0):ia(t)}function at(t,e){return t&&ca(e,sa(e),t)}function ct(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function st(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var u=t[r];e(u,r,t)&&(i[o++]=u)}return i}function ft(){return[]}function pt(t,e){return ja(t,Pa(t),e)}function lt(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function ht(t,e){return Na(t,ka(t),e)}function dt(t,e,r){var n=e(t);return Ua(t)?n:Ba(n,r(t))}function yt(t){return qa(t,La,Va)}function vt(t){return Ya(t,Ha,Ga)}function gt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&Fc.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function bt(t){var e=new t.constructor(t.byteLength);return new Tc(e).set(new Tc(t)),e}function mt(t,e){var r=e?Uc(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function _t(t,e){return t.set(e[0],e[1]),t}function wt(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function jt(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Pt(t,e,r){var n=e?r(Gc(t),Hc):Gc(t);return Yc(n,Wc,new t.constructor)}function Ot(t){var e=new t.constructor(t.source,Zc.exec(t));return e.lastIndex=t.lastIndex,e}function St(t,e){return t.add(e),t}function At(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function Et(t,e,r){var n=e?r(rs(t),ns):rs(t);return es(n,ts,new t.constructor)}function Dt(t){return as?Object(as.call(t)):{}}function zt(t,e){var r=e?ss(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function xt(t,e,r,n){var o=t.constructor;switch(e){case As:return ps(t);case bs:case ms:return new o(+t);case Es:return ls(t,n);case Ds:case zs:case xs:case Rs:case Cs:case Fs:case Is:case Ms:case Ns:return gs(t,n);case _s:return hs(t,n,r);case ws:case Os:return new o(t);case js:return ds(t);case Ps:return ys(t,n,r);case Ss:return vs(t)}}function Rt(t){return"function"!=typeof t.constructor||Ls(t)?{}:qs(Vs(t))}function Ct(t,e,r,n,o,i){var u,a=e&lf,c=e&hf,s=e&df;if(r&&(u=o?r(t,n,o,i):r(t)),void 0!==u)return u;if(!ff(t))return t;var f=cf(t);if(f){if(u=of(t),!a)return Qs(t,u)}else{var p=nf(t),l=p==_f||p==wf;if(sf(t))return Js(t,a);if(p==Of||p==yf||l&&!o){if(u=c||l?{}:af(t),!a)return c?tf(t,Zs(u,t)):Xs(t,Ks(u,t))}else{if(!$f[p])return o?t:{};u=uf(t,p,Ct,a)}}i||(i=new Ys);var h=i.get(t);if(h)return h;i.set(t,u);var d=s?c?rf:ef:c?keysIn:pf,y=f?void 0:d(t);return Gs(y||t,function(n,o){y&&(o=n,n=t[o]),Hs(u,o,Ct(n,e,r,o,t,i))}),u}function Ft(t){return Vf(t,Lf|Wf)}function It(t){return function(e,r,n){for(var o=-1,i=Object(e),u=n(e),a=u.length;a--;){var c=u[t?a:++o];if(r(i[c],c,i)===!1)break}return e}}function Mt(t,e){return t&&Jf(t,e,Qf)}function Nt(t,e){return function(r,n){if(null==r)return r;if(!tp(r))return t(r,n);for(var o=r.length,i=e?o:-1,u=Object(r);(e?i--:++i<o)&&n(u[i],i,u)!==!1;);return r}}function kt(t,e){var r=[];return up(t,function(t,n,o){e(t,n,o)&&r.push(t)}),r}function Tt(t){return this.__data__.set(t,cp),this}function Bt(t){return this.__data__.has(t)}function Ut(t){var e=this,r=-1,n=null==t?0:t.length;for(this.__data__=new pp;++r<n;)e.add(t[r])}function $t(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function qt(t,e){return t.has(e)}function Vt(t,e,r,n,o,i){var u=r&_p,a=t.length,c=e.length;if(a!=c&&!(u&&c>a))return!1;var s=i.get(t);if(s&&i.get(e))return s==e;var f=-1,p=!0,l=r&wp?new gp:void 0;for(i.set(t,e),i.set(e,t);++f<a;){var h=t[f],d=e[f];if(n)var y=u?n(d,h,f,e,t,i):n(h,d,f,t,e,i);if(void 0!==y){if(y)continue;p=!1;break}if(l){if(!bp(e,function(t,e){if(!mp(l,e)&&(h===t||o(h,t,r,n,i)))return l.push(e)})){p=!1;break}}else if(h!==d&&!o(h,d,r,n,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function Lt(t,e,r,n,o,i,u){switch(r){case $p:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Up:return!(t.byteLength!=e.byteLength||!i(new Op(t),new Op(e)));case Rp:case Cp:case Mp:return Sp(+t,+e);case Fp:return t.name==e.name&&t.message==e.message;case Np:case Tp:return t==e+"";case Ip:var a=Ep;case kp:var c=n&zp;if(a||(a=Dp),t.size!=e.size&&!c)return!1;var s=u.get(t);if(s)return s==e;n|=xp,u.set(t,e);var f=Ap(a(t),a(e),n,o,i,u);return u.delete(t),f;case Bp:if(Vp)return Vp.call(t)==Vp.call(e)}return!1}function Wt(t,e,r,n,o,i){var u=r&Yp,a=Wp(t),c=a.length,s=Wp(e),f=s.length;if(c!=f&&!u)return!1;for(var p=c;p--;){var l=a[p];if(!(u?l in e:Hp.call(e,l)))return!1}var h=i.get(t);if(h&&i.get(e))return h==e;var d=!0;i.set(t,e),i.set(e,t);for(var y=u;++p<c;){l=a[p];var v=t[l],g=e[l];if(n)var b=u?n(g,v,l,e,t,i):n(v,g,l,t,e,i);if(!(void 0===b?v===g||o(v,g,r,n,i):b)){d=!1;break}y||(y="constructor"==l)}if(d&&!y){var m=t.constructor,_=e.constructor;m!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return i.delete(t),i.delete(e),d}function Yt(t,e,r,n,o,i){var u=el(t),a=el(e),c=u?ul:tl(t),s=a?ul:tl(e);c=c==il?al:c,s=s==il?al:s;var f=c==al,p=s==al,l=c==s;if(l&&rl(t)){if(!rl(e))return!1;u=!0,f=!1}if(l&&!f)return i||(i=new Zp),u||nl(t)?Jp(t,e,r,n,o,i):Qp(t,e,c,r,n,o,i);if(!(r&ol)){var h=f&&sl.call(t,"__wrapped__"),d=p&&sl.call(e,"__wrapped__");if(h||d){var y=h?t.value():t,v=d?e.value():e;return i||(i=new Zp),o(y,v,r,n,i)}}return!!l&&(i||(i=new Zp),Xp(t,e,r,n,o,i))}function Gt(t,e,r,n,o){return t===e||(null==t||null==e||!ll(t)&&!ll(e)?t!==t&&e!==e:pl(t,e,r,n,Gt,o))}function Ht(t,e,r,n){var o=r.length,i=o,u=!n;if(null==t)return!i;for(t=Object(t);o--;){var a=r[o];if(u&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){a=r[o];var c=a[0],s=t[c],f=a[1];if(u&&a[2]){if(void 0===s&&!(c in t))return!1}else{var p=new dl;if(n)var l=n(s,f,c,t,e,p);if(!(void 0===l?yl(f,s,vl|gl,n,p):l))return!1}}return!0}function Kt(t){return t===t&&!ml(t)}function Zt(t){for(var e=jl(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,wl(o)]}return e}function Jt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}function Qt(t){var e=Al(t);return 1==e.length&&e[0][2]?El(e[0][0],e[0][1]):function(r){return r===t||Sl(r,t,e)}}function Xt(t){return"symbol"==typeof t||xl(t)&&zl(t)==Rl}function te(t,e){if(Fl(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Il(t))||(Nl.test(t)||!Ml.test(t)||null!=e&&t in Object(e))}function ee(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Bl);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var u=t.apply(this,n);return r.cache=i.set(o,u)||i,u};return r.cache=new(ee.Cache||Tl),r}function re(t){var e=ql(t,function(t){return r.size===Vl&&r.clear(),t}),r=e.cache;return e}function ne(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function oe(t){if("string"==typeof t)return t;if(th(t))return Xl(t,oe)+"";if(eh(t))return oh?oh.call(t):"";var e=t+"";return"0"==e&&1/t==-rh?"-0":e}function ie(t){return null==t?"":uh(t)}function ue(t,e){return ch(t)?t:sh(t,e)?[t]:fh(ph(t))}function ae(t){if("string"==typeof t||hh(t))return t;var e=t+"";return"0"==e&&1/t==-dh?"-0":e}function ce(t,e){e=vh(e,t);for(var r=0,n=e.length;null!=t&&r<n;)t=t[gh(e[r++])];return r&&r==n?t:void 0}function se(t,e,r){var n=null==t?void 0:mh(t,e);return void 0===n?r:n}function fe(t,e){return null!=t&&e in Object(t)}function pe(t,e,r){e=jh(e,t);for(var n=-1,o=e.length,i=!1;++n<o;){var u=Eh(e[n]);if(!(i=null!=t&&r(t,u)))break;t=t[u]}return i||++n!=o?i:(o=null==t?0:t.length,!!o&&Ah(o)&&Sh(u,o)&&(Oh(t)||Ph(t)))}function le(t,e){return null!=t&&xh(t,e,zh)}function he(t,e){return Mh(t)&&Nh(e)?kh(Th(t),e):function(r){var n=Fh(r,t);return void 0===n&&n===e?Ih(r,t):Ch(e,n,Bh|Uh)}}function de(t){return t}function ye(t){return function(e){return null==e?void 0:e[t]}}function ve(t){return function(e){return Lh(e,t)}}function ge(t){return Hh(t)?Yh(Kh(t)):Gh(t)}function be(t){return"function"==typeof t?t:null==t?Xh:"object"==typeof t?td(t)?Qh(t[0],t[1]):Jh(t):ed(t)}function me(t,e){var r=ud(t)?nd:od;return r(t,id(e,3))}function _e(t,e){return cd(e,function(e){return t[e]})}function we(t){return null==t?[]:fd(t,pd(t))}function je(t){return"function"==typeof t?t:hd}function Pe(t,e){var r=bd(t)?yd:vd;return r(t,gd(e))}function Oe(t){return"string"==typeof t||!wd(t)&&jd(t)&&_d(t)==Pd}function Se(t,e,r){(void 0===r||Ad(t[e],r))&&(void 0!==r||e in t)||Sd(t,e,r)}function Ae(t){return zd(t)&&Dd(t)}function Ee(t){if(!Fd(t)||Rd(t)!=Id)return!1;var e=Cd(t);if(null===e)return!0;var r=Td.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&kd.call(r)==Bd}function De(t){return $d(t,qd(t))}function ze(t,e,r,n,o,i,u){var a=t[r],c=e[r],s=u.get(c);if(s)return void Ld(t,r,s);var f=i?i(a,c,r+"",t,e,u):void 0,p=void 0===f;if(p){var l=Zd(c),h=!l&&Qd(c),d=!l&&!h&&ry(c);f=c,l||h||d?Zd(a)?f=a:Jd(a)?f=Gd(a):h?(p=!1,f=Wd(c,!0)):d?(p=!1,f=Yd(c,!0)):f=[]:ey(c)||Kd(c)?(f=a,Kd(a)?f=ny(a):(!ty(a)||n&&Xd(a))&&(f=Hd(c))):p=!1}p&&(u.set(c,f),o(f,c,n,i,u),u.delete(c)),Ld(t,r,f)}function xe(t,e,r,n,o){t!==e&&ay(e,function(i,u){if(sy(i))o||(o=new iy),cy(t,e,u,r,xe,n,o);else{var a=n?n(t[u],i,u+"",t,e,o):void 0;void 0===a&&(a=i),uy(t,u,a)}},fy)}function Re(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ce(t,e,r){return e=dy(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=dy(n.length-e,0),u=Array(i);++o<i;)u[o]=n[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=n[o];return a[e]=r(u),hy(t,this,a)}}function Fe(t){return function(){return t}}function Ie(t){var e=0,r=0;return function(){var n=Oy(),o=Py-(n-r);if(r=n,o>0){if(++e>=jy)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Me(t,e){return Cy(Ry(t,e,xy),t+"")}function Ne(t,e,r){if(!ky(r))return!1;var n=typeof e;return!!("number"==n?My(r)&&Ny(e,r.length):"string"==n&&e in r)&&Iy(r[e],t)}function ke(t){return By(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,u=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&Uy(r[0],r[1],u)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var a=r[n];a&&t(e,a,n,i)}return e})}function Te(t,e){return Yy(t,e)}function Be(t,e){var r=-1,n=Ky(t)?Array(t.length):[];return Hy(t,function(t,o,i){n[++r]=e(t,o,i)}),n}function Ue(t,e){var r=tv(t)?Jy:Xy;return r(t,Qy(e,3))}function $e(t){return t===!0||t===!1||nv(t)&&rv(t)==ov}function qe(t){if("number"==typeof t)return t;if(av(t))return cv;if(uv(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=uv(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(sv,"");var r=pv.test(t);return r||lv.test(t)?hv(t.slice(2),r?2:8):fv.test(t)?cv:+t}function Ve(t){if(!t)return 0===t?t:0;if(t=yv(t),t===vv||t===-vv){var e=t<0?-1:1;return e*gv}return t===t?t:0}function Le(t){var e=mv(t),r=e%1;return e===e?r?e-r:e:0}function We(t){return"number"==typeof t&&t==wv(t)}function Ye(t){var e=++Ov;return Pv(t)+e}function Ge(t,e){return Av(e,function(e){return[e,t[e]]})}function He(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}function Ke(t){return function(e){var r=xv(e);return r==Fv?Rv(e):r==Iv?Cv(e):zv(e,t(e))}}function Ze(t){return!!(t&&t.constructor&&t.call&&t.apply)}function Je(){return!0}function Qe(t,e){var r,n,o,i,u=nr([],Je);for(o=[],i=[],r=0;r<e.length;++r)void 0!==e[r]&&(o.push(e[r]),void 0!==e[r].end&&i.push(e[r].end));return n=nr(o,t),n.depsChanged=[],n.fnArgs=n.deps.concat([n,n.depsChanged]),n.end=u,u.listeners.push(n),pr(i,u),u.deps=i,ir(n),n}function Xe(t){return ug.map(t,this)}function tr(t){var e=this;return Qe(function(t,e,r){r(t.val(e.val))},[e,t])}function er(){return"stream("+this.val+")"}function rr(){function t(e){return 0===arguments.length?t.val:(sr(t,e),t)}return t.hasVal=!1,t.val=void 0,t.vals=[],t.listeners=[],t.queued=!1,t.end=void 0,t.map=Xe,t.ap=tr,t.of=ug.stream,t.toString=er,t}function nr(t,e){var r=rr();return r.fn=e,r.deps=t,r.depsMet=!1,r.depsChanged=t.length>0?[]:void 0,r.shouldUpdate=!1,pr(t,r),r}function or(t){return t.depsMet=t.deps.every(function(t){return t.hasVal}),!t.depsMet}function ir(t){if(!(t.depsMet!==!0&&or(t)||void 0!==t.end&&t.end.val===!0)){if(void 0!==Ul)return void rg.push(t);Ul=t,t.depsChanged&&(t.fnArgs[t.fnArgs.length-1]=t.depsChanged);var e=t.fn.apply(t.fn,t.fnArgs);void 0!==e&&t(e),Ul=void 0,void 0!==t.depsChanged&&(t.depsChanged=[]),t.shouldUpdate=!1,ig===!1&&cr()}}function ur(t){var e,r,n,o=t.listeners;for(e=0;e<o.length;++e)n=o[e],n.end===t?dr(n):(void 0!==n.depsChanged&&n.depsChanged.push(t),n.shouldUpdate=!0,ar(n));for(;og>=0;--og)r=ng[og],r.shouldUpdate===!0&&ir(r),r.queued=!1}function ar(t){var e,r=t.listeners;if(t.queued===!1){for(t.queued=!0,e=0;e<r.length;++e)ar(r[e]);ng[++og]=t}}function cr(){for(ig=!0;rg.length>0;){var t=rg.shift();t.vals.length>0&&(t.val=t.vals.shift()),ur(t)}ig=!1}function sr(t,e){return void 0!==e&&null!==e&&Ze(e.then)?void e.then(t):(t.val=e,t.hasVal=!0,void(void 0===Ul?(ig=!0,ur(t),rg.length>0?cr():ig=!1):Ul===t?fr(t,t.listeners):(t.vals.push(e),rg.push(t))))}function fr(t,e){var r,n;for(r=0;r<e.length;++r)n=e[r],n.end!==t?(void 0!==n.depsChanged&&n.depsChanged.push(t),n.shouldUpdate=!0):dr(n)}function pr(t,e){for(var r=0;r<t.length;++r)t[r].listeners.push(e)}function lr(t,e){var r=e.indexOf(t);e[r]=e[e.length-1],e.length--}function hr(t){for(var e=0;e<t.deps.length;++e)lr(t,t.deps[e].listeners);t.deps.length=0}function dr(t){void 0!==t.deps&&hr(t),void 0!==t.end&&hr(t.end)}function yr(){}function vr(){function t(t,e){for(var r="object"==typeof e&&e?Object.getPrototypeOf(e):null,n=r?new RegExp("^"+t+"$"):null;r&&r.constructor;){if(n.test(r.constructor.name))return!0;r=Object.getPrototypeOf(r)}return!1}function e(t){return t.param=t.param.map(function(e){var r;return"value"in e?r=e.value:"reference"in e&&(r=t.param.reduce(function(t,r){return r!==e&&!t&&e.reference===r.name&&"value"in r?r.value:t},null)),r}),t}function r(e,r){var n=r.map(function(t){return new RegExp("^("+l(t)+")")});return e.filter(function(e){var o,u=!1;return o=r.length<=e.arguments.length||e.arguments[e.arguments.length-1]&&"..."===e.arguments[e.arguments.length-1].type,o&&r.forEach(function(r,a){var c=e.arguments[a]?e.arguments[a].type:null;i("...",e.arguments,a)&&(u=!0),o=o&&(u||n[a].test(c)||"!"!==c[c.length-1]&&t(c,r))}),o})}function n(e,r){return e.map(function(e){var n={call:e.call,arguments:e.arguments,specificity:e.arguments.map(function(e,n){var o="value"in e,i=0;return"..."!==e.type&&n<r.length&&(++i,Number(e.type===l(r[n],!0)||t(e.type,r[n])||!o)&&++i,"!"===e.type[e.type.length-1]&&l(r[n],!0)&&++i),i}).join(""),param:e.arguments.map(function(t,e){var n={};return n.name=t.name,"..."===t.type?n.value=r.slice(e):e<r.length&&"undefined"!=typeof r[e]&&null!==r[e]?n.value=r[e]:"value"in t?n.value=t.value:"reference"in t&&(n.reference=t.reference),n})};return n})}function o(t,e){return t.sort(function(t,r){var n=function(t,r){return+(t.type===l(e[r],!0))};return t.specificity!==r.specificity?t.specificity.length-r.specificity.length||r.specificity-t.specificity:r.arguments.map(n).join("")-t.arguments.map(n).join("")})}function i(t,e,r){return e.length>r&&"type"in e[r]&&e[r].type===t}function u(t){var u=r(v,t);return u=n(u,t),u=o(u,t),u=u.filter(function(e){var r=!1,n=e.arguments.map(function(t,n){return r=i("...",e.arguments,n)||i("...",e.arguments,n+1),+!(r||"value"in t||"reference"in t)}).join("").match(/^1+/);return t.length>=(n?n[0].length:0)}),!!u.length&&e(u[0])}function a(t,e){var r=e;switch(t){case"number":r=+r;break;case"int":r=parseInt(r,10);break;case"float":r=parseFloat(r);break;case"bool":case"boolean":r=["true","1",1].indexOf(r)>=0}return r}function c(t,e,r){return(parseInt(e,10)===parseFloat(e)?"int":"float")+(r?"":"|"+t)}function s(t,e,r){return e instanceof Array&&(t="array"),e?e.constructor.name+(r?"":"|"+t):"null"}function f(t,e){return t+(e?"":"|bool")}function p(t,e){return t+(e?"":"|[a-z]+")}function l(t,e){var r=typeof t;switch(r){case"number":r=c(r,t,e);break;case"object":r=s(r,t,e);break;case"boolean":r=f(r,e);break;case"undefined":r=p(r,e)}return r}function h(t,e){var r={type:!!t&&t[1],name:t?t[2]:e};return t&&("@"===t[4]?r.reference=t[5]:"="===t[3]&&(r.value=a(r.type,t[5]))),r}function d(t){var e=/^(?:void|([a-zA-Z]+!?|\.{3})(?:[:\s]+([a-zA-Z]+)(?:(=)(@)?(.*))?)?)?$/;return t.split(/\s*,\s*/).map(function(r,n,o){var i=h(r.match(e),"var"+(n+1));if(i.type===!1)throw new Error('polymorphic: invalid argument "'+r+'" in signature "'+t+'"');if("..."===i.type&&n<o.length-1)throw new Error('polymorphic: variadic argument must be at end of signature "'+t+'"');return i}).filter(function(t){return void 0!==t.type})}function y(){var t=Array.prototype.slice.call(arguments),e=u(t);if(!e)throw new Error('polymorph: signature not found "'+t.map(function(t){return l(t)}).join(", ")+'"');return e.call.apply(this,e.param)}var v=[];return y.signature=function(){var t=Array.prototype.slice.call(arguments),e=t.length&&"function"==typeof t[t.length-1]?t.pop():null;if(!t.length)throw new Error("polymorphic.signature: expected one or more signatures");if(!e)throw new Error("polymorphic.signature: expected final argument to be a callback");t.forEach(function(t){v.push({signature:t,arguments:d(t),call:e})})},y}var gr=t,br=e,mr=br,_r=r,wr=_r,jr=Array.prototype,Pr=jr.splice,Or=n,Sr=_r,Ar=o,Er=_r,Dr=i,zr=_r,xr=u,Rr=gr,Cr=Or,Fr=Ar,Ir=Dr,Mr=xr;a.prototype.clear=Rr,a.prototype.delete=Cr,a.prototype.get=Fr,a.prototype.has=Ir,a.prototype.set=Mr;var Nr=a,kr=Nr,Tr=c,Br=s,Ur=f,$r=p,qr="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Vr="object"==typeof qr&&qr&&qr.Object===Object&&qr,Lr=Vr,Wr=Lr,Yr="object"==typeof self&&self&&self.Object===Object&&self,Gr=Wr||Yr||Function("return this")(),Hr=Gr,Kr=Hr,Zr=Kr.Symbol,Jr=Zr,Qr=Jr,Xr=Object.prototype,tn=Xr.hasOwnProperty,en=Xr.toString,rn=Qr?Qr.toStringTag:void 0,nn=h,on=Object.prototype,un=on.toString,an=d,cn=Jr,sn=nn,fn=an,pn="[object Null]",ln="[object Undefined]",hn=cn?cn.toStringTag:void 0,dn=y,yn=v,vn=dn,gn=yn,bn="[object AsyncFunction]",mn="[object Function]",_n="[object GeneratorFunction]",wn="[object Proxy]",jn=g,Pn=Hr,On=Pn["__core-js_shared__"],Sn=On,An=Sn,En=function(){var t=/[^.]+$/.exec(An&&An.keys&&An.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Dn=b,zn=Function.prototype,xn=zn.toString,Rn=m,Cn=jn,Fn=Dn,In=yn,Mn=Rn,Nn=/[\\^$.*+?()[\]{}|]/g,kn=/^\[object .+?Constructor\]$/,Tn=Function.prototype,Bn=Object.prototype,Un=Tn.toString,$n=Bn.hasOwnProperty,qn=RegExp("^"+Un.call($n).replace(Nn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vn=_,Ln=w,Wn=Vn,Yn=Ln,Gn=j,Hn=Gn,Kn=Hr,Zn=Hn(Kn,"Map"),Jn=Zn,Qn=Gn,Xn=Qn(Object,"create"),to=Xn,eo=to,ro=P,no=O,oo=to,io="__lodash_hash_undefined__",uo=Object.prototype,ao=uo.hasOwnProperty,co=S,so=to,fo=Object.prototype,po=fo.hasOwnProperty,lo=A,ho=to,yo="__lodash_hash_undefined__",vo=E,go=ro,bo=no,mo=co,_o=lo,wo=vo;D.prototype.clear=go,D.prototype.delete=bo,D.prototype.get=mo,D.prototype.has=_o,D.prototype.set=wo;var jo=D,Po=jo,Oo=Nr,So=Jn,Ao=z,Eo=x,Do=Eo,zo=R,xo=zo,Ro=C,Co=zo,Fo=F,Io=zo,Mo=I,No=zo,ko=M,To=Ao,Bo=Ro,Uo=Fo,$o=Mo,qo=ko;N.prototype.clear=To,N.prototype.delete=Bo,N.prototype.get=Uo,N.prototype.has=$o,N.prototype.set=qo;var Vo=N,Lo=Nr,Wo=Jn,Yo=Vo,Go=200,Ho=k,Ko=Nr,Zo=Tr,Jo=Br,Qo=Ur,Xo=$r,ti=Ho;T.prototype.clear=Zo,T.prototype.delete=Jo,T.prototype.get=Qo,T.prototype.has=Xo,T.prototype.set=ti;var ei=T,ri=B,ni=Gn,oi=function(){try{var t=ni(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),ii=oi,ui=ii,ai=U,ci=ai,si=br,fi=Object.prototype,pi=fi.hasOwnProperty,li=$,hi=li,di=ai,yi=q,vi=V,gi=L,bi=dn,mi=gi,_i="[object Arguments]",wi=W,ji=wi,Pi=gi,Oi=Object.prototype,Si=Oi.hasOwnProperty,Ai=Oi.propertyIsEnumerable,Ei=ji(function(){return arguments}())?ji:function(t){return Pi(t)&&Si.call(t,"callee")&&!Ai.call(t,"callee")},Di=Ei,zi=Array.isArray,xi=zi,Ri=Y,Ci=l(function(t,e){var r=Hr,n=Ri,o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===o,a=u?r.Buffer:void 0,c=a?a.isBuffer:void 0,s=c||n;t.exports=s}),Fi=9007199254740991,Ii=/^(?:0|[1-9]\d*)$/,Mi=G,Ni=9007199254740991,ki=H,Ti=dn,Bi=ki,Ui=gi,$i="[object Arguments]",qi="[object Array]",Vi="[object Boolean]",Li="[object Date]",Wi="[object Error]",Yi="[object Function]",Gi="[object Map]",Hi="[object Number]",Ki="[object Object]",Zi="[object RegExp]",Ji="[object Set]",Qi="[object String]",Xi="[object WeakMap]",tu="[object ArrayBuffer]",eu="[object DataView]",ru="[object Float32Array]",nu="[object Float64Array]",ou="[object Int8Array]",iu="[object Int16Array]",uu="[object Int32Array]",au="[object Uint8Array]",cu="[object Uint8ClampedArray]",su="[object Uint16Array]",fu="[object Uint32Array]",pu={};pu[ru]=pu[nu]=pu[ou]=pu[iu]=pu[uu]=pu[au]=pu[cu]=pu[su]=pu[fu]=!0,pu[$i]=pu[qi]=pu[tu]=pu[Vi]=pu[eu]=pu[Li]=pu[Wi]=pu[Yi]=pu[Gi]=pu[Hi]=pu[Ki]=pu[Zi]=pu[Ji]=pu[Qi]=pu[Xi]=!1;var lu=K,hu=Z,du=l(function(t,e){var r=Lr,n="object"==typeof e&&e&&!e.nodeType&&e,o=n&&"object"==typeof t&&t&&!t.nodeType&&t,i=o&&o.exports===n,u=i&&r.process,a=function(){try{return u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=a}),yu=lu,vu=hu,gu=du,bu=gu&&gu.isTypedArray,mu=bu?vu(bu):yu,_u=mu,wu=vi,ju=Di,Pu=xi,Ou=Ci,Su=Mi,Au=_u,Eu=Object.prototype,Du=Eu.hasOwnProperty,zu=J,xu=Object.prototype,Ru=Q,Cu=X,Fu=Cu,Iu=Fu(Object.keys,Object),Mu=Iu,Nu=Ru,ku=Mu,Tu=Object.prototype,Bu=Tu.hasOwnProperty,Uu=tt,$u=jn,qu=ki,Vu=et,Lu=zu,Wu=Uu,Yu=Vu,Gu=rt,Hu=yi,Ku=Gu,Zu=nt,Ju=ot,Qu=yn,Xu=Ru,ta=Ju,ea=Object.prototype,ra=ea.hasOwnProperty,na=it,oa=zu,ia=na,ua=Vu,aa=ut,ca=yi,sa=aa,fa=at,pa=l(function(t,e){function r(t,e){if(e)return t.slice();var r=t.length,n=c?c(r):new t.constructor(r);return t.copy(n),n}var n=Hr,o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===o,a=u?n.Buffer:void 0,c=a?a.allocUnsafe:void 0;t.exports=r}),la=ct,ha=st,da=ft,ya=ha,va=da,ga=Object.prototype,ba=ga.propertyIsEnumerable,ma=Object.getOwnPropertySymbols,_a=ma?function(t){return null==t?[]:(t=Object(t),ya(ma(t),function(e){return ba.call(t,e)}))}:va,wa=_a,ja=yi,Pa=wa,Oa=pt,Sa=lt,Aa=Cu,Ea=Aa(Object.getPrototypeOf,Object),Da=Ea,za=Sa,xa=Da,Ra=wa,Ca=da,Fa=Object.getOwnPropertySymbols,Ia=Fa?function(t){for(var e=[];t;)za(e,Ra(t)),t=xa(t);return e}:Ca,Ma=Ia,Na=yi,ka=Ma,Ta=ht,Ba=Sa,Ua=xi,$a=dt,qa=$a,Va=wa,La=Gu,Wa=yt,Ya=$a,Ga=Ma,Ha=aa,Ka=vt,Za=Gn,Ja=Hr,Qa=Za(Ja,"DataView"),Xa=Qa,tc=Gn,ec=Hr,rc=tc(ec,"Promise"),nc=rc,oc=Gn,ic=Hr,uc=oc(ic,"Set"),ac=uc,cc=Gn,sc=Hr,fc=cc(sc,"WeakMap"),pc=fc,lc=Xa,hc=Jn,dc=nc,yc=ac,vc=pc,gc=dn,bc=Rn,mc="[object Map]",_c="[object Object]",wc="[object Promise]",jc="[object Set]",Pc="[object WeakMap]",Oc="[object DataView]",Sc=bc(lc),Ac=bc(hc),Ec=bc(dc),Dc=bc(yc),zc=bc(vc),xc=gc;(lc&&xc(new lc(new ArrayBuffer(1)))!=Oc||hc&&xc(new hc)!=mc||dc&&xc(dc.resolve())!=wc||yc&&xc(new yc)!=jc||vc&&xc(new vc)!=Pc)&&(xc=function(t){var e=gc(t),r=e==_c?t.constructor:void 0,n=r?bc(r):"";if(n)switch(n){case Sc:return Oc;case Ac:return mc;case Ec:return wc;case Dc:return jc;case zc:return Pc}return e});var Rc=xc,Cc=Object.prototype,Fc=Cc.hasOwnProperty,Ic=gt,Mc=Hr,Nc=Mc.Uint8Array,kc=Nc,Tc=kc,Bc=bt,Uc=Bc,$c=mt,qc=_t,Vc=wt,Lc=jt,Wc=qc,Yc=Vc,Gc=Lc,Hc=1,Kc=Pt,Zc=/\w*$/,Jc=Ot,Qc=St,Xc=At,ts=Qc,es=Vc,rs=Xc,ns=1,os=Et,is=Jr,us=is?is.prototype:void 0,as=us?us.valueOf:void 0,cs=Dt,ss=Bc,fs=zt,ps=Bc,ls=$c,hs=Kc,ds=Jc,ys=os,vs=cs,gs=fs,bs="[object Boolean]",ms="[object Date]",_s="[object Map]",ws="[object Number]",js="[object RegExp]",Ps="[object Set]",Os="[object String]",Ss="[object Symbol]",As="[object ArrayBuffer]",Es="[object DataView]",Ds="[object Float32Array]",zs="[object Float64Array]",xs="[object Int8Array]",Rs="[object Int16Array]",Cs="[object Int32Array]",Fs="[object Uint8Array]",Is="[object Uint8ClampedArray]",Ms="[object Uint16Array]",Ns="[object Uint32Array]",ks=xt,Ts=yn,Bs=Object.create,Us=function(){function t(){}return function(e){if(!Ts(e))return{};if(Bs)return Bs(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),$s=Us,qs=$s,Vs=Da,Ls=Ru,Ws=Rt,Ys=ei,Gs=ri,Hs=li,Ks=Zu,Zs=fa,Js=pa,Qs=la,Xs=Oa,tf=Ta,ef=Wa,rf=Ka,nf=Rc,of=Ic,uf=ks,af=Ws,cf=xi,sf=Ci,ff=yn,pf=Gu,lf=1,hf=2,df=4,yf="[object Arguments]",vf="[object Array]",gf="[object Boolean]",bf="[object Date]",mf="[object Error]",_f="[object Function]",wf="[object GeneratorFunction]",jf="[object Map]",Pf="[object Number]",Of="[object Object]",Sf="[object RegExp]",Af="[object Set]",Ef="[object String]",Df="[object Symbol]",zf="[object WeakMap]",xf="[object ArrayBuffer]",Rf="[object DataView]",Cf="[object Float32Array]",Ff="[object Float64Array]",If="[object Int8Array]",Mf="[object Int16Array]",Nf="[object Int32Array]",kf="[object Uint8Array]",Tf="[object Uint8ClampedArray]",Bf="[object Uint16Array]",Uf="[object Uint32Array]",$f={};$f[yf]=$f[vf]=$f[xf]=$f[Rf]=$f[gf]=$f[bf]=$f[Cf]=$f[Ff]=$f[If]=$f[Mf]=$f[Nf]=$f[jf]=$f[Pf]=$f[Of]=$f[Sf]=$f[Af]=$f[Ef]=$f[Df]=$f[kf]=$f[Tf]=$f[Bf]=$f[Uf]=!0,$f[mf]=$f[_f]=$f[zf]=!1;var qf=Ct,Vf=qf,Lf=1,Wf=4,Yf=Ft,Gf=It,Hf=Gf,Kf=Hf(),Zf=Kf,Jf=Zf,Qf=Gu,Xf=Mt,tp=Vu,ep=Nt,rp=Xf,np=ep,op=np(rp),ip=op,up=ip,ap=kt,cp="__lodash_hash_undefined__",sp=Tt,fp=Bt,pp=Vo,lp=sp,hp=fp;Ut.prototype.add=Ut.prototype.push=lp,Ut.prototype.has=hp;var dp=Ut,yp=$t,vp=qt,gp=dp,bp=yp,mp=vp,_p=1,wp=2,jp=Vt,Pp=Jr,Op=kc,Sp=br,Ap=jp,Ep=Lc,Dp=Xc,zp=1,xp=2,Rp="[object Boolean]",Cp="[object Date]",Fp="[object Error]",Ip="[object Map]",Mp="[object Number]",Np="[object RegExp]",kp="[object Set]",Tp="[object String]",Bp="[object Symbol]",Up="[object ArrayBuffer]",$p="[object DataView]",qp=Pp?Pp.prototype:void 0,Vp=qp?qp.valueOf:void 0,Lp=Lt,Wp=Wa,Yp=1,Gp=Object.prototype,Hp=Gp.hasOwnProperty,Kp=Wt,Zp=ei,Jp=jp,Qp=Lp,Xp=Kp,tl=Rc,el=xi,rl=Ci,nl=_u,ol=1,il="[object Arguments]",ul="[object Array]",al="[object Object]",cl=Object.prototype,sl=cl.hasOwnProperty,fl=Yt,pl=fl,ll=gi,hl=Gt,dl=ei,yl=hl,vl=1,gl=2,bl=Ht,ml=yn,_l=Kt,wl=_l,jl=Gu,Pl=Zt,Ol=Jt,Sl=bl,Al=Pl,El=Ol,Dl=Qt,zl=dn,xl=gi,Rl="[object Symbol]",Cl=Xt,Fl=xi,Il=Cl,Ml=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nl=/^\w*$/,kl=te,Tl=Vo,Bl="Expected a function";ee.Cache=Tl;var Ul,$l=ee,ql=$l,Vl=500,Ll=re,Wl=Ll,Yl=/^\./,Gl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Hl=/\\(\\)?/g,Kl=Wl(function(t){var e=[];return Yl.test(t)&&e.push(""),t.replace(Gl,function(t,r,n,o){e.push(n?o.replace(Hl,"$1"):r||t)}),e}),Zl=Kl,Jl=ne,Ql=Jr,Xl=Jl,th=xi,eh=Cl,rh=1/0,nh=Ql?Ql.prototype:void 0,oh=nh?nh.toString:void 0,ih=oe,uh=ih,ah=ie,ch=xi,sh=kl,fh=Zl,ph=ah,lh=ue,hh=Cl,dh=1/0,yh=ae,vh=lh,gh=yh,bh=ce,mh=bh,_h=se,wh=fe,jh=lh,Ph=Di,Oh=xi,Sh=Mi,Ah=ki,Eh=yh,Dh=pe,zh=wh,xh=Dh,Rh=le,Ch=hl,Fh=_h,Ih=Rh,Mh=kl,Nh=_l,kh=Ol,Th=yh,Bh=1,Uh=2,$h=he,qh=de,Vh=ye,Lh=bh,Wh=ve,Yh=Vh,Gh=Wh,Hh=kl,Kh=yh,Zh=ge,Jh=Dl,Qh=$h,Xh=qh,td=xi,ed=Zh,rd=be,nd=ha,od=ap,id=rd,ud=xi,ad=me,cd=Jl,sd=_e,fd=sd,pd=Gu,ld=we,hd=qh,dd=je,yd=ri,vd=ip,gd=dd,bd=xi,md=Pe,_d=dn,wd=xi,jd=gi,Pd="[object String]",Od=Oe,Sd=ai,Ad=br,Ed=Se,Dd=Vu,zd=gi,xd=Ae,Rd=dn,Cd=Da,Fd=gi,Id="[object Object]",Md=Function.prototype,Nd=Object.prototype,kd=Md.toString,Td=Nd.hasOwnProperty,Bd=kd.call(Object),Ud=Ee,$d=yi,qd=aa,Vd=De,Ld=Ed,Wd=pa,Yd=fs,Gd=la,Hd=Ws,Kd=Di,Zd=xi,Jd=xd,Qd=Ci,Xd=jn,ty=yn,ey=Ud,ry=_u,ny=Vd,oy=ze,iy=ei,uy=Ed,ay=Zf,cy=oy,sy=yn,fy=aa,py=xe,ly=Re,hy=ly,dy=Math.max,yy=Ce,vy=Fe,gy=vy,by=ii,my=qh,_y=by?function(t,e){
return by(t,"toString",{configurable:!0,enumerable:!1,value:gy(e),writable:!0})}:my,wy=_y,jy=800,Py=16,Oy=Date.now,Sy=Ie,Ay=wy,Ey=Sy,Dy=Ey(Ay),zy=Dy,xy=qh,Ry=yy,Cy=zy,Fy=Me,Iy=br,My=Vu,Ny=Mi,ky=yn,Ty=Ne,By=Fy,Uy=Ty,$y=ke,qy=py,Vy=$y,Ly=Vy(function(t,e,r){qy(t,e,r)}),Wy=Ly,Yy=hl,Gy=Te,Hy=ip,Ky=Vu,Zy=Be,Jy=Jl,Qy=rd,Xy=Zy,tv=xi,ev=Ue,rv=dn,nv=gi,ov="[object Boolean]",iv=$e,uv=yn,av=Cl,cv=NaN,sv=/^\s+|\s+$/g,fv=/^[-+]0x[0-9a-f]+$/i,pv=/^0b[01]+$/i,lv=/^0o[0-7]+$/i,hv=parseInt,dv=qe,yv=dv,vv=1/0,gv=1.7976931348623157e308,bv=Ve,mv=bv,_v=Le,wv=_v,jv=We,Pv=ah,Ov=0,Sv=Ye,Av=Jl,Ev=Ge,Dv=He,zv=Ev,xv=Rc,Rv=Lc,Cv=Dv,Fv="[object Map]",Iv="[object Set]",Mv=Ke,Nv=Mv,kv=Gu,Tv=Nv(kv),Bv=Tv,Uv=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,r){return e.apply(this,arguments)};case 3:return function(t,r,n){return e.apply(this,arguments)};case 4:return function(t,r,n,o){return e.apply(this,arguments)};case 5:return function(t,r,n,o,i){return e.apply(this,arguments)};case 6:return function(t,r,n,o,i,u){return e.apply(this,arguments)};case 7:return function(t,r,n,o,i,u,a){return e.apply(this,arguments)};case 8:return function(t,r,n,o,i,u,a,c){return e.apply(this,arguments)};case 9:return function(t,r,n,o,i,u,a,c,s){return e.apply(this,arguments)};case 10:return function(t,r,n,o,i,u,a,c,s,f){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},$v=function(t){return null!=t&&"object"==typeof t&&t["@@functional/placeholder"]===!0},qv=$v,Vv=function(t){return function e(r){return 0===arguments.length||qv(r)?e:t.apply(this,arguments)}},Lv=Vv,Wv=$v,Yv=function(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return Wv(r)?e:Lv(function(e){return t(r,e)});default:return Wv(r)&&Wv(n)?e:Wv(r)?Lv(function(e){return t(e,n)}):Wv(n)?Lv(function(e){return t(r,e)}):t(r,n)}}},Gv=Uv,Hv=$v,Kv=function t(e,r,n){return function(){for(var o=arguments,i=[],u=0,a=e,c=0;c<r.length||u<arguments.length;){var s;c<r.length&&(!Hv(r[c])||u>=o.length)?s=r[c]:(s=o[u],u+=1),i[c]=s,Hv(s)||(a-=1),c+=1}return a<=0?n.apply(this,i):Gv(a,t(e,i,n))}},Zv=Uv,Jv=Vv,Qv=Yv,Xv=Kv,tg=Qv(function(t,e){return 1===t?Jv(e):Zv(t,Xv(t,[],e))}),eg=tg,rg=[],ng=[],og=-1,ig=!1,ug={};ug.stream=function(t){var e=nr([],Je),r=rr();return r.end=e,r.fnArgs=[],e.listeners.push(r),arguments.length>0&&r(t),r},ug.combine=eg(2,Qe),ug.isStream=function(t){return Ze(t)&&"hasVal"in t},ug.immediate=function(t){return t.depsMet===!1&&(t.depsMet=!0,ir(t)),t},ug.endsOn=function(t,e){return hr(e.end),t.listeners.push(e.end),e.end.deps.push(t),e},ug.map=eg(2,function(t,e){return Qe(function(e,r){r(t(e.val))},[e])}),ug.on=eg(2,function(t,e){return Qe(function(e){t(e.val)},[e])}),ug.scan=eg(3,function(t,e,r){var n=Qe(function(r,n){n(e=t(e,r.val))},[r]);return n.hasVal||n(e),n}),ug.merge=eg(2,function(t,e){var r=ug.immediate(Qe(function(t,e,r,n){n[0]?r(n[0]()):t.hasVal?r(t.val):e.hasVal&&r(e.val)},[t,e]));return ug.endsOn(Qe(function(){return!0},[t.end,e.end]),r),r}),ug.transduce=eg(2,function(t,e){return t=t(new yr),Qe(function(e,r){var n=t["@@transducer/step"](void 0,e.val);return n&&n["@@transducer/reduced"]===!0?(r.end(!0),n["@@transducer/value"]):n},[e])}),ug.curryN=eg,yr.prototype["@@transducer/init"]=function(){},yr.prototype["@@transducer/result"]=function(){},yr.prototype["@@transducer/step"]=function(t,e){return e};var ag,cg,sg=ug,fg=vr,pg=l(function(t){!function(){function e(){return rt[T][U]||$}function r(t,e){for(var r in e)t.prototype[r]=e[r];return t}function n(t){return t&&"object"==typeof t}function o(t){return"function"==typeof t}function i(t,e){return t instanceof e}function u(t){return i(t,I)}function a(t,e,r){if(!e(t))throw l(r)}function c(){try{return E.apply(D,arguments)}catch(t){return X.e=t,X}}function s(t,e){return E=t,D=e,c}function f(t,e){function r(){for(var r=0;r<o;)e(n[r],n[r+1]),n[r++]=A,n[r++]=A;o=0,n.length>t&&(n.length=t)}var n=F(t),o=0;return function(t,e){n[o++]=t,n[o++]=e,2===o&&rt.nextTick(r)}}function p(t,e){var r,n,u,a,c=0;if(!t)throw l(G);var f=t[rt[T][B]];if(o(f))n=f.call(t);else{if(!o(t.next)){if(i(t,F)){for(r=t.length;c<r;)e(t[c],c++);return c}throw l(G)}n=t}for(;!(u=n.next()).done;)if(a=s(e)(u.value,c++),a===X)throw o(n[q])&&n[q](),a.e;return c}function l(t){return new TypeError(t)}function h(t){return(t?"":H)+(new I).stack}function d(t,e){var r="on"+t.toLowerCase(),n=x[r];C&&C.listeners(t).length?t===Q?C.emit(t,e._v,e):C.emit(t,e):n?n({reason:e._v,promise:e}):rt[t](e._v,e)}function y(t){return t&&t._Yaku}function v(t){if(y(t))return new t(tt);var e,r,n;return e=new t(function(t,o){if(e)throw l();r=t,n=o}),a(r,o),a(n,o),e}function g(t,e){return function(r){R&&(t[W]=h(!0)),e===N?P(t,r):j(t,e,r)}}function b(t,e,r,n){return o(r)&&(e._onFulfilled=r),o(n)&&(t[V]&&d(J,t),e._onRejected=n),R&&(e._pre=t),t[t._pCount++]=e,t._s!==k&&nt(t,e),e}function m(t){if(t._umark)return!0;t._umark=!0;for(var e,r=0,n=t._pCount;r<n;)if(e=t[r++],e._onRejected||m(e))return!0}function _(t,e){function r(t){return n.push(t.replace(/^\s+|\s+$/g,""))}var n=[];return R&&(e[W]&&r(e[W]),function t(e){e&&L in e&&(t(e._next),r(e[L]+""),t(e._pre))}(e)),(t&&t.stack?t.stack:t)+("\n"+n.join("\n")).replace(et,"")}function w(t,e){return t(e)}function j(t,e,r){var n=0,o=t._pCount;if(t._s===k)for(t._s=e,t._v=r,e===M&&(R&&u(r)&&(r.longStack=_(r,t)),ot(t));n<o;)nt(t,t[n++]);return t}function P(t,e){if(e===t&&e)return j(t,M,l(K)),t;if(e!==z&&(o(e)||n(e))){var r=s(O)(e);if(r===X)return j(t,M,r.e),t;o(r)?(R&&y(e)&&(t._next=e),y(e)?S(t,e,r):rt.nextTick(function(){S(t,e,r)})):j(t,N,e)}else j(t,N,e);return t}function O(t){return t.then}function S(t,e,r){var n=s(r,e)(function(r){e&&(e=z,P(t,r))},function(r){e&&(e=z,j(t,M,r))});n===X&&e&&(j(t,M,n.e),e=z)}var A,E,D,z=null,x="object"==typeof window?window:qr,R=!1,C=x.process,F=Array,I=Error,M=0,N=1,k=2,T="Symbol",B="iterator",U="species",$=T+"("+U+")",q="return",V="_uh",L="_pt",W="_st",Y="Invalid this",G="Invalid argument",H="\nFrom previous ",K="Chaining cycle detected for promise",Z="Uncaught (in promise)",J="rejectionHandled",Q="unhandledRejection",X={e:z},tt=function(){},et=/^.+\/node_modules\/yaku\/.+\n?/gm,rt=t.exports=function(t){var e,r=this;if(!n(r)||r._s!==A)throw l(Y);if(r._s=k,R&&(r[L]=h()),t!==tt){if(!o(t))throw l(G);e=s(t)(g(r,N),g(r,M)),e===X&&j(r,M,e.e)}};rt.default=rt,r(rt,{then:function(t,e){if(void 0===this._s)throw l();return b(this,v(rt.speciesConstructor(this,rt)),t,e)},catch:function(t){return this.then(A,t)},finally:function(t){function e(e){return rt.resolve(t()).then(function(){return e})}return this.then(e,e)},_pCount:0,_pre:z,_Yaku:1}),rt.resolve=function(t){return y(t)?t:P(v(this),t)},rt.reject=function(t){return j(v(this),M,t)},rt.race=function(t){var e=this,r=v(e),n=function(t){j(r,N,t)},o=function(t){j(r,M,t)},i=s(p)(t,function(t){e.resolve(t).then(n,o)});return i===X?e.reject(i.e):r},rt.all=function(t){function e(t){j(o,M,t)}var r,n=this,o=v(n),i=[];return r=s(p)(t,function(t,u){n.resolve(t).then(function(t){i[u]=t,--r||j(o,N,i)},e)}),r===X?n.reject(r.e):(r||j(o,N,[]),o)},rt.Symbol=x[T]||{},s(function(){Object.defineProperty(rt,e(),{get:function(){return this}})})(),rt.speciesConstructor=function(t,r){var n=t.constructor;return n?n[e()]||r:r},rt.unhandledRejection=function(t,e){try{x.console.error(Z,R?e.longStack:_(t,e))}catch(t){}},rt.rejectionHandled=tt,rt.enableLongStackTrace=function(){R=!0},rt.nextTick=C?C.nextTick:function(t){setTimeout(t)},rt._Yaku=1;var nt=f(999,function(t,e){var r,n;return n=t._s?e._onFulfilled:e._onRejected,n===A?void j(e,t._s,t._v):(r=s(w)(n,t._v),r===X?void j(e,M,r.e):void P(e,r))}),ot=f(9,function(t){m(t)||(t[V]=1,d(Q,t))})}()});ag=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},cg=function(t){var e,r,n=document.createTextNode(""),o=0;return new t(function(){var t;if(e)r&&(e=r.concat(e));else{if(!r)return;e=r}if(r=e,e=null,"function"==typeof r)return t=r,r=null,void t();for(n.data=o=++o%2;r;)t=r.shift(),r.length||(r=null),t()}).observe(n,{characterData:!0}),function(t){return ag(t),e?void("function"==typeof e?e=[e,t]:e.push(t)):(e=t,void(n.data=o=++o%2))}};var lg=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return cg(MutationObserver);if("function"==typeof WebKitMutationObserver)return cg(WebKitMutationObserver)}return"function"==typeof setImmediate?function(t){setImmediate(ag(t))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(t){setTimeout(ag(t),0)}:null}(),hg=function(){};hg.prototype.cloneDeep=Yf,hg.prototype.filter=ad,hg.prototype.values=ld,hg.prototype.forEach=md,hg.prototype.isFunction=jn,hg.prototype.isString=Od,hg.prototype.isObject=yn,hg.prototype.merge=Wy,hg.prototype.isEqual=Gy,hg.prototype.isPlainObject=Ud,hg.prototype.isArray=xi,hg.prototype.map=ev,hg.prototype.isBoolean=iv,hg.prototype.isInteger=jv,hg.prototype.uniqueId=Sv,hg.prototype.toPairs=Bv,hg.prototype.createStream=sg.stream,hg.prototype.combineStreams=sg.combine,hg.prototype.isStream=sg.isStream,hg.prototype.immediateStream=sg.immediate,hg.prototype.streamEndsOn=sg.endsOn,hg.prototype.mapStream=sg.map,hg.prototype.streamOn=sg.on,hg.prototype.scanStream=sg.scan,hg.prototype.mergeStream=sg.merge,hg.prototype.transduceStream=sg.transduce,hg.prototype.createPolymorphic=fg,hg.prototype.Promise=pg,hg.prototype.Promise.nextTick=function(t){return lg(t)},hg.prototype.createPromise=function(t,e){return new this.Promise(t,e)},hg.prototype.createAlo=function(){var t=Object.create(jb.prototype);return jb.apply(t,arguments),t};var dg=new hg,yg={get:{relation:!0},add:{relation:!0},remove:{relation:!0},relatedTo:{relation:!0},indexOf:{relation:!0},setIndexOf:{relation:!0},getId:{}},vg=function(t,e){return e=e.split(""),e[0]=e[0].toUpperCase(),e=e.join(""),t+e},gg=function(){bg.apply(this,arguments)},bg=dg.createPolymorphic();bg.signature("string, string, function",function(t,e,r){var n=this;if(""===t||""===e)throw new Error("Argument given should not be empty");this.idPropertyName="_id",this.parentName=t,this.relationName=e,this.relationByIdPropertyName="_"+e+"RelationsById",this.relationPropertyName="_"+e+"Relations",this.isRelationObject=r,this.functions={},dg.forEach(yg,function(r,o){n.functions[o]={before:[],after:[]},r.relation===!0&&(n.functions[o].parentName=vg(o,t),n.functions[o].relationName=vg(o,e))})}),gg.prototype.constructParent=function(t){if(null===t[this.idPropertyName]||void 0===t[this.idPropertyName]){var e=dg.uniqueId();t[this.idPropertyName]=e}t[this.relationByIdPropertyName]={},t[this.relationPropertyName]=[]},gg.prototype.registerParentPrototype=function(t){var e=this,r=function(t,r){return function(){var n=this,o=dg.values(arguments);o.unshift(e),dg.forEach(e.functions[t].before,function(t){t.call(n)});var i=r.apply(n,o);return dg.forEach(e.functions[t].after,function(t){t.call(n)}),i}};dg.forEach(e.functions,function(n,o){var i=o;dg.isString(n.relationName)&&""!==n.relationName&&(i=n.relationName),t[i]=r(o,e[o+"Function"])})},gg.prototype.getIdFunction=function(t){return this[t.idPropertyName]},gg.prototype.getFunction=dg.createPolymorphic();var mg=gg.prototype.getFunction;mg.signature("object, boolean b=true",function(t,e){var r=this;if(e)return this[t.relationByIdPropertyName];var n=[];return dg.forEach(this[t.relationPropertyName],function(e){n.push(mg.call(r,t,e))}),n}),mg.signature("object, string",function(t,e){if(""===e)throw new Error("Argument given should not be an empty string");return null!==this[t.relationByIdPropertyName][e]&&this[t.relationByIdPropertyName][e]}),gg.prototype.addFunction=dg.createPolymorphic();var _g=gg.prototype.addFunction;_g.signature("object, object, integer a=-1, boolean b=false",function(t,e,r,n){if(!t.isRelationObject.call(this,e))throw new Error("Argument given is not a "+t.relationName);var o=e.getId();if(!dg.isString(o)||""===o)throw new Error("Id is not a string or empty");return n!==!0&&e[t.functions.add.parentName](this,-1,!0),this[t.relationByIdPropertyName][o]=e,r>=0?this[t.relationPropertyName].splice(r,0,o):this[t.relationPropertyName].push(o),this}),_g.signature("object, array",function(t,e){var r=this;return dg.forEach(e,function(e){_g.call(r,t,e,-1)}),this}),_g.signature("object, object, object, ...",function(t,e,r,n){var o=[e,r];return _g.call(this,t,o.concat(n),-1)}),gg.prototype.removeFunction=dg.createPolymorphic();var wg=gg.prototype.removeFunction;wg.signature("object, string, boolean b=false",function(t,e,r){if(""===e)throw new Error("Argument given should not be empty");dg.isBoolean(r)&&r===!0||t.isRelationObject.call(this,this[t.relationPropertyName][e])&&this[t.relationByIdPropertyName][e][t.functions.remove.parentName](this.getId(),!0),delete this[t.relationByIdPropertyName][e];var n=this[t.relationPropertyName].indexOf(e);return n>-1&&this[t.relationPropertyName].splice(n,1),this}),wg.signature("object, object, boolean b=false",function(t,e,r){if(t.isRelationObject.call(this,e)){var n=e.getId();return wg.call(this,t,n,r)}throw new Error("Argument given is not a "+t.relationName)}),wg.signature("object",function(t){var e=this;return dg.forEach(this[t.relationPropertyName],function(r){wg.call(e,t,r)}),this}),gg.prototype.relatedToFunction=function(t,e){return jg.apply(this,arguments)>-1},gg.prototype.indexOfFunction=function(t,e){var r=null;if(dg.isString(e)||dg.isInteger(e))r=e;else{if(!t.isRelationObject.call(this,e))throw new Error("Argument given should be an id or a "+t.relationName);r=e.getId()}return this[t.relationPropertyName].indexOf(r)};var jg=gg.prototype.indexOfFunction;gg.prototype.setIndexOfFunction=function(t,e,r){if(dg.isInteger(r)){var n=null;if(dg.isString(e)||dg.isInteger(e))n=e;else{if(!t.isRelationObject.call(this,e))throw new Error("Argument given should be an id or a "+t.relationName);n=e.getId()}var o=this[t.relationPropertyName].indexOf(n);return o!==-1&&o!==r&&(delete this[t.relationPropertyName][o],this[t.relationPropertyName].splice(r,0,n)),r}throw new Error("Argument for index should be an integer")},gg.prototype.before=dg.createPolymorphic();var Pg=gg.prototype.before;Pg.signature("string, function",function(t,e){this.functions[t].before.push(e)}),gg.prototype.after=dg.createPolymorphic();var Og=gg.prototype.after;Og.signature("string, function",function(t,e){this.functions[t].after.push(e)});var Sg=new hg,Ag=new gg("subscription","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),Eg=new gg("subscription","member",function(){return this._alo.isMember.apply(this._alo,arguments)}),Dg=new gg("subscription","dependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),zg=function(){this._id=null,this._storeRelations=null,this._memberRelations=null,this._dependencyRelations=null,this._events={beforePublish:[],afterPublish:[]},this._subscriptionStream=null,this._stream=null,this._lastData=null,this._muted=!1,Ag.constructParent(this),Eg.constructParent(this),Dg.constructParent(this),xg.apply(this,arguments)},xg=Sg.createPolymorphic();xg.signature("",function(){}),xg.signature("object, array",function(t,e){this.setDependency(t),this.addMember(e)}),xg.signature("object",function(t){this.setDependency(t)}),xg.signature("array",function(t){this.addMember(t)}),xg.signature("function",function(t){this.createMember(t)}),zg.prototype.addMember=null,zg.prototype.getMember=null;var Rg=function(){var t=this;Sg.isStream(this._stream)&&(this._stream.end(!0),this._stream=null),Sg.isStream(this._subscriptionStream)&&(this._subscriptionStream.end(!0),this._subscriptionStream=null);var e=[],r=Sg.values(this.getStore());Sg.forEach(r,function(t){e.push(t.getStream())}),this._stream=Sg.combineStreams(function(){var e={};return Sg.forEach(Sg.values(arguments),function(n,o){t._alo.isStore(r[o])&&(e[r[o].getId()]=n())}),Sg.Promise.resolve().then(function(){var r=t.getDependency(!1);if(r.length>0){var n={state:e,computed:{}};return r[0].reduceRecursive(r,t.getId(),n)}return{}}).then(function(t){return{stores:e,computed:t}})},e),this._subscriptionStream=Sg.streamOn(function(e){var r=Sg.values(e.computed).length;(null===t._lastData||0===r&&!Sg.isEqual(t._lastData.stores,e.stores)||r>0&&!Sg.isEqual(t._lastData.computed,e.computed))&&(t._lastData=e,t._publish(e))},this._stream)};Ag.after("add",Rg),Ag.after("remove",Rg),Ag.registerParentPrototype(zg.prototype),Eg.registerParentPrototype(zg.prototype),Dg.registerParentPrototype(zg.prototype),zg.prototype.createMember=function(){var t=this._alo.createMember.apply(this._alo,arguments);return this.addMember(t),t},zg.prototype._callEvent=function(t,e){var r=this._events[t].map(function(t){return Sg.Promise.resolve(e).then(t)});return Sg.Promise.all(r).then(function(t){var e=t.indexOf(!1)===-1;return e})},zg.prototype._publish=function(t){var e=this;if(e._muted===!1){e._muted=!0;var r=Sg.Promise.resolve().then(function(){return e._callEvent("beforePublish",t)}).then(function(t){if(e._muted=!1,t!==!1){var r=e.getData(),n=[];return Sg.forEach(e.getMember(!1),function(t){n.push(t._call(r.stores,r.computed))}),Sg.Promise.all(n)}return!1}).then(function(r){if(r!==!1)return e._muted=!0,e._callEvent("afterPublish",t)}).then(function(){return e._muted=!1,null});return r}},zg.prototype.enable=null,zg.prototype.disable=null,zg.prototype.remember=function(){var t=this,e=t.getData();return t._publish(e)},zg.prototype.stop=function(){return this.disable(),this.removeStore(),this},zg.prototype.getStream=function(){return this._stream},zg.prototype.getData=function(){return Sg.cloneDeep(this.getStream()())},zg.prototype.createDependency=function(){var t=this._alo.createDependency.apply(this._alo,arguments);return this.addDependency(t),t},zg.prototype.on=Sg.createPolymorphic();var Cg=zg.prototype.on;Cg.signature("string, function",function(t,e){if(!Sg.isArray(this._events[t]))throw new Error("Argument type is not a valid type");var r=this._events[t].length;return this._events[t].push(e),{stop:function(){delete this._events[t][r]}}});var Fg=new hg,Ig=new gg("dependency","parentDependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),Mg=new gg("parentDependency","dependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),Ng=new gg("dependency","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),kg=new gg("dependency","subscription",function(){return this._alo.isSubscription.apply(this._alo,arguments)}),Tg=new gg("dependency","member",function(){return this._alo.isMember.apply(this._alo,arguments)}),Bg=function(){this._beforeDependencies={},this._afterDependencies={},this._cache={},Ig.constructParent(this),Mg.constructParent(this),Ng.constructParent(this),kg.constructParent(this),Tg.constructParent(this),this.add.apply(this,arguments)};Ig.registerParentPrototype(Bg.prototype),Mg.registerParentPrototype(Bg.prototype),Ng.registerParentPrototype(Bg.prototype),kg.registerParentPrototype(Bg.prototype),Tg.registerParentPrototype(Bg.prototype),Bg.prototype.get=Fg.createPolymorphic();var Ug=Bg.prototype.get;Ug.signature("string a=after",function(t){switch(t){case"before":return this._beforeDependencies;case"after":return this._afterDependencies;default:throw new Error("Argument for type should be before or after")}}),Bg.prototype.add=Fg.createPolymorphic();var $g=Bg.prototype.add;$g.signature("",function(){}),$g.signature("object, string b=after",function(t,e){var r=this;if(["before","after"].indexOf(e)===-1)throw new Error("Argument type should be before or after");return Fg.forEach(t,function(t,n){Fg.isArray(t)?r.add(n,t[0],t[1],e):r.add(n,t,e)}),this}),$g.signature("string, array, function, string a=after",function(t,e,r,n){switch(Fg.forEach(e,function(t){if(!Fg.isString(t)||""===t)throw new Error("Dependency should be a string and not empty")}),n){case"before":this._beforeDependencies[t]=[e,r];break;case"after":this._afterDependencies[t]=[e,r];break;default:throw new Error("Type should be before or after")}return this}),$g.signature("string, function, string a=after",function(t,e,r){return $g.call(this,t,[],e,r)}),Bg.prototype.remove=function(t,e){if(void 0!==e&&["before","after"].indexOf(e)===-1)throw new Error("Argument for type should be before or after");return void 0!==e&&"before"!==e||(this._beforeDependencies=!1),void 0!==e&&"after"!==e||(this._afterDependencies=!1),this},Bg.prototype.reduceRecursive=function(t,e,r){var n=this;return Fg.Promise.resolve().then(function(){if(t.length>0){var o=0,i=function(){return void 0!==t[o]?n._alo.isDependency(t[o])?Fg.Promise.resolve().then(function(){return t[o].reduce(e,r)}).then(function(t){return r.computed=t,o++,i()}):(o++,i()):r.computed};return i()}return{}})},Bg.prototype.reduce=function(t,e){var r=this;r._cache[t]=r._cache[t]||{};var n=function(t,e){var r=Fg.toPairs(t);void 0===e&&(e=[]);var n=0,i=function(){return void 0!==r[n]?Fg.Promise.resolve().then(function(){return o(e,r[n],t)}).then(function(t){return e=t,n++,i()}):e};return i()},o=function(o,i,u){var a=i[0],c=i[1][0],s=i[1][1];return o.indexOf(a)===-1?Fg.Promise.resolve().then(function(){if(c.length>0){var t=Fg.filter(c,function(t){return void 0===e.computed[t]}),r={};return Fg.forEach(t,function(t){r[t]=u[t]}),n(r,o)}return o}).then(function(n){var o=!0;return c.length>0&&(o=!1,Fg.forEach(c,function(n){if(!Fg.isEqual(e.computed[n],r._cache[t][n]))return o=!0,!1})),o?Fg.isFunction(s)?s(e.state,e.computed,e.action):null:r._cache[t][a]}).then(function(t){return void 0===t&&(t=null),e.computed[a]=t,o.push(a),o}):o},i={before:this.get("before"),after:this.get("after")};return Fg.Promise.resolve().then(function(){return n(i.before,[])}).then(function(t){var n=0,o=r.getDependency(!1),i=function(){return void 0===o[n]||(r._alo.isDependency(o[n])?Fg.Promise.resolve().then(function(){return o[n].reduce(r.getId(),e)}).then(function(t,r){return e.computed=t,n++,i()}):(n++,i()))};return i()}).then(function(){return n(i.after,[])}).then(function(){return r._cache[t]=e.computed,e.computed})};var qg=new hg,Vg=new gg("member","subscription",function(){return this._alo.isSubscription.apply(this._alo,arguments)}),Lg=new gg("member","dependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),Wg=function(){this._dependency={},this._function=null,this._enabled=!0,this._lastData=null,Vg.constructParent(this),Lg.constructParent(this),Yg.apply(this,arguments)},Yg=qg.createPolymorphic();Yg.signature("function",function(t){this.setFunction(t)}),Yg.signature("object",function(t){this.addDependency(t)}),Yg.signature("object, function",function(t,e){this.addDependency(t),this.setFunction(e)}),Vg.registerParentPrototype(Wg.prototype),Lg.registerParentPrototype(Wg.prototype),Wg.prototype._call=function(t,e){var r=this;if(this.isEnabled()){var n=r.getFunction();if(qg.isFunction(n))return qg.Promise.resolve().then(function(){var n=r.getDependency(!1);if(n.length>0){var o={state:t,computed:{}};return n[0].reduceRecursive(n,r.getId(),o)}return e}).then(function(e){var o=qg.values(e).length;(null===r._lastData||0===o||o>0&&!qg.isEqual(r._lastData,e))&&(r._lastData=e,n(t,e))})}return this},Wg.prototype.createDependency=function(){var t=this._alo.createDependency.apply(this._alo,arguments);return this.addDependency(t),t},Wg.prototype.disable=function(){return this._enabled=!1,this},Wg.prototype.enable=function(){return this._enabled=!0,this},Wg.prototype.isEnabled=function(){return this._enabled},Wg.prototype.getFunction=function(){return this._function},Wg.prototype.setFunction=function(t){if(!qg.isFunction(t))throw new Error("Argument given needs to be a function");return this._function=t,this},Wg.prototype.stop=function(){return this.disable(),this.removeSubscription(),this};var Gg=new hg,Hg={getCustomizer:{},setCustomizer:{},unsetCustomizer:{},callCustomizer:{}},Kg=["prepare","finalize"],Zg=function(t){var e=this;this.async=t===!0,this.functions={},Gg.forEach(Hg,function(t,r){e.functions[r]={after:[]}})};Zg.prototype.constructParent=function(t){t._customizers={},Gg.forEach(Kg,function(e){t._customizers[e]=!1})},Zg.prototype.registerParentPrototype=function(t){return gg.prototype.registerParentPrototype.call(this,t)},Zg.prototype.setCustomizerFunction=Gg.createPolymorphic();var Jg=Zg.prototype.setCustomizerFunction;Jg.signature("object, function, string b=finalize",function(t,e,r){if(Kg.indexOf(r)===-1)throw new Error("Argument for type is invalid");return this._customizers[r]=e,this}),Zg.prototype.unsetCustomizerFunction=function(t,e){var r=this;if(void 0!==e&&Kg.indexOf(e)===-1)throw new Error("Argument for type should be prepare or finalize");return void 0===e?Gg.forEach(this._customizers,function(t,e){r.unsetCustomizer(e)}):this._customizers[e]=!1,this},Zg.prototype.getCustomizerFunction=Gg.createPolymorphic();var Qg=Zg.prototype.getCustomizerFunction;Qg.signature("object, string a=finalize",function(t,e){if(Kg.indexOf(e)===-1)throw new Error("Argument for type is invalid");return this._customizers[e]}),Zg.prototype.callCustomizerFunction=function(t,e){if(!Gg.isString(e))throw new Error("Argument for type should be a string");var r=this.getCustomizer(e);if(Gg.isFunction(r)){var n=Gg.values(arguments);if(n.length<=2)throw new Error("Atleast two arguments are required");return n=n.slice(2),t.async===!0?Gg.Promise.resolve().then(function(){return r.apply(null,n)}):r.apply(null,n)}};var Xg=new hg,tb=new Zg(!1),eb=new gg("reducer","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),rb=new gg("reducer","parentReducer",function(){return this._alo.isReducer.apply(this._alo,arguments)}),nb=new gg("parentReducer","reducer",function(){return this._alo.isReducer.apply(this._alo,arguments)}),ob=function(){this._enabled=!0,this._id=null,this._reducerRelations=null,this._storeRelations=null,tb.constructParent(this),eb.constructParent(this),rb.constructParent(this),nb.constructParent(this),ib.apply(this,arguments)},ib=Xg.createPolymorphic();ib.signature("",function(){}),ib.signature("function",function(t){this.setCustomizer(t,"prepare")}),ib.signature("array",function(t){this.addReducer(t)}),ib.signature("function, function",function(t,e){this.setCustomizer(t,"prepare"),this.setCustomizer(e)}),ib.signature("function, array",function(t,e){this.setCustomizer(t,"prepare"),this.addReducer(e)}),ib.signature("function, function, array",function(t,e,r){this.setCustomizer(t,"prepare"),this.setCustomizer(e),this.addReducer(r)}),ob.prototype.getId=null,ob.prototype.addStore=null,ob.prototype.removeStore=null,tb.registerParentPrototype(ob.prototype),eb.registerParentPrototype(ob.prototype),rb.registerParentPrototype(ob.prototype),nb.registerParentPrototype(ob.prototype),ob.prototype.createReducer=function(){var t=this._alo.createReducer.apply(this._alo,arguments);return this.addReducer(t),t},ob.prototype.reduce=function(t,e){if(this.isEnabled()){var r=this.callCustomizer("prepare",Xg.cloneDeep(t),e);void 0!==r&&(t=r),Xg.forEach(this.getReducer(!1),function(r){t=r.reduce(Xg.cloneDeep(t),e)}),r=this.callCustomizer("finalize",Xg.cloneDeep(t),e),void 0!==r&&(t=r)}return t},ob.prototype.disable=function(){return this._enabled=!1,this},ob.prototype.enable=function(){return this._enabled=!0,this},ob.prototype.isEnabled=function(){return this._enabled},ob.prototype.stop=function(){return this.removeStore(),this.disable(),this};var ub=new hg,ab=function(t,e){return function(r){if(t(r))return!0;throw new Error("Type of argument should be a "+e)}},cb=function(t){return ab(ub.isString,"string")(t)},sb=new hg,fb=new gg("store","reducer",function(){return this._alo.isReducer.apply(this._alo,arguments)}),pb=new gg("store","subscription",function(){return this._alo.isSubscription.apply(this._alo,arguments)}),lb=new gg("store","middleware",function(){return this._alo.isMiddleware.apply(this._alo,arguments)}),hb=new gg("store","computedProperty",function(){return this._alo.isDependency.apply(this._alo,arguments)}),db=function(t,e){void 0!==t&&null!==t||(t={}),t={state:t,computed:{},action:{type:null,payload:null}},this._id=null,null!=e&&cb(e)&&(e=e.trim(),""!==e&&(this._id=e)),this._stream=sb.createStream(t),this._reducerRelations=null,this._middlewareRelations=null,this._subscriptionRelations=null,this._computedProperty={},fb.constructParent(this),lb.constructParent(this),pb.constructParent(this),hb.constructParent(this)};db.prototype.getId=null,db.prototype.getReducer=null,db.prototype.addReducer=null,db.prototype.removeReducer=null,db.prototype.getMiddleware=null,db.prototype.addMiddleware=null,db.prototype.getSubscription=null,db.prototype.addSubscription=null,db.prototype.removeSubscription=null,fb.registerParentPrototype(db.prototype),lb.registerParentPrototype(db.prototype),pb.registerParentPrototype(db.prototype),hb.registerParentPrototype(db.prototype),db.prototype.createReducer=function(){var t=this._alo.createReducer.apply(this._alo,arguments);return this.addReducer(t),t},db.prototype.mapState=function(t){if(sb.isFunction(t))return sb.map(this.getState(),t);throw new Error("Argument given should be a function")},db.prototype.mapData=function(t){if(sb.isFunction(t))return sb.map(this.getData(),t);throw new Error("Argument given should be a function")},db.prototype.mapStream=function(t){if(sb.isFunction(t))return sb.mapStream(t,this.getStream());throw new Error("Argument given should be a function")},db.prototype.getStream=function(){return this._stream},db.prototype.getData=function(){return sb.cloneDeep(this.getStream()())},db.prototype.getState=function(){return this.getData().state},db.prototype.createComputedProperty=function(){var t=this._alo.createDependency.apply(this._alo,arguments);return this.addComputedProperty(t),t},db.prototype.createSubscription=function(){var t=this._alo.createSubscription.apply(this._alo,arguments);return this.addSubscription(t),t},db.prototype.subscribe=db.prototype.createSubscription,db.prototype.dispatch=function(){var t=this,e=sb.values(arguments),r=function(t){return void 0===t.type&&(t.type=null),void 0===t.payload&&(t.payload=null),t};return sb.Promise.resolve().then(function(){var r=t.getMiddleware(!1);return r.length>0&&t._alo.isMiddleware(r[0])?(e.unshift(t),sb.Promise.resolve().then(function(){return r[0].meddleRecursive(r,e)}).then(function(t){return sb.isArray(t)?t[0]:t})):e[0]}).then(function(e){if(sb.isPlainObject(e)){e=r(e);var n=t.getData(),o=n.state;return sb.forEach(t.getReducer(!1),function(r){t._alo.isReducer(r)&&(o=r.reduce(sb.cloneDeep(o),e))}),o={state:o,computed:{},action:e},sb.Promise.resolve().then(function(){var e=t.getComputedProperty(!1);return e.length>0?e[0].reduceRecursive(e,t.getId(),sb.cloneDeep(o)):o.computed}).then(function(e){o.computed=e;var r=t.getStream();r(o)})}return!1})};var yb=new hg,vb=new Zg(!0),gb=new gg("middleware","parentMiddleware",function(){return this._alo.isMiddleware.apply(this._alo,arguments)}),bb=new gg("parentMiddleware","middleware",function(){return this._alo.isMiddleware.apply(this._alo,arguments)}),mb=new gg("middleware","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),_b=function(){vb.constructParent(this),gb.constructParent(this),bb.constructParent(this),mb.constructParent(this),vb.constructParent(this),wb.apply(this,arguments)},wb=yb.createPolymorphic();wb.signature("",function(){}),wb.signature("function",function(t){this.setCustomizer(t,"prepare")}),wb.signature("array",function(t){this.addMiddleware(t)}),wb.signature("function, function",function(t,e){this.setCustomizer(t,"prepare"),this.setCustomizer(e)}),wb.signature("function, array",function(t,e){this.setCustomizer(t,"prepare"),this.addMiddleware(e)}),wb.signature("function, function, array",function(t,e,r){this.setCustomizer(t,"prepare"),this.setCustomizer(e),this.addMiddleware(r)}),vb.registerParentPrototype(_b.prototype),
gb.registerParentPrototype(_b.prototype),bb.registerParentPrototype(_b.prototype),mb.registerParentPrototype(_b.prototype),_b.prototype.createMiddleware=function(){var t=this._alo.createMiddleware.apply(this._alo,arguments);return this.addMiddleware(t),t},_b.prototype.meddleRecursive=function(t,e){var r=this;e=yb.values(e);var n=e[0];if(yb.isArray(t))return 0===t.length?e.slice(1):yb.Promise.resolve().then(function(){return r._alo.isMiddleware(t[0])?t[0].meddle(e):e.slice(1)}).then(function(o){return o=yb.values(o),void 0===o[0]?o=e:o.unshift(n),e=o,t=t.slice(1),r.meddleRecursive(t,o)});throw new Error("Argument given should be an array")},_b.prototype.meddle=function(t){var e=this;t=yb.values(t);var r=t[0];t=t.slice(1);var n=function(e){return void 0===e?e=t:yb.isArray(e)||(e=[e]),t=yb.cloneDeep(e),e};return yb.Promise.resolve().then(function(){var n=yb.cloneDeep(t);return n.unshift(r),n.unshift("prepare"),e.callCustomizer.apply(e,n)}).then(function(t){return yb.Promise.all(n(t))}).then(function(t){return t.unshift(r),e.meddleRecursive(e.getMiddleware(!1),t)}).then(function(t){return yb.Promise.all(n(t))}).then(function(t){return t.unshift(r),t.unshift("finalize"),e.callCustomizer.apply(e,t)}).then(function(t){return yb.Promise.all(n(t))}).then(function(t){return t})};var jb=function(t){this.util=new hg,this._id=this.util.isString(t)&&""!==t?t:this.util.uniqueId()};jb.prototype.createSubscription=function(){var t=Object.create(zg.prototype);return t._alo=this,zg.apply(t,arguments),t},jb.prototype.isSubscription=function(t){return t instanceof zg},jb.prototype.createDependency=function(){var t=Object.create(Bg.prototype);return t._alo=this,Bg.apply(t,arguments),t},jb.prototype.isDependency=function(t){return t instanceof Bg},jb.prototype.createMember=function(){var t=Object.create(Wg.prototype);return t._alo=this,Wg.apply(t,arguments),t},jb.prototype.isMember=function(t){return t instanceof Wg},jb.prototype.createReducer=function(){var t=Object.create(ob.prototype);return t._alo=this,ob.apply(t,arguments),t},jb.prototype.isReducer=function(t){return t instanceof ob},jb.prototype.createStore=function(){var t=Object.create(db.prototype);return t._alo=this,db.apply(t,arguments),t},jb.prototype.isStore=function t(e,r){r=r===!0;var t=e instanceof db,n=!r||e._alo&&e._alo._id===this._id;return t&&n},jb.prototype.isMiddleware=function(t){return t instanceof _b},jb.prototype.createMiddleware=function(){var t=Object.create(_b.prototype);return t._alo=this,_b.apply(t,arguments),t};var Pb=new jb,Ob={};Ob.createUntypedReplace=function(){var t=function(t,e){return void 0!==e.type&&null!==e.type&&""!==e.type||void 0===e.payload?t:e.payload};return Pb.createReducer(t)};var Sb=new jb,Ab=Sb.util,Eb={};Eb.createThunk=function(){var t=Sb.createMiddleware(function(){var t=Ab.values(arguments),e=t[1],r=function(t){var e=t[1];return t.splice(1,1),Ab.Promise.resolve().then(function(){return e.apply(null,t)}).then(function(e){return Ab.isFunction(e)?(t.splice(1,0,e),r(t)):(t.splice(0,1,e),t)})};return Ab.isFunction(e)?r(t):(t.splice(0,1),t)});return t};var Db={};Db.reducers=Ob,Db.middlewares=Eb;var zb=function(t){var e=function(t){function e(e){t.call(this,e),this.extras=Db}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return e},xb=zb(jb);return xb});
//# sourceMappingURL=./dist/alo.full.min.js.map