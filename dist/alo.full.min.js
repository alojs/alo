!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("alo",t):e.Alo=t()}(this,function(){"use strict";function listCacheClear$1(){this.__data__=[],this.size=0}function eq$1(e,t){return e===t||e!==e&&t!==t}function assocIndexOf$1(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}function listCacheDelete$1(e){var t=this.__data__,r=o(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():a.call(t,r,1),--this.size,!0}function listCacheGet$1(e){var t=this.__data__,r=s(t,e);return r<0?void 0:t[r][1]}function listCacheHas$1(e){return p(this.__data__,e)>-1}function listCacheSet$1(e,t){var r=this.__data__,n=f(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function ListCache$1(e){var t=this,r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var o=e[r];t.set(o[0],o[1])}}function stackClear$1(){this.__data__=new _,this.size=0}function stackDelete$1(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function stackGet$1(e){return this.__data__.get(e)}function stackHas$1(e){return this.__data__.has(e)}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}function getRawTag$1(e){var t=x.call(e,N),r=e[N];try{e[N]=void 0;var n=!0}catch(e){}var o=z.call(e);return n&&(t?e[N]=r:delete e[N]),o}function objectToString$1(e){return q.call(e)}function baseGetTag$1(e){return null==e?void 0===e?W:G:X&&X in Object(e)?V(e):K(e)}function isObject$3(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isFunction$1(e){if(!Q(e))return!1;var t=J(e);return t==te||t==re||t==ee||t==ne}function isMasked$1(e){return!!ce&&ce in e}function toSource$1(e){if(null!=e){try{return fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function baseIsNative$1(e){if(!ve(e)||de(e))return!1;var t=ye(e)?Pe:ge;return t.test(be(e))}function getValue$1(e,t){return null==e?void 0:e[t]}function getNative$1(e,t){var r=Ce(e,t);return Ae(r)?r:void 0}function hashClear$1(){this.__data__=xe?xe(null):{},this.size=0}function hashDelete$1(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hashGet$1(e){var t=this.__data__;if(Be){var r=t[e];return r===Le?void 0:r}return Ue.call(t,e)?t[e]:void 0}function hashHas$1(e){var t=this.__data__;return Ve?void 0!==t[e]:Ge.call(t,e)}function hashSet$1(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Xe&&void 0===t?Ye:t,this}function Hash$1(e){var t=this,r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var o=e[r];t.set(o[0],o[1])}}function mapCacheClear$1(){this.size=0,this.__data__={hash:new ot,map:new(at||it),string:new ot}}function isKeyable$1(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData$1(e,t){var r=e.__data__;return ct(t)?r["string"==typeof t?"string":"hash"]:r.map}function mapCacheDelete$1(e){var t=lt(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet$1(e){return ht(this,e).get(e)}function mapCacheHas$1(e){return dt(this,e).has(e)}function mapCacheSet$1(e,t){var r=bt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function MapCache$1(e){var t=this,r=-1,n=null==e?0:e.length;for(this.clear();++r<n;){var o=e[r];t.set(o[0],o[1])}}function stackSet$1(e,t){var r=this.__data__;if(r instanceof St){var n=r.__data__;if(!Ot||n.length<Ct-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new At(n)}return r.set(e,t),this.size=r.size,this}function Stack$1(e){var t=this.__data__=new Dt(e);this.size=t.size}function arrayEach$1(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function baseAssignValue$1(e,t,r){"__proto__"==t&&Lt?Lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function assignValue$1(e,t,r){var n=e[t];Kt.call(e,t)&&Ht(n,r)&&(void 0!==r||t in e)||Ut(e,t,r)}function copyObject$1(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var u=t[i],s=n?n(r[u],e[u],u,r,e):void 0;void 0===s&&(s=e[u]),o?Xt(r,u,s):Wt(r,u,s)}return r}function baseTimes$1(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function isObjectLike$2(e){return null!=e&&"object"==typeof e}function baseIsArguments$1(e){return er(e)&&Qt(e)==tr}function stubFalse(){return!1}function isIndex$1(e,t){return t=null==t?yr:t,!!t&&("number"==typeof e||dr.test(e))&&e>-1&&e%1==0&&e<t}function isLength$1(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=br}function baseIsTypedArray$1(e){return $r(e)&&_r(e.length)&&!!Kr[gr(e)]}function baseUnary$1(e){return function(t){return e(t)}}function arrayLikeKeys$1(e,t){var r=on(e),n=!r&&nn(e),o=!r&&!n&&an(e),i=!r&&!n&&!o&&sn(e),a=r||n||o||i,u=a?rn(e.length,String):[],s=u.length;for(var c in e)!t&&!pn.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||un(c,s))||u.push(c);return u}function isPrototype$1(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||fn;return e===r}function overArg$1(e,t){return function(r){return e(t(r))}}function baseKeys$1(e){if(!mn(e))return gn(e);var t=[];for(var r in Object(e))$n.call(e,r)&&"constructor"!=r&&t.push(r);return t}function isArrayLike$1(e){return null!=e&&Pn(e.length)&&!wn(e)}function keys$2(e){return Cn(e)?On(e):An(e)}function baseAssign$1(e,t){return e&&Dn(t,In(t),e)}function nativeKeysIn$1(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}function baseKeysIn$1(e){if(!Fn(e))return Rn(e);var t=kn(e),r=[];for(var n in e)("constructor"!=n||!t&&zn.call(e,n))&&r.push(n);return r}function keysIn$2(e){return qn(e)?Bn(e,!0):Ln(e)}function baseAssignIn$1(e,t){return e&&Hn(t,Vn(t),e)}function copyArray$1(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function arrayFilter$1(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function stubArray$1(){return[]}function copySymbols$1(e,t){return oo(e,io(e),t)}function arrayPush$1(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function copySymbolsIn$1(e,t){return go(e,_o(e),t)}function baseGetAllKeys$1(e,t,r){var n=t(e);return wo(e)?n:jo(n,r(e))}function getAllKeys$1(e){return So(e,Ao,Oo)}function getAllKeysIn$1(e){return Eo(e,Io,Do)}function initCloneArray$1(e){var t=e.length,r=e.constructor(t);return t&&"string"==typeof e[0]&&vi.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function cloneArrayBuffer$1(e){var t=new e.constructor(e.byteLength);return new $i(t).set(new $i(e)),t}function cloneDataView$1(e,t){var r=t?wi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function addMapEntry$1(e,t){return e.set(t[0],t[1]),e}function arrayReduce$1(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function mapToArray$1(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function cloneMap$1(e,t,r){var n=t?r(Di(e),Ii):Di(e);return Ei(n,Ci,new e.constructor)}function cloneRegExp$1(e){var t=new e.constructor(e.source,Mi.exec(e));return t.lastIndex=e.lastIndex,t}function addSetEntry$1(e,t){return e.add(t),e}function setToArray$1(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function cloneSet$1(e,t,r){var n=t?r(Ni(e),Bi):Ni(e);return zi(n,xi,new e.constructor)}function cloneSymbol$1(e){return Hi?Object(Hi.call(e)):{}}function cloneTypedArray$1(e,t){var r=t?Ki(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function initCloneByTag$1(e,t,r,n){var o=e.constructor;switch(t){case ca:return Wi(e);case ta:case ra:return new o(+e);case pa:return Xi(e,n);case la:case fa:case ha:case ya:case da:case va:case ba:case ma:case ga:return ea(e,n);case na:return Yi(e,n,r);case oa:case ua:return new o(e);case ia:return Zi(e);case aa:return Ji(e,n,r);case sa:return Qi(e)}}function initCloneObject$1(e){return"function"!=typeof e.constructor||Aa(e)?{}:Sa(Oa(e))}function baseClone$1(e,t,r,n,o,i){var a,u=t&Wa,s=t&Xa,c=t&Ya;if(r&&(a=o?r(e,n,o,i):r(e)),void 0!==a)return a;if(!Ka(e))return e;var p=Ha(e);if(p){if(a=La(e),!u)return ka(e,a)}else{var l=Ba(e),f=l==ru||l==nu;if(Va(e))return Fa(e,u);if(l==au||l==Za||f&&!o){if(a=s||f?{}:Ua(e),!u)return s?xa(e,Ma(a,e)):Ra(e,Ta(a,e))}else{if(!wu[l])return o?e:{};a=qa(e,l,baseClone$1,u)}}i||(i=new Ea);var h=i.get(e);if(h)return h;i.set(e,a);var y=c?s?Na:za:s?keysIn:Ga,d=p?void 0:y(e);return Da(d||e,function(n,o){d&&(o=n,n=e[o]),Ia(a,o,baseClone$1(n,t,r,o,e,i))}),a}function cloneDeep(e){return Su(e,Ou|Au)}function createBaseFor$1(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),u=a.length;u--;){var s=a[e?u:++o];if(r(i[s],s,i)===!1)break}return t}}function baseForOwn$1(e,t){return e&&Mu(e,t,Fu)}function createBaseEach$1(e,t){return function(r,n){if(null==r)return r;if(!Ru(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Object(r);(t?i--:++i<o)&&n(a[i],i,a)!==!1;);return r}}function baseFilter$1(e,t){var r=[];return qu(e,function(e,n,o){t(e,n,o)&&r.push(e)}),r}function setCacheAdd$1(e){return this.__data__.set(e,Hu),this}function setCacheHas$1(e){return this.__data__.has(e)}function SetCache$1(e){var t=this,r=-1,n=null==e?0:e.length;for(this.__data__=new Gu;++r<n;)t.add(e[r])}function arraySome$1(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function cacheHas$1(e,t){return e.has(t)}function equalArrays$1(e,t,r,n,o,i){var a=r&rs,u=e.length,s=t.length;if(u!=s&&!(a&&s>u))return!1;var c=i.get(e);if(c&&i.get(t))return c==t;var p=-1,l=!0,f=r&ns?new Qu:void 0;for(i.set(e,t),i.set(t,e);++p<u;){var h=e[p],y=t[p];if(n)var d=a?n(y,h,p,t,e,i):n(h,y,p,e,t,i);if(void 0!==d){if(d)continue;l=!1;break}if(f){if(!es(t,function(e,t){if(!ts(f,t)&&(h===e||o(h,e,r,n,i)))return f.push(t)})){l=!1;break}}else if(h!==y&&!o(h,y,r,n,i)){l=!1;break}}return i.delete(e),i.delete(t),l}function equalByTag$1(e,t,r,n,o,i,a){switch(r){case ws:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case js:return!(e.byteLength!=t.byteLength||!i(new as(e),new as(t)));case hs:case ys:case bs:return us(+e,+t);case ds:return e.name==t.name&&e.message==t.message;case ms:case _s:return e==t+"";case vs:var u=cs;case gs:var s=n&ls;if(u||(u=ps),e.size!=t.size&&!s)return!1;var c=a.get(e);if(c)return c==t;n|=fs,a.set(e,t);var p=ss(u(e),u(t),n,o,i,a);return a.delete(e),p;case $s:if(Ss)return Ss.call(e)==Ss.call(t)}return!1}function equalObjects$1(e,t,r,n,o,i){var a=r&Cs,u=As(e),s=u.length,c=As(t),p=c.length;if(s!=p&&!a)return!1;for(var l=s;l--;){var f=u[l];if(!(a?f in t:Ds.call(t,f)))return!1}var h=i.get(e);if(h&&i.get(t))return h==t;var y=!0;i.set(e,t),i.set(t,e);for(var d=a;++l<s;){f=u[l];var v=e[f],b=t[f];if(n)var m=a?n(b,v,f,t,e,i):n(v,b,f,e,t,i);if(!(void 0===m?v===b||o(v,b,r,n,i):m)){y=!1;break}d||(d="constructor"==f)}if(y&&!d){var g=e.constructor,_=t.constructor;g!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _)&&(y=!1)}return i.delete(e),i.delete(t),y}function baseIsEqualDeep$1(e,t,r,n,o,i){var a=xs(e),u=xs(t),s=a?qs:Rs(e),c=u?qs:Rs(t);s=s==Ls?Us:s,c=c==Ls?Us:c;var p=s==Us,l=c==Us,f=s==c;if(f&&zs(e)){if(!zs(t))return!1;a=!0,p=!1}if(f&&!p)return i||(i=new Ts),a||Ns(e)?Ms(e,t,r,n,o,i):Fs(e,t,s,r,n,o,i);if(!(r&Bs)){var h=p&&Vs.call(e,"__wrapped__"),y=l&&Vs.call(t,"__wrapped__");if(h||y){var d=h?e.value():e,v=y?t.value():t;return i||(i=new Ts),o(d,v,r,n,i)}}return!!f&&(i||(i=new Ts),ks(e,t,r,n,o,i))}function baseIsEqual$1(e,t,r,n,o){return e===t||(null==e||null==t||!Ws(e)&&!Ws(t)?e!==e&&t!==t:Gs(e,t,r,n,baseIsEqual$1,o))}function baseIsMatch$1(e,t,r,n){var o=r.length,i=o,a=!n;if(null==e)return!i;for(e=Object(e);o--;){var u=r[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){u=r[o];var s=u[0],c=e[s],p=u[1];if(a&&u[2]){if(void 0===c&&!(s in e))return!1}else{var l=new Ys;if(n)var f=n(c,p,s,e,t,l);if(!(void 0===f?Zs(p,c,Js|Qs,n,l):f))return!1}}return!0}function isStrictComparable$1(e){return e===e&&!tc(e)}function getMatchData$1(e){for(var t=oc(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,nc(o)]}return t}function matchesStrictComparable$1(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function baseMatches$1(e){var t=sc(e);return 1==t.length&&t[0][2]?cc(t[0][0],t[0][1]):function(r){return r===e||uc(r,e,t)}}function isSymbol$1(e){return"symbol"==typeof e||fc(e)&&lc(e)==hc}function isKey$2(e,t){if(dc(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!vc(e))||(mc.test(e)||!bc.test(e)||null!=t&&e in Object(t))}function memoize$1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError($c);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(memoize$1.Cache||_c),r}function memoizeCapped$1(e){var t=Pc(e,function(e){return r.size===Sc&&r.clear(),e}),r=t.cache;return t}function arrayMap$1(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function baseToString$1(e){if("string"==typeof e)return e;if(Rc(e))return kc(e,baseToString$1)+"";if(xc(e))return Bc?Bc.call(e):"";var t=e+"";return"0"==t&&1/e==-zc?"-0":t}function toString$1(e){return null==e?"":qc(e)}function castPath$1(e,t){return Hc(e)?e:Vc(e,t)?[e]:Kc(Gc(e))}function toKey$2(e){if("string"==typeof e||Xc(e))return e;var t=e+"";return"0"==t&&1/e==-Yc?"-0":t}function baseGet$1(e,t){t=Jc(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[Qc(t[r++])];return r&&r==n?e:void 0}function get$1(e,t,r){var n=null==e?void 0:tp(e,t);return void 0===n?r:n}function baseHasIn$1(e,t){return null!=e&&t in Object(e)}function hasPath$1(e,t,r){t=op(t,e);for(var n=-1,o=t.length,i=!1;++n<o;){var a=pp(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:(o=null==e?0:e.length,!!o&&cp(o)&&sp(a,o)&&(up(e)||ip(e)))}function hasIn$1(e,t){return null!=e&&hp(e,t,fp)}function baseMatchesProperty$1(e,t){return mp(e)&&gp(t)?_p($p(e),t):function(r){var n=vp(r,e);return void 0===n&&n===t?bp(r,e):dp(t,n,jp|wp)}}function identity$1(e){return e}function baseProperty$1(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep$1(e){return function(t){return Ap(t,e)}}function property$1(e){return Ip(e)?Ep(Tp(e)):Dp(e)}function baseIteratee$1(e){return"function"==typeof e?e:null==e?Rp:"object"==typeof e?xp(e)?kp(e[0],e[1]):Fp(e):zp(e)}function filter(e,t){var r=Up(e)?Bp:Lp;return r(e,qp(t,3))}function baseValues$1(e,t){return Vp(t,function(t){return e[t]})}function values(e){return null==e?[]:Gp(e,Wp(e))}function castFunction$1(e){return"function"==typeof e?e:Yp}function forEach(e,t){var r=tl(e)?Jp:Qp;return r(e,el(t))}function isString(e){return"string"==typeof e||!ol(e)&&il(e)&&nl(e)==al}function assignMergeValue$1(e,t,r){(void 0===r||cl(e[t],r))&&(void 0!==r||t in e)||sl(e,t,r)}function isArrayLikeObject$1(e){return fl(e)&&ll(e)}function isPlainObject$1(e){if(!vl(e)||yl(e)!=bl)return!1;var t=dl(e);if(null===t)return!0;var r=$l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&_l.call(r)==jl}function toPlainObject$1(e){return Pl(e,Sl(e))}function baseMergeDeep$1(e,t,r,n,o,i,a){var u=e[r],s=t[r],c=a.get(s);if(c)return void Al(e,r,c);var p=i?i(u,s,r+"",e,t,a):void 0,l=void 0===p;if(l){var f=Ml(s),h=!f&&kl(s),y=!f&&!h&&Nl(s);p=s,f||h||y?Ml(u)?p=u:Fl(u)?p=Dl(u):h?(l=!1,p=Cl(s,!0)):y?(l=!1,p=El(s,!0)):p=[]:zl(s)||Tl(s)?(p=u,Tl(u)?p=Bl(u):(!xl(u)||n&&Rl(u))&&(p=Il(s))):l=!1}l&&(a.set(s,p),o(p,s,n,i,a),a.delete(s)),Al(e,r,p)}function baseMerge$1(e,t,r,n,o){e!==t&&Hl(t,function(i,a){if(Kl(i))o||(o=new ql),Vl(e,t,a,r,baseMerge$1,n,o);else{var u=n?n(e[a],i,a+"",e,t,o):void 0;void 0===u&&(u=i),Ul(e,a,u)}},Gl)}function apply$1(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function overRest$1(e,t,r){return t=Zl(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Zl(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=r(a),Yl(e,this,u)}}function constant$1(e){return function(){return e}}function shortOut$1(e){var t=0,r=0;return function(){var n=sf(),o=uf-(n-r);if(r=n,o>0){if(++t>=af)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function baseRest$1(e,t){return vf(df(e,t,yf),e+"")}function isIterateeCall$1(e,t,r){if(!$f(r))return!1;var n=typeof t;return!!("number"==n?gf(r)&&_f(t,r.length):"string"==n&&t in r)&&mf(r[t],e)}function createAssigner$1(e){return wf(function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&Pf(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var u=r[n];u&&e(t,u,n,i)}return t})}function isEqual(e,t){return Df(e,t)}function baseMap$1(e,t){var r=-1,n=Mf(e)?Array(e.length):[];return Tf(e,function(e,o,i){n[++r]=t(e,o,i)}),n}function map(e,t){var r=zf(e)?kf:xf;return r(e,Rf(t,3))}function isBoolean(e){return e===!0||e===!1||Lf(e)&&Bf(e)==qf}function toNumber$1(e){if("number"==typeof e)return e;if(Vf(e))return Kf;if(Hf(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Hf(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Gf,"");var r=Xf.test(e);return r||Yf.test(e)?Zf(e.slice(2),r?2:8):Wf.test(e)?Kf:+e}function toFinite$1(e){if(!e)return 0===e?e:0;if(e=Qf(e),e===eh||e===-eh){var t=e<0?-1:1;return t*th}return e===e?e:0}function toInteger$1(e){var t=nh(e),r=t%1;return t===t?r?t-r:t:0}function isInteger(e){return"number"==typeof e&&e==ih(e)}function uniqueId(e){var t=++sh;return uh(e)+t}function baseToPairs$1(e,t){return ph(t,function(t){return[t,e[t]]})}function setToPairs$1(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}function createToPairs$1(e){return function(t){var r=yh(t);return r==bh?dh(t):r==mh?vh(t):hh(t,e(t))}}function isFunction$5(e){return!!(e&&e.constructor&&e.call&&e.apply)}function trueFn(){return!0}function combine(e,t){var r,n,o,i,a=createDependentStream([],trueFn);for(o=[],i=[],r=0;r<t.length;++r)void 0!==t[r]&&(o.push(t[r]),void 0!==t[r].end&&i.push(t[r].end));return n=createDependentStream(o,e),n.depsChanged=[],n.fnArgs=n.deps.concat([n,n.depsChanged]),n.end=a,a.listeners.push(n),addListeners(i,a),a.deps=i,updateStream(n),n}function boundMap(e){return Hh.map(e,this)}function ap(e){var t=this;return combine(function(e,t,r){r(e.val(t.val))},[t,e])}function streamToString(){return"stream("+this.val+")"}function createStream(){function s(e){return 0===arguments.length?s.val:(updateStreamValue(s,e),s)}return s.hasVal=!1,s.val=void 0,s.vals=[],s.listeners=[],s.queued=!1,s.end=void 0,s.map=boundMap,s.ap=ap,s.of=Hh.stream,s.toString=streamToString,s}function createDependentStream(e,t){var r=createStream();return r.fn=t,r.deps=e,r.depsMet=!1,r.depsChanged=e.length>0?[]:void 0,r.shouldUpdate=!1,addListeners(e,r),r}function initialDepsNotMet(e){return e.depsMet=e.deps.every(function(e){return e.hasVal}),!e.depsMet}function updateStream(e){if(!(e.depsMet!==!0&&initialDepsNotMet(e)||void 0!==e.end&&e.end.val===!0)){if(void 0!==jc)return void Bh.push(e);jc=e,e.depsChanged&&(e.fnArgs[e.fnArgs.length-1]=e.depsChanged);var t=e.fn.apply(e.fn,e.fnArgs);void 0!==t&&e(t),jc=void 0,void 0!==e.depsChanged&&(e.depsChanged=[]),e.shouldUpdate=!1,Uh===!1&&flushUpdate()}}function updateDeps(e){var t,r,n,o=e.listeners;for(t=0;t<o.length;++t)n=o[t],n.end===e?endStream(n):(void 0!==n.depsChanged&&n.depsChanged.push(e),n.shouldUpdate=!0,findDeps(n));for(;qh>=0;--qh)r=Lh[qh],r.shouldUpdate===!0&&updateStream(r),r.queued=!1}function findDeps(e){var t,r=e.listeners;if(e.queued===!1){for(e.queued=!0,t=0;t<r.length;++t)findDeps(r[t]);Lh[++qh]=e}}function flushUpdate(){for(Uh=!0;Bh.length>0;){var e=Bh.shift();e.vals.length>0&&(e.val=e.vals.shift()),updateDeps(e)}Uh=!1}function updateStreamValue(e,t){return void 0!==t&&null!==t&&isFunction$5(t.then)?void t.then(e):(e.val=t,e.hasVal=!0,void(void 0===jc?(Uh=!0,updateDeps(e),Bh.length>0?flushUpdate():Uh=!1):jc===e?markListeners(e,e.listeners):(e.vals.push(t),Bh.push(e))))}function markListeners(e,t){var r,n;for(r=0;r<t.length;++r)n=t[r],n.end!==e?(void 0!==n.depsChanged&&n.depsChanged.push(e),n.shouldUpdate=!0):endStream(n)}function addListeners(e,t){for(var r=0;r<e.length;++r)e[r].listeners.push(t)}function removeListener(e,t){var r=t.indexOf(e);t[r]=t[t.length-1],t.length--}function detachDeps(e){for(var t=0;t<e.deps.length;++t)removeListener(e,e.deps[t].listeners);e.deps.length=0}function endStream(e){void 0!==e.deps&&detachDeps(e),void 0!==e.end&&detachDeps(e.end)}function StreamTransformer(){}function polymorphic(){function isExtendOf(e,t){for(var r="object"==typeof t&&t?Object.getPrototypeOf(t):null,n=r?new RegExp("^"+e+"$"):null;r&&r.constructor;){if(n.test(r.constructor.name))return!0;r=Object.getPrototypeOf(r)}return!1}function parameterize(e){return e.param=e.param.map(function(t){var r;return"value"in t?r=t.value:"reference"in t&&(r=e.param.reduce(function(e,r){return r!==t&&!e&&t.reference===r.name&&"value"in r?r.value:e},null)),r}),e}function matchSignature(e,t){var r=t.map(function(e){return new RegExp("^("+type(e)+")")});return e.filter(function(e){var n,o=!1;return n=t.length<=e.arguments.length||e.arguments[e.arguments.length-1]&&"..."===e.arguments[e.arguments.length-1].type,n&&t.forEach(function(t,i){var a=e.arguments[i]?e.arguments[i].type:null;isTypeAtIndex("...",e.arguments,i)&&(o=!0),n=n&&(o||r[i].test(a)||"!"!==a[a.length-1]&&isExtendOf(a,t))}),n})}function prepare(e,t){return e.map(function(e){var r={call:e.call,arguments:e.arguments,specificity:e.arguments.map(function(e,r){var n="value"in e,o=0;return"..."!==e.type&&r<t.length&&(++o,Number(e.type===type(t[r],!0)||isExtendOf(e.type,t[r])||!n)&&++o,"!"===e.type[e.type.length-1]&&type(t[r],!0)&&++o),o}).join(""),param:e.arguments.map(function(e,r){var n={};return n.name=e.name,"..."===e.type?n.value=t.slice(r):r<t.length&&"undefined"!=typeof t[r]&&null!==t[r]?n.value=t[r]:"value"in e?n.value=e.value:"reference"in e&&(n.reference=e.reference),n})};return r})}function prioritize(e,t){return e.sort(function(e,r){var n=function(e,r){return+(e.type===type(t[r],!0))};return e.specificity!==r.specificity?e.specificity.length-r.specificity.length||r.specificity-e.specificity:r.arguments.map(n).join("")-e.arguments.map(n).join("")})}function isTypeAtIndex(e,t,r){return t.length>r&&"type"in t[r]&&t[r].type===e}function delegate(t){var r=matchSignature(e,t);return r=prepare(r,t),r=prioritize(r,t),r=r.filter(function(e){var r=!1,n=e.arguments.map(function(t,n){return r=isTypeAtIndex("...",e.arguments,n)||isTypeAtIndex("...",e.arguments,n+1),+!(r||"value"in t||"reference"in t)}).join("").match(/^1+/);return t.length>=(n?n[0].length:0)}),!!r.length&&parameterize(r[0])}function cast(e,t){var r=t;switch(e){case"number":r=+r;break;case"int":r=parseInt(r,10);break;case"float":r=parseFloat(r);break;case"bool":case"boolean":r=["true","1",1].indexOf(r)>=0}return r}function numberType(e,t,r){return(parseInt(t,10)===parseFloat(t)?"int":"float")+(r?"":"|"+e)}function objectType(e,t,r){return t instanceof Array&&(e="array"),t?t.constructor.name+(r?"":"|"+e):"null"}function booleanType(e,t){return e+(t?"":"|bool")}function undefinedType(e,t){return e+(t?"":"|[a-z]+")}function type(e,t){var r=typeof e;switch(r){case"number":r=numberType(r,e,t);break;case"object":r=objectType(r,e,t);break;case"boolean":r=booleanType(r,t);break;case"undefined":r=undefinedType(r,t)}return r}function prepareArgument(e,t){var r={type:!!e&&e[1],name:e?e[2]:t};return e&&("@"===e[4]?r.reference=e[5]:"="===e[3]&&(r.value=cast(r.type,e[5]))),r}function parse(e){var t=/^(?:void|([a-zA-Z]+!?|\.{3})(?:[:\s]+([a-zA-Z]+)(?:(=)(@)?(.*))?)?)?$/;return e.split(/\s*,\s*/).map(function(r,n,o){var i=prepareArgument(r.match(t),"var"+(n+1));if(i.type===!1)throw new Error('polymorphic: invalid argument "'+r+'" in signature "'+e+'"');if("..."===i.type&&n<o.length-1)throw new Error('polymorphic: variadic argument must be at end of signature "'+e+'"');return i}).filter(function(e){return void 0!==e.type})}function polymorph(){var e=Array.prototype.slice.call(arguments),t=delegate(e);if(!t)throw new Error('polymorph: signature not found "'+e.map(function(e){return type(e)}).join(", ")+'"');return t.call.apply(this,t.param)}var e=[];return polymorph.signature=function(){var t=Array.prototype.slice.call(arguments),r=t.length&&"function"==typeof t[t.length-1]?t.pop():null;if(!t.length)throw new Error("polymorphic.signature: expected one or more signatures");if(!r)throw new Error("polymorphic.signature: expected final argument to be a callback");t.forEach(function(t){e.push({signature:t,arguments:parse(t),call:r})})},polymorph}var e=listCacheClear$1,t=eq$1,r=t,n=assocIndexOf$1,o=n,i=Array.prototype,a=i.splice,u=listCacheDelete$1,s=n,c=listCacheGet$1,p=n,l=listCacheHas$1,f=n,h=listCacheSet$1,y=e,d=u,v=c,b=l,m=h;ListCache$1.prototype.clear=y,ListCache$1.prototype.delete=d,ListCache$1.prototype.get=v,ListCache$1.prototype.has=b,ListCache$1.prototype.set=m;var g=ListCache$1,_=g,$=stackClear$1,j=stackDelete$1,w=stackGet$1,P=stackHas$1,S="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},O="object"==typeof S&&S&&S.Object===Object&&S,A=O,C=A,E="object"==typeof self&&self&&self.Object===Object&&self,D=C||E||Function("return this")(),I=D,T=I,M=T.Symbol,F=M,k=F,R=Object.prototype,x=R.hasOwnProperty,z=R.toString,N=k?k.toStringTag:void 0,B=getRawTag$1,L=Object.prototype,q=L.toString,U=objectToString$1,H=F,V=B,K=U,G="[object Null]",W="[object Undefined]",X=H?H.toStringTag:void 0,Y=baseGetTag$1,Z=isObject$3,J=Y,Q=Z,ee="[object AsyncFunction]",te="[object Function]",re="[object GeneratorFunction]",ne="[object Proxy]",oe=isFunction$1,ie=I,ae=ie["__core-js_shared__"],ue=ae,se=ue,ce=function(){var e=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pe=isMasked$1,le=Function.prototype,fe=le.toString,he=toSource$1,ye=oe,de=pe,ve=Z,be=he,me=/[\\^$.*+?()[\]{}|]/g,ge=/^\[object .+?Constructor\]$/,_e=Function.prototype,$e=Object.prototype,je=_e.toString,we=$e.hasOwnProperty,Pe=RegExp("^"+je.call(we).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Se=baseIsNative$1,Oe=getValue$1,Ae=Se,Ce=Oe,Ee=getNative$1,De=Ee,Ie=I,Te=De(Ie,"Map"),Me=Te,Fe=Ee,ke=Fe(Object,"create"),Re=ke,xe=Re,ze=hashClear$1,Ne=hashDelete$1,Be=Re,Le="__lodash_hash_undefined__",qe=Object.prototype,Ue=qe.hasOwnProperty,He=hashGet$1,Ve=Re,Ke=Object.prototype,Ge=Ke.hasOwnProperty,We=hashHas$1,Xe=Re,Ye="__lodash_hash_undefined__",Ze=hashSet$1,Je=ze,Qe=Ne,et=He,tt=We,rt=Ze;Hash$1.prototype.clear=Je,Hash$1.prototype.delete=Qe,Hash$1.prototype.get=et,Hash$1.prototype.has=tt,Hash$1.prototype.set=rt;var nt=Hash$1,ot=nt,it=g,at=Me,ut=mapCacheClear$1,st=isKeyable$1,ct=st,pt=getMapData$1,lt=pt,ft=mapCacheDelete$1,ht=pt,yt=mapCacheGet$1,dt=pt,vt=mapCacheHas$1,bt=pt,mt=mapCacheSet$1,gt=ut,_t=ft,$t=yt,jt=vt,wt=mt;MapCache$1.prototype.clear=gt,MapCache$1.prototype.delete=_t,MapCache$1.prototype.get=$t,MapCache$1.prototype.has=jt,MapCache$1.prototype.set=wt;var Pt=MapCache$1,St=g,Ot=Me,At=Pt,Ct=200,Et=stackSet$1,Dt=g,It=$,Tt=j,Mt=w,Ft=P,kt=Et;Stack$1.prototype.clear=It,Stack$1.prototype.delete=Tt,Stack$1.prototype.get=Mt,Stack$1.prototype.has=Ft,Stack$1.prototype.set=kt;var Rt=Stack$1,xt=arrayEach$1,zt=Ee,Nt=function(){try{var e=zt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Bt=Nt,Lt=Bt,qt=baseAssignValue$1,Ut=qt,Ht=t,Vt=Object.prototype,Kt=Vt.hasOwnProperty,Gt=assignValue$1,Wt=Gt,Xt=qt,Yt=copyObject$1,Zt=baseTimes$1,Jt=isObjectLike$2,Qt=Y,er=Jt,tr="[object Arguments]",rr=baseIsArguments$1,nr=rr,or=Jt,ir=Object.prototype,ar=ir.hasOwnProperty,ur=ir.propertyIsEnumerable,sr=nr(function(){return arguments}())?nr:function(e){return or(e)&&ar.call(e,"callee")&&!ur.call(e,"callee")},cr=sr,pr=Array.isArray,lr=pr,fr=stubFalse,hr=createCommonjsModule(function(e,t){var r=I,n=fr,o=t&&!t.nodeType&&t,i=o&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===o,u=a?r.Buffer:void 0,s=u?u.isBuffer:void 0,c=s||n;e.exports=c}),yr=9007199254740991,dr=/^(?:0|[1-9]\d*)$/,vr=isIndex$1,br=9007199254740991,mr=isLength$1,gr=Y,_r=mr,$r=Jt,jr="[object Arguments]",wr="[object Array]",Pr="[object Boolean]",Sr="[object Date]",Or="[object Error]",Ar="[object Function]",Cr="[object Map]",Er="[object Number]",Dr="[object Object]",Ir="[object RegExp]",Tr="[object Set]",Mr="[object String]",Fr="[object WeakMap]",kr="[object ArrayBuffer]",Rr="[object DataView]",xr="[object Float32Array]",zr="[object Float64Array]",Nr="[object Int8Array]",Br="[object Int16Array]",Lr="[object Int32Array]",qr="[object Uint8Array]",Ur="[object Uint8ClampedArray]",Hr="[object Uint16Array]",Vr="[object Uint32Array]",Kr={};Kr[xr]=Kr[zr]=Kr[Nr]=Kr[Br]=Kr[Lr]=Kr[qr]=Kr[Ur]=Kr[Hr]=Kr[Vr]=!0,Kr[jr]=Kr[wr]=Kr[kr]=Kr[Pr]=Kr[Rr]=Kr[Sr]=Kr[Or]=Kr[Ar]=Kr[Cr]=Kr[Er]=Kr[Dr]=Kr[Ir]=Kr[Tr]=Kr[Mr]=Kr[Fr]=!1;var Gr=baseIsTypedArray$1,Wr=baseUnary$1,Xr=createCommonjsModule(function(e,t){var r=A,n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,a=i&&r.process,u=function(){try{return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=u}),Yr=Gr,Zr=Wr,Jr=Xr,Qr=Jr&&Jr.isTypedArray,en=Qr?Zr(Qr):Yr,tn=en,rn=Zt,nn=cr,on=lr,an=hr,un=vr,sn=tn,cn=Object.prototype,pn=cn.hasOwnProperty,ln=arrayLikeKeys$1,fn=Object.prototype,hn=isPrototype$1,yn=overArg$1,dn=yn,vn=dn(Object.keys,Object),bn=vn,mn=hn,gn=bn,_n=Object.prototype,$n=_n.hasOwnProperty,jn=baseKeys$1,wn=oe,Pn=mr,Sn=isArrayLike$1,On=ln,An=jn,Cn=Sn,En=keys$2,Dn=Yt,In=En,Tn=baseAssign$1,Mn=nativeKeysIn$1,Fn=Z,kn=hn,Rn=Mn,xn=Object.prototype,zn=xn.hasOwnProperty,Nn=baseKeysIn$1,Bn=ln,Ln=Nn,qn=Sn,Un=keysIn$2,Hn=Yt,Vn=Un,Kn=baseAssignIn$1,Gn=createCommonjsModule(function(e,t){function cloneBuffer(e,t){if(t)return e.slice();var r=e.length,n=u?u(r):new e.constructor(r);return e.copy(n),n}var r=I,n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,i=o&&o.exports===n,a=i?r.Buffer:void 0,u=a?a.allocUnsafe:void 0;e.exports=cloneBuffer}),Wn=copyArray$1,Xn=arrayFilter$1,Yn=stubArray$1,Zn=Xn,Jn=Yn,Qn=Object.prototype,eo=Qn.propertyIsEnumerable,to=Object.getOwnPropertySymbols,ro=to?function(e){return null==e?[]:(e=Object(e),Zn(to(e),function(t){return eo.call(e,t)}))}:Jn,no=ro,oo=Yt,io=no,ao=copySymbols$1,uo=arrayPush$1,so=yn,co=so(Object.getPrototypeOf,Object),po=co,lo=uo,fo=po,ho=no,yo=Yn,vo=Object.getOwnPropertySymbols,bo=vo?function(e){for(var t=[];e;)lo(t,ho(e)),e=fo(e);return t}:yo,mo=bo,go=Yt,_o=mo,$o=copySymbolsIn$1,jo=uo,wo=lr,Po=baseGetAllKeys$1,So=Po,Oo=no,Ao=En,Co=getAllKeys$1,Eo=Po,Do=mo,Io=Un,To=getAllKeysIn$1,Mo=Ee,Fo=I,ko=Mo(Fo,"DataView"),Ro=ko,xo=Ee,zo=I,No=xo(zo,"Promise"),Bo=No,Lo=Ee,qo=I,Uo=Lo(qo,"Set"),Ho=Uo,Vo=Ee,Ko=I,Go=Vo(Ko,"WeakMap"),Wo=Go,Xo=Ro,Yo=Me,Zo=Bo,Jo=Ho,Qo=Wo,ei=Y,ti=he,ri="[object Map]",ni="[object Object]",oi="[object Promise]",ii="[object Set]",ai="[object WeakMap]",ui="[object DataView]",si=ti(Xo),ci=ti(Yo),pi=ti(Zo),li=ti(Jo),fi=ti(Qo),hi=ei;(Xo&&hi(new Xo(new ArrayBuffer(1)))!=ui||Yo&&hi(new Yo)!=ri||Zo&&hi(Zo.resolve())!=oi||Jo&&hi(new Jo)!=ii||Qo&&hi(new Qo)!=ai)&&(hi=function(e){var t=ei(e),r=t==ni?e.constructor:void 0,n=r?ti(r):"";if(n)switch(n){case si:return ui;case ci:return ri;case pi:return oi;case li:return ii;case fi:return ai}return t});var yi=hi,di=Object.prototype,vi=di.hasOwnProperty,bi=initCloneArray$1,mi=I,gi=mi.Uint8Array,_i=gi,$i=_i,ji=cloneArrayBuffer$1,wi=ji,Pi=cloneDataView$1,Si=addMapEntry$1,Oi=arrayReduce$1,Ai=mapToArray$1,Ci=Si,Ei=Oi,Di=Ai,Ii=1,Ti=cloneMap$1,Mi=/\w*$/,Fi=cloneRegExp$1,ki=addSetEntry$1,Ri=setToArray$1,xi=ki,zi=Oi,Ni=Ri,Bi=1,Li=cloneSet$1,qi=F,Ui=qi?qi.prototype:void 0,Hi=Ui?Ui.valueOf:void 0,Vi=cloneSymbol$1,Ki=ji,Gi=cloneTypedArray$1,Wi=ji,Xi=Pi,Yi=Ti,Zi=Fi,Ji=Li,Qi=Vi,ea=Gi,ta="[object Boolean]",ra="[object Date]",na="[object Map]",oa="[object Number]",ia="[object RegExp]",aa="[object Set]",ua="[object String]",sa="[object Symbol]",ca="[object ArrayBuffer]",pa="[object DataView]",la="[object Float32Array]",fa="[object Float64Array]",ha="[object Int8Array]",ya="[object Int16Array]",da="[object Int32Array]",va="[object Uint8Array]",ba="[object Uint8ClampedArray]",ma="[object Uint16Array]",ga="[object Uint32Array]",_a=initCloneByTag$1,$a=Z,ja=Object.create,wa=function(){
function object(){}return function(e){if(!$a(e))return{};if(ja)return ja(e);object.prototype=e;var t=new object;return object.prototype=void 0,t}}(),Pa=wa,Sa=Pa,Oa=po,Aa=hn,Ca=initCloneObject$1,Ea=Rt,Da=xt,Ia=Gt,Ta=Tn,Ma=Kn,Fa=Gn,ka=Wn,Ra=ao,xa=$o,za=Co,Na=To,Ba=yi,La=bi,qa=_a,Ua=Ca,Ha=lr,Va=hr,Ka=Z,Ga=En,Wa=1,Xa=2,Ya=4,Za="[object Arguments]",Ja="[object Array]",Qa="[object Boolean]",eu="[object Date]",tu="[object Error]",ru="[object Function]",nu="[object GeneratorFunction]",ou="[object Map]",iu="[object Number]",au="[object Object]",uu="[object RegExp]",su="[object Set]",cu="[object String]",pu="[object Symbol]",lu="[object WeakMap]",fu="[object ArrayBuffer]",hu="[object DataView]",yu="[object Float32Array]",du="[object Float64Array]",vu="[object Int8Array]",bu="[object Int16Array]",mu="[object Int32Array]",gu="[object Uint8Array]",_u="[object Uint8ClampedArray]",$u="[object Uint16Array]",ju="[object Uint32Array]",wu={};wu[Za]=wu[Ja]=wu[fu]=wu[hu]=wu[Qa]=wu[eu]=wu[yu]=wu[du]=wu[vu]=wu[bu]=wu[mu]=wu[ou]=wu[iu]=wu[au]=wu[uu]=wu[su]=wu[cu]=wu[pu]=wu[gu]=wu[_u]=wu[$u]=wu[ju]=!0,wu[tu]=wu[ru]=wu[lu]=!1;var Pu=baseClone$1,Su=Pu,Ou=1,Au=4,Cu=cloneDeep,Eu=createBaseFor$1,Du=Eu,Iu=Du(),Tu=Iu,Mu=Tu,Fu=En,ku=baseForOwn$1,Ru=Sn,xu=createBaseEach$1,zu=ku,Nu=xu,Bu=Nu(zu),Lu=Bu,qu=Lu,Uu=baseFilter$1,Hu="__lodash_hash_undefined__",Vu=setCacheAdd$1,Ku=setCacheHas$1,Gu=Pt,Wu=Vu,Xu=Ku;SetCache$1.prototype.add=SetCache$1.prototype.push=Wu,SetCache$1.prototype.has=Xu;var Yu=SetCache$1,Zu=arraySome$1,Ju=cacheHas$1,Qu=Yu,es=Zu,ts=Ju,rs=1,ns=2,os=equalArrays$1,is=F,as=_i,us=t,ss=os,cs=Ai,ps=Ri,ls=1,fs=2,hs="[object Boolean]",ys="[object Date]",ds="[object Error]",vs="[object Map]",bs="[object Number]",ms="[object RegExp]",gs="[object Set]",_s="[object String]",$s="[object Symbol]",js="[object ArrayBuffer]",ws="[object DataView]",Ps=is?is.prototype:void 0,Ss=Ps?Ps.valueOf:void 0,Os=equalByTag$1,As=Co,Cs=1,Es=Object.prototype,Ds=Es.hasOwnProperty,Is=equalObjects$1,Ts=Rt,Ms=os,Fs=Os,ks=Is,Rs=yi,xs=lr,zs=hr,Ns=tn,Bs=1,Ls="[object Arguments]",qs="[object Array]",Us="[object Object]",Hs=Object.prototype,Vs=Hs.hasOwnProperty,Ks=baseIsEqualDeep$1,Gs=Ks,Ws=Jt,Xs=baseIsEqual$1,Ys=Rt,Zs=Xs,Js=1,Qs=2,ec=baseIsMatch$1,tc=Z,rc=isStrictComparable$1,nc=rc,oc=En,ic=getMatchData$1,ac=matchesStrictComparable$1,uc=ec,sc=ic,cc=ac,pc=baseMatches$1,lc=Y,fc=Jt,hc="[object Symbol]",yc=isSymbol$1,dc=lr,vc=yc,bc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mc=/^\w*$/,gc=isKey$2,_c=Pt,$c="Expected a function";memoize$1.Cache=_c;var jc,wc=memoize$1,Pc=wc,Sc=500,Oc=memoizeCapped$1,Ac=Oc,Cc=/^\./,Ec=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Dc=/\\(\\)?/g,Ic=Ac(function(e){var t=[];return Cc.test(e)&&t.push(""),e.replace(Ec,function(e,r,n,o){t.push(n?o.replace(Dc,"$1"):r||e)}),t}),Tc=Ic,Mc=arrayMap$1,Fc=F,kc=Mc,Rc=lr,xc=yc,zc=1/0,Nc=Fc?Fc.prototype:void 0,Bc=Nc?Nc.toString:void 0,Lc=baseToString$1,qc=Lc,Uc=toString$1,Hc=lr,Vc=gc,Kc=Tc,Gc=Uc,Wc=castPath$1,Xc=yc,Yc=1/0,Zc=toKey$2,Jc=Wc,Qc=Zc,ep=baseGet$1,tp=ep,rp=get$1,np=baseHasIn$1,op=Wc,ip=cr,up=lr,sp=vr,cp=mr,pp=Zc,lp=hasPath$1,fp=np,hp=lp,yp=hasIn$1,dp=Xs,vp=rp,bp=yp,mp=gc,gp=rc,_p=ac,$p=Zc,jp=1,wp=2,Pp=baseMatchesProperty$1,Sp=identity$1,Op=baseProperty$1,Ap=ep,Cp=basePropertyDeep$1,Ep=Op,Dp=Cp,Ip=gc,Tp=Zc,Mp=property$1,Fp=pc,kp=Pp,Rp=Sp,xp=lr,zp=Mp,Np=baseIteratee$1,Bp=Xn,Lp=Uu,qp=Np,Up=lr,Hp=filter,Vp=Mc,Kp=baseValues$1,Gp=Kp,Wp=En,Xp=values,Yp=Sp,Zp=castFunction$1,Jp=xt,Qp=Lu,el=Zp,tl=lr,rl=forEach,nl=Y,ol=lr,il=Jt,al="[object String]",ul=isString,sl=qt,cl=t,pl=assignMergeValue$1,ll=Sn,fl=Jt,hl=isArrayLikeObject$1,yl=Y,dl=po,vl=Jt,bl="[object Object]",ml=Function.prototype,gl=Object.prototype,_l=ml.toString,$l=gl.hasOwnProperty,jl=_l.call(Object),wl=isPlainObject$1,Pl=Yt,Sl=Un,Ol=toPlainObject$1,Al=pl,Cl=Gn,El=Gi,Dl=Wn,Il=Ca,Tl=cr,Ml=lr,Fl=hl,kl=hr,Rl=oe,xl=Z,zl=wl,Nl=tn,Bl=Ol,Ll=baseMergeDeep$1,ql=Rt,Ul=pl,Hl=Tu,Vl=Ll,Kl=Z,Gl=Un,Wl=baseMerge$1,Xl=apply$1,Yl=Xl,Zl=Math.max,Jl=overRest$1,Ql=constant$1,ef=Ql,tf=Bt,rf=Sp,nf=tf?function(e,t){return tf(e,"toString",{configurable:!0,enumerable:!1,value:ef(t),writable:!0})}:rf,of=nf,af=800,uf=16,sf=Date.now,cf=shortOut$1,pf=of,lf=cf,ff=lf(pf),hf=ff,yf=Sp,df=Jl,vf=hf,bf=baseRest$1,mf=t,gf=Sn,_f=vr,$f=Z,jf=isIterateeCall$1,wf=bf,Pf=jf,Sf=createAssigner$1,Of=Wl,Af=Sf,Cf=Af(function(e,t,r){Of(e,t,r)}),Ef=Cf,Df=Xs,If=isEqual,Tf=Lu,Mf=Sn,Ff=baseMap$1,kf=Mc,Rf=Np,xf=Ff,zf=lr,Nf=map,Bf=Y,Lf=Jt,qf="[object Boolean]",Uf=isBoolean,Hf=Z,Vf=yc,Kf=NaN,Gf=/^\s+|\s+$/g,Wf=/^[-+]0x[0-9a-f]+$/i,Xf=/^0b[01]+$/i,Yf=/^0o[0-7]+$/i,Zf=parseInt,Jf=toNumber$1,Qf=Jf,eh=1/0,th=1.7976931348623157e308,rh=toFinite$1,nh=rh,oh=toInteger$1,ih=oh,ah=isInteger,uh=Uc,sh=0,ch=uniqueId,ph=Mc,lh=baseToPairs$1,fh=setToPairs$1,hh=lh,yh=yi,dh=Ai,vh=fh,bh="[object Map]",mh="[object Set]",gh=createToPairs$1,_h=gh,$h=En,jh=_h($h),wh=jh,Ph=function _arity(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,o){return t.apply(this,arguments)};case 5:return function(e,r,n,o,i){return t.apply(this,arguments)};case 6:return function(e,r,n,o,i,a){return t.apply(this,arguments)};case 7:return function(e,r,n,o,i,a,u){return t.apply(this,arguments)};case 8:return function(e,r,n,o,i,a,u,s){return t.apply(this,arguments)};case 9:return function(e,r,n,o,i,a,u,s,c){return t.apply(this,arguments)};case 10:return function(e,r,n,o,i,a,u,s,c,p){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},Sh=function _isPlaceholder(e){return null!=e&&"object"==typeof e&&e["@@functional/placeholder"]===!0},Oh=Sh,Ah=function _curry1(e){return function f1(t){return 0===arguments.length||Oh(t)?f1:e.apply(this,arguments)}},Ch=Ah,Eh=Sh,Dh=function _curry2(e){return function f2(t,r){switch(arguments.length){case 0:return f2;case 1:return Eh(t)?f2:Ch(function(r){return e(t,r)});default:return Eh(t)&&Eh(r)?f2:Eh(t)?Ch(function(t){return e(t,r)}):Eh(r)?Ch(function(r){return e(t,r)}):e(t,r)}}},Ih=Ph,Th=Sh,Mh=function _curryN(e,t,r){return function(){for(var n=arguments,o=[],i=0,a=e,u=0;u<t.length||i<arguments.length;){var s;u<t.length&&(!Th(t[u])||i>=n.length)?s=t[u]:(s=n[i],i+=1),o[u]=s,Th(s)||(a-=1),u+=1}return a<=0?r.apply(this,o):Ih(a,_curryN(e,o,r))}},Fh=Ph,kh=Ah,Rh=Dh,xh=Mh,zh=Rh(function curryN(e,t){return 1===e?kh(t):Fh(e,xh(e,[],t))}),Nh=zh,Bh=[],Lh=[],qh=-1,Uh=!1,Hh={};Hh.stream=function(e){var t=createDependentStream([],trueFn),r=createStream();return r.end=t,r.fnArgs=[],t.listeners.push(r),arguments.length>0&&r(e),r},Hh.combine=Nh(2,combine),Hh.isStream=function(e){return isFunction$5(e)&&"hasVal"in e},Hh.immediate=function(e){return e.depsMet===!1&&(e.depsMet=!0,updateStream(e)),e},Hh.endsOn=function(e,t){return detachDeps(t.end),e.listeners.push(t.end),t.end.deps.push(e),t},Hh.map=Nh(2,function(e,t){return combine(function(t,r){r(e(t.val))},[t])}),Hh.on=Nh(2,function(e,t){return combine(function(t){e(t.val)},[t])}),Hh.scan=Nh(3,function(e,t,r){var n=combine(function(r,n){n(t=e(t,r.val))},[r]);return n.hasVal||n(t),n}),Hh.merge=Nh(2,function(e,t){var r=Hh.immediate(combine(function(e,t,r,n){n[0]?r(n[0]()):e.hasVal?r(e.val):t.hasVal&&r(t.val)},[e,t]));return Hh.endsOn(combine(function(){return!0},[e.end,t.end]),r),r}),Hh.transduce=Nh(2,function(e,t){return e=e(new StreamTransformer),combine(function(t,r){var n=e["@@transducer/step"](void 0,t.val);return n&&n["@@transducer/reduced"]===!0?(r.end(!0),n["@@transducer/value"]):n},[t])}),Hh.curryN=Nh,StreamTransformer.prototype["@@transducer/init"]=function(){},StreamTransformer.prototype["@@transducer/result"]=function(){},StreamTransformer.prototype["@@transducer/step"]=function(e,t){return t};var Vh,Kh,Gh=Hh,Wh=polymorphic,Xh=createCommonjsModule(function(e){!function(){function getSpecies(){return T[h][d]||v}function extend(e,t){for(var r in t)e[r]=t[r]}function isObject(e){return e&&"object"==typeof e}function isFunction(e){return"function"==typeof e}function isInstanceOf(e,t){return e instanceof t}function isError(e){return isInstanceOf(e,c)}function ensureType(e,t,r){if(!t(e))throw genTypeError(r)}function tryCatcher(){try{return r.apply(n,arguments)}catch(e){return E.e=e,E}}function genTryCatcher(e,t){return r=e,n=t,tryCatcher}function genScheduler(e,r){function flush(){for(var i=0;i<o;)r(n[i],n[i+1]),n[i++]=t,n[i++]=t;o=0,n.length>e&&(n.length=e)}var n=s(e),o=0;return function(e,t){n[o++]=e,n[o++]=t,2===o&&T.nextTick(flush)}}function each(e,t){var r,n,o,i,a=0;if(!e)throw genTypeError(j);var u=e[T[h][y]];if(isFunction(u))n=u.call(e);else{if(!isFunction(e.next)){if(isInstanceOf(e,s)){for(r=e.length;a<r;)t(e[a],a++);return a}throw genTypeError(j)}n=e}for(;!(o=n.next()).done;)if(i=genTryCatcher(t)(o.value,a++),i===E)throw isFunction(n[b])&&n[b](),i.e;return a}function genTypeError(e){return new TypeError(e)}function genTraceInfo(e){return(e?"":w)+(new c).stack}function emitEvent(e,t){var r="on"+e.toLowerCase(),n=i[r];u&&u.listeners(e).length?e===C?u.emit(e,t._v,t):u.emit(e,t):n?n({reason:t._v,promise:t}):T[e](t._v,t)}function isYaku(e){return e&&e._s}function newCapablePromise(e){if(isYaku(e))return new e(D);var t,r,n;return t=new e(function(e,o){if(t)throw genTypeError();r=e,n=o}),ensureType(r,isFunction),ensureType(n,isFunction),t}function genSettler(e,t){return function(r){a&&(e[_]=genTraceInfo(!0)),t===l?settleWithX(e,r):settlePromise(e,t,r)}}function addHandler(e,t,r,n){return isFunction(r)&&(t._onFulfilled=r),isFunction(n)&&(e[m]&&emitEvent(A,e),t._onRejected=n),a&&(t._p=e),e[e._c++]=t,e._s!==f&&M(e,t),t}function hashOnRejected(e){if(e._umark)return!0;e._umark=!0;for(var t,r=0,n=e._c;r<n;)if(t=e[r++],t._onRejected||hashOnRejected(t))return!0}function genStackInfo(e,t){function push(e){return r.push(e.replace(/^\s+|\s+$/g,""))}var r=[];return a&&(t[_]&&push(t[_]),function iter(e){e&&g in e&&(iter(e._next),push(e[g]+""),iter(e._p))}(t)),(e&&e.stack?e.stack:e)+("\n"+r.join("\n")).replace(I,"")}function callHanler(e,t){return e(t)}function settlePromise(e,t,r){var n=0,o=e._c;if(e._s===f)for(e._s=t,e._v=r,t===p&&(a&&isError(r)&&(r.longStack=genStackInfo(r,e)),F(e));n<o;)M(e,e[n++]);return e}function settleWithX(e,t){if(t===e&&t)return settlePromise(e,p,genTypeError(P)),e;if(t!==o&&(isFunction(t)||isObject(t))){var r=genTryCatcher(getThen)(t);if(r===E)return settlePromise(e,p,r.e),e;isFunction(r)?(a&&isYaku(t)&&(e._next=t),isYaku(t)?settleXthen(e,t,r):T.nextTick(function(){settleXthen(e,t,r)})):settlePromise(e,l,t)}else settlePromise(e,l,t);return e}function getThen(e){return e.then}function settleXthen(e,t,r){var n=genTryCatcher(r,t)(function(r){t&&(t=o,settleWithX(e,r))},function(r){t&&(t=o,settlePromise(e,p,r))});n===E&&t&&(settlePromise(e,p,n.e),t=o)}var t,r,n,o=null,i="object"==typeof window?window:S,a=!1,u=i.process,s=Array,c=Error,p=1,l=2,f=3,h="Symbol",y="iterator",d="species",v=h+"("+d+")",b="return",m="_uh",g="_pt",_="_st",$="Invalid this",j="Invalid argument",w="\nFrom previous ",P="Chaining cycle detected for promise",O="Uncaught (in promise)",A="rejectionHandled",C="unhandledRejection",E={e:o},D=function(){},I=/^.+\/node_modules\/yaku\/.+\n?/gm,T=e.exports=function(e){var r,n=this;if(!isObject(n)||n._s!==t)throw genTypeError($);if(n._s=f,a&&(n[g]=genTraceInfo()),e!==D){if(!isFunction(e))throw genTypeError(j);r=genTryCatcher(e)(genSettler(n,l),genSettler(n,p)),r===E&&settlePromise(n,p,r.e)}};T.default=T,extend(T.prototype,{then:function(e,t){if(void 0===this._s)throw genTypeError();return addHandler(this,newCapablePromise(T.speciesConstructor(this,T)),e,t)},catch:function(e){return this.then(t,e)},finally:function(e){function eventually(t){return T.resolve(e()).then(function(){return t})}return this.then(eventually,eventually)},_c:0,_p:o}),T.resolve=function(e){return isYaku(e)?e:settleWithX(newCapablePromise(this),e)},T.reject=function(e){return settlePromise(newCapablePromise(this),p,e)},T.race=function(e){var t=this,r=newCapablePromise(t),n=function(e){settlePromise(r,l,e)},o=function(e){settlePromise(r,p,e)},i=genTryCatcher(each)(e,function(e){t.resolve(e).then(n,o)});return i===E?t.reject(i.e):r},T.all=function(e){function reject(e){settlePromise(n,p,e)}var t,r=this,n=newCapablePromise(r),o=[];return t=genTryCatcher(each)(e,function(e,i){r.resolve(e).then(function(e){o[i]=e,--t||settlePromise(n,l,o)},reject)}),t===E?r.reject(t.e):(t||settlePromise(n,l,[]),n)},T.Symbol=i[h]||{},genTryCatcher(function(){Object.defineProperty(T,getSpecies(),{get:function(){return this}})})(),T.speciesConstructor=function(e,t){var r=e.constructor;return r?r[getSpecies()]||t:t},T.unhandledRejection=function(e,t){try{i.console.error(O,a?t.longStack:genStackInfo(e,t))}catch(e){}},T.rejectionHandled=D,T.enableLongStackTrace=function(){a=!0},T.nextTick=u?u.nextTick:function(e){setTimeout(e)},T._s=1;var M=genScheduler(999,function(e,r){var n,o;return o=e._s!==p?r._onFulfilled:r._onRejected,o===t?void settlePromise(r,e._s,e._v):(n=genTryCatcher(callHanler)(o,e._v),n===E?void settlePromise(r,p,n.e):void settleWithX(r,n))}),F=genScheduler(9,function(e){hashOnRejected(e)||(e[m]=1,emitEvent(C,e))})}()});Vh=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},Kh=function(e){var t,r,n=document.createTextNode(""),o=0;return new e(function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(n.data=o=++o%2;r;)e=r.shift(),r.length||(r=null),e()}).observe(n,{characterData:!0}),function(e){return Vh(e),t?void("function"==typeof t?t=[t,e]:t.push(e)):(t=e,void(n.data=o=++o%2))}};var Yh=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return Kh(MutationObserver);if("function"==typeof WebKitMutationObserver)return Kh(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(Vh(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(Vh(e),0)}:null}(),Zh=function(){};Zh.prototype.cloneDeep=Cu,Zh.prototype.filter=Hp,Zh.prototype.values=Xp,Zh.prototype.forEach=rl,Zh.prototype.isFunction=oe,Zh.prototype.isString=ul,Zh.prototype.isObject=Z,Zh.prototype.merge=Ef,Zh.prototype.isEqual=If,Zh.prototype.isPlainObject=wl,Zh.prototype.isArray=lr,Zh.prototype.map=Nf,Zh.prototype.isBoolean=Uf,Zh.prototype.isInteger=ah,Zh.prototype.uniqueId=ch,Zh.prototype.toPairs=wh,Zh.prototype.createStream=Gh.stream,Zh.prototype.combineStreams=Gh.combine,Zh.prototype.isStream=Gh.isStream,Zh.prototype.immediateStream=Gh.immediate,Zh.prototype.streamEndsOn=Gh.endsOn,Zh.prototype.mapStream=Gh.map,Zh.prototype.streamOn=Gh.on,Zh.prototype.scanStream=Gh.scan,Zh.prototype.mergeStream=Gh.merge,Zh.prototype.transduceStream=Gh.transduce,Zh.prototype.createPolymorphic=Wh,Zh.prototype.Promise=Xh,Zh.prototype.Promise.nextTick=function(e){return Yh(e)},Zh.prototype.createPromise=function createPromise(e,t){return new this.Promise(e,t)},Zh.prototype.createAlo=function createAlo(){var e=Object.create(ad.prototype);return ad.apply(e,arguments),e};var Jh=new Zh,Qh={get:{relation:!0},add:{relation:!0},remove:{relation:!0},relatedTo:{relation:!0},indexOf:{relation:!0},setIndexOf:{relation:!0},getId:{}},ey=function(e,t){return t=t.split(""),t[0]=t[0].toUpperCase(),t=t.join(""),e+t},ty=function ObjectRelation(){ry.apply(this,arguments)},ry=Jh.createPolymorphic();ry.signature("string, string, function",function(e,t,r){var n=this;if(""===e||""===t)throw new Error("Argument given should not be empty");this.idPropertyName="_id",this.parentName=e,this.relationName=t,this.relationByIdPropertyName="_"+t+"RelationsById",this.relationPropertyName="_"+t+"Relations",this.isRelationObject=r,this.functions={},Jh.forEach(Qh,function(r,o){n.functions[o]={before:[],after:[]},r.relation===!0&&(n.functions[o].parentName=ey(o,e),n.functions[o].relationName=ey(o,t))})}),ty.prototype.constructParent=function(e){if(null===e[this.idPropertyName]||void 0===e[this.idPropertyName]){var t=Jh.uniqueId();e[this.idPropertyName]=t}e[this.relationByIdPropertyName]={},e[this.relationPropertyName]=[]},ty.prototype.registerParentPrototype=function(e){var t=this,r=function(e,r){return function(){var n=this,o=Jh.values(arguments);o.unshift(t),Jh.forEach(t.functions[e].before,function(e){e.call(n)});var i=r.apply(n,o);return Jh.forEach(t.functions[e].after,function(e){e.call(n)}),i}};Jh.forEach(t.functions,function(n,o){var i=o;Jh.isString(n.relationName)&&""!==n.relationName&&(i=n.relationName),e[i]=r(o,t[o+"Function"])})},ty.prototype.getIdFunction=function getId(e){return this[e.idPropertyName]},ty.prototype.getFunction=Jh.createPolymorphic();var ny=ty.prototype.getFunction;ny.signature("object, boolean b=true",function(e,t){var r=this;if(t)return this[e.relationByIdPropertyName];var n=[];return Jh.forEach(this[e.relationPropertyName],function(t){n.push(ny.call(r,e,t))}),n}),ny.signature("object, string",function(e,t){if(""===t)throw new Error("Argument given should not be an empty string");return null!==this[e.relationByIdPropertyName][t]&&this[e.relationByIdPropertyName][t]}),ty.prototype.addFunction=Jh.createPolymorphic();var oy=ty.prototype.addFunction;oy.signature("object, object, integer a=-1, boolean b=false",function(e,t,r,n){if(!e.isRelationObject.call(this,t))throw new Error("Argument given is not a "+e.relationName);var o=t.getId();if(!Jh.isString(o)||""===o)throw new Error("Id is not a string or empty");return n!==!0&&t[e.functions.add.parentName](this,-1,!0),this[e.relationByIdPropertyName][o]=t,r>=0?this[e.relationPropertyName].splice(r,0,o):this[e.relationPropertyName].push(o),this}),oy.signature("object, array",function(e,t){var r=this;return Jh.forEach(t,function(t){oy.call(r,e,t,-1)}),this}),oy.signature("object, object, object, ...",function(e,t,r,n){var o=[t,r];return oy.call(this,e,o.concat(n),-1)}),ty.prototype.removeFunction=Jh.createPolymorphic();var iy=ty.prototype.removeFunction;iy.signature("object, string, boolean b=false",function(e,t,r){if(""===t)throw new Error("Argument given should not be empty");Jh.isBoolean(r)&&r===!0||e.isRelationObject.call(this,this[e.relationPropertyName][t])&&this[e.relationByIdPropertyName][t][e.functions.remove.parentName](this.getId(),!0),delete this[e.relationByIdPropertyName][t];var n=this[e.relationPropertyName].indexOf(t);return n>-1&&this[e.relationPropertyName].splice(n,1),this}),iy.signature("object, object, boolean b=false",function(e,t,r){if(e.isRelationObject.call(this,t)){var n=t.getId();return iy.call(this,e,n,r)}throw new Error("Argument given is not a "+e.relationName)}),iy.signature("object",function(e){var t=this;return Jh.forEach(this[e.relationPropertyName],function(r){iy.call(t,e,r)}),this}),ty.prototype.relatedToFunction=function(e,t){return ay.apply(this,arguments)>-1},ty.prototype.indexOfFunction=function(e,t){var r=null;if(Jh.isString(t)||Jh.isInteger(t))r=t;else{if(!e.isRelationObject.call(this,t))throw new Error("Argument given should be an id or a "+e.relationName);r=t.getId()}return this[e.relationPropertyName].indexOf(r)};var ay=ty.prototype.indexOfFunction;ty.prototype.setIndexOfFunction=function(e,t,r){if(Jh.isInteger(r)){var n=null;if(Jh.isString(t)||Jh.isInteger(t))n=t;else{if(!e.isRelationObject.call(this,t))throw new Error("Argument given should be an id or a "+e.relationName);n=t.getId()}var o=this[e.relationPropertyName].indexOf(n);return o!==-1&&o!==r&&(delete this[e.relationPropertyName][o],this[e.relationPropertyName].splice(r,0,n)),r}throw new Error("Argument for index should be an integer")},ty.prototype.before=Jh.createPolymorphic();var uy=ty.prototype.before;uy.signature("string, function",function(e,t){this.functions[e].before.push(t)}),ty.prototype.after=Jh.createPolymorphic();var sy=ty.prototype.after;sy.signature("string, function",function(e,t){this.functions[e].after.push(t)});var cy=new Zh,py=new ty("subscription","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),ly=new ty("subscription","member",function(){return this._alo.isMember.apply(this._alo,arguments)}),fy=new ty("subscription","dependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),hy=function Subscription(){this._id=null,this._storeRelations=null,this._memberRelations=null,this._dependencyRelations=null,this._events={beforePublish:[],afterPublish:[]},this._subscriptionStream=null,this._stream=null,this._lastData=null,this._muted=!1,py.constructParent(this),ly.constructParent(this),fy.constructParent(this),yy.apply(this,arguments)},yy=cy.createPolymorphic();yy.signature("",function(){}),yy.signature("object, array",function(e,t){this.setDependency(e),this.addMember(t)}),yy.signature("object",function(e){this.setDependency(e)}),yy.signature("array",function(e){this.addMember(e)}),yy.signature("function",function(e){this.createMember(e)}),hy.prototype.addMember=null,hy.prototype.getMember=null;var dy=function(){var e=this;cy.isStream(this._stream)&&(this._stream.end(!0),this._stream=null),cy.isStream(this._subscriptionStream)&&(this._subscriptionStream.end(!0),this._subscriptionStream=null);var t=[],r=cy.values(this.getStore());cy.forEach(r,function(e){t.push(e.getStream())}),this._stream=cy.combineStreams(function(){var t={};return cy.forEach(cy.values(arguments),function(n,o){e._alo.isStore(r[o])&&(t[r[o].getId()]=n())}),cy.Promise.resolve().then(function(){var r=e.getDependency(!1);if(r.length>0){var n={state:t,computed:{}};return r[0].reduceRecursive(r,e.getId(),n)}return{}}).then(function(e){return{stores:t,computed:e}})},t),this._subscriptionStream=cy.streamOn(function(t){var r=cy.values(t.computed).length;(null===e._lastData||0===r&&!cy.isEqual(e._lastData.stores,t.stores)||r>0&&!cy.isEqual(e._lastData.computed,t.computed))&&(e._lastData=t,e._publish(t))},this._stream)};py.after("add",dy),py.after("remove",dy),py.registerParentPrototype(hy.prototype),ly.registerParentPrototype(hy.prototype),fy.registerParentPrototype(hy.prototype),hy.prototype.createMember=function createMember(){var e=this._alo.createMember.apply(this._alo,arguments);return this.addMember(e),e},hy.prototype._callEvent=function(e,t){var r=this._events[e].map(function(e){return cy.Promise.resolve(t).then(e)});return cy.Promise.all(r).then(function(e){var t=e.indexOf(!1)===-1;return t})},hy.prototype._publish=function(e){var t=this;if(e&&t._muted===!1){t._muted=!0;var r=cy.Promise.resolve().then(function(){return t._callEvent("beforePublish",e)}).then(function(e){if(t._muted=!1,e!==!1){var r=t.getData(),n=[];return cy.forEach(t.getMember(!1),function(e){n.push(e._call(r.stores,r.computed))}),cy.Promise.all(n)}return!1}).then(function(r){if(r!==!1)return t._muted=!0,t._callEvent("afterPublish",e)}).then(function(){return t._muted=!1,null});return r}},hy.prototype.enable=null,hy.prototype.disable=null,hy.prototype.remember=function remember(){var e=this,t=e.getData();return e._publish(t)},hy.prototype.stop=function stop(){return this.disable(),this.removeStore(),this},hy.prototype.getStream=function getStream(){return this._stream},hy.prototype.getData=function getData(){return cy.cloneDeep(this.getStream()())},hy.prototype.createDependency=function createDependency(){var e=this._alo.createDependency.apply(this._alo,arguments);return this.addDependency(e),e},hy.prototype.on=cy.createPolymorphic();var vy=hy.prototype.on;vy.signature("string, function",function(e,t){if(!cy.isArray(this._events[e]))throw new Error("Argument type is not a valid type");var r=this._events[e].length;return this._events[e].push(t),{stop:function(){delete this._events[e][r]}}});var by=new Zh,my=new ty("dependency","parentDependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),gy=new ty("parentDependency","dependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),_y=new ty("dependency","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),$y=new ty("dependency","subscription",function(){return this._alo.isSubscription.apply(this._alo,arguments)}),jy=new ty("dependency","member",function(){return this._alo.isMember.apply(this._alo,arguments)}),wy=function Dependency(){this._beforeDependencies={},this._afterDependencies={},this._cache={},my.constructParent(this),gy.constructParent(this),_y.constructParent(this),$y.constructParent(this),jy.constructParent(this),this.add.apply(this,arguments)};my.registerParentPrototype(wy.prototype),gy.registerParentPrototype(wy.prototype),_y.registerParentPrototype(wy.prototype),$y.registerParentPrototype(wy.prototype),jy.registerParentPrototype(wy.prototype),wy.prototype.get=by.createPolymorphic();var Py=wy.prototype.get;Py.signature("string a=after",function(e){switch(e){case"before":return this._beforeDependencies;case"after":return this._afterDependencies;default:throw new Error("Argument for type should be before or after")}}),wy.prototype.add=by.createPolymorphic();var Sy=wy.prototype.add;Sy.signature("",function(){}),Sy.signature("object, string b=after",function(e,t){var r=this;if(["before","after"].indexOf(t)===-1)throw new Error("Argument type should be before or after");return by.forEach(e,function(e,n){by.isArray(e)?r.add(n,e[0],e[1],t):r.add(n,e,t)}),this}),Sy.signature("string, array, function, string a=after",function(e,t,r,n){switch(by.forEach(t,function(e){if(!by.isString(e)||""===e)throw new Error("Dependency should be a string and not empty")}),n){case"before":this._beforeDependencies[e]=[t,r];break;case"after":this._afterDependencies[e]=[t,r];break;default:throw new Error("Type should be before or after")}return this}),Sy.signature("string, function, string a=after",function(e,t,r){return Sy.call(this,e,[],t,r)}),wy.prototype.remove=function remove(e,t){if(void 0!==t&&["before","after"].indexOf(t)===-1)throw new Error("Argument for type should be before or after");return void 0!==t&&"before"!==t||(this._beforeDependencies=!1),void 0!==t&&"after"!==t||(this._afterDependencies=!1),this},wy.prototype.reduceRecursive=function reduceRecursive(e,t,r){var n=this;return by.Promise.resolve().then(function(){if(e.length>0){var o=0,i=function(){return void 0!==e[o]?n._alo.isDependency(e[o])?by.Promise.resolve().then(function(){return e[o].reduce(t,r)}).then(function(e){return r.computed=e,o++,i()}):(o++,i()):r.computed};return i()}return{}})},wy.prototype.reduce=function reduce(e,t){var r=this;r._cache[e]=r._cache[e]||{};var n=function(e,t){var r=by.toPairs(e);void 0===t&&(t=[]);var n=0,i=function(){return void 0!==r[n]?by.Promise.resolve().then(function(){return o(t,r[n],e)}).then(function(e){return t=e,n++,i()}):t};return i()},o=function(o,i,a){var u=i[0],s=i[1][0],c=i[1][1];return o.indexOf(u)===-1?by.Promise.resolve().then(function(){if(s.length>0){var e=by.filter(s,function(e){return void 0===t.computed[e]}),r={};return by.forEach(e,function(e){r[e]=a[e]}),n(r,o)}return o}).then(function(n){var o=!0;return s.length>0&&(o=!1,by.forEach(s,function(n){if(!by.isEqual(t.computed[n],r._cache[e][n]))return o=!0,!1})),o?by.isFunction(c)?c(t.state,t.computed,t.action):null:r._cache[e][u]}).then(function(e){return void 0===e&&(e=null),t.computed[u]=e,o.push(u),o}):o},i={before:this.get("before"),after:this.get("after")};return by.Promise.resolve().then(function(){return n(i.before,[])}).then(function(e){var n=0,o=r.getDependency(!1),i=function(){return void 0===o[n]||(r._alo.isDependency(o[n])?by.Promise.resolve().then(function(){return o[n].reduce(r.getId(),t)}).then(function(e,r){return t.computed=e,n++,i()}):(n++,i()))};return i()}).then(function(){return n(i.after,[])}).then(function(){return r._cache[e]=t.computed,t.computed})};var Oy=new Zh,Ay=new ty("member","subscription",function(){return this._alo.isSubscription.apply(this._alo,arguments)}),Cy=new ty("member","dependency",function(){return this._alo.isDependency.apply(this._alo,arguments)}),Ey=function Member(){this._dependency={},this._function=null,this._enabled=!0,this._lastData=null,Ay.constructParent(this),Cy.constructParent(this),Dy.apply(this,arguments)},Dy=Oy.createPolymorphic();Dy.signature("function",function(e){this.setFunction(e)}),Dy.signature("object",function(e){this.addDependency(e)}),Dy.signature("object, function",function(e,t){this.addDependency(e),this.setFunction(t)}),Ay.registerParentPrototype(Ey.prototype),Cy.registerParentPrototype(Ey.prototype),Ey.prototype._call=function _call(e,t){var r=this;if(this.isEnabled()){var n=r.getFunction();if(Oy.isFunction(n))return Oy.Promise.resolve().then(function(){var n=r.getDependency(!1);if(n.length>0){var o={state:e,computed:{}};return n[0].reduceRecursive(n,r.getId(),o)}return t}).then(function(t){var o=Oy.values(t).length;(null===r._lastData||0===o||o>0&&!Oy.isEqual(r._lastData,t))&&(r._lastData=t,n(e,t))})}return this},Ey.prototype.createDependency=function createDependency(){var e=this._alo.createDependency.apply(this._alo,arguments);return this.addDependency(e),e},Ey.prototype.disable=function disable(){return this._enabled=!1,this},Ey.prototype.enable=function enable(){return this._enabled=!0,this},Ey.prototype.isEnabled=function isEnabled(){return this._enabled},Ey.prototype.getFunction=function getFunction(){return this._function},Ey.prototype.setFunction=function setFunction(e){if(!Oy.isFunction(e))throw new Error("Argument given needs to be a function");return this._function=e,this},Ey.prototype.stop=function stop(){return this.disable(),this.removeSubscription(),this};var Iy=new Zh,Ty={getCustomizer:{},setCustomizer:{},unsetCustomizer:{},callCustomizer:{}},My=["prepare","finalize"],Fy=function(e){var t=this;this.async=e===!0,this.functions={},Iy.forEach(Ty,function(e,r){t.functions[r]={after:[]}})};Fy.prototype.constructParent=function(e){e._customizers={},Iy.forEach(My,function(t){e._customizers[t]=!1})},Fy.prototype.registerParentPrototype=function(e){return ty.prototype.registerParentPrototype.call(this,e)},Fy.prototype.setCustomizerFunction=Iy.createPolymorphic();var ky=Fy.prototype.setCustomizerFunction;ky.signature("object, function, string b=finalize",function(e,t,r){if(My.indexOf(r)===-1)throw new Error("Argument for type is invalid");return this._customizers[r]=t,this}),Fy.prototype.unsetCustomizerFunction=function(e,t){var r=this;if(void 0!==t&&My.indexOf(t)===-1)throw new Error("Argument for type should be prepare or finalize");return void 0===t?Iy.forEach(this._customizers,function(e,t){r.unsetCustomizer(t)}):this._customizers[t]=!1,this},Fy.prototype.getCustomizerFunction=Iy.createPolymorphic();var Ry=Fy.prototype.getCustomizerFunction;Ry.signature("object, string a=finalize",function(e,t){if(My.indexOf(t)===-1)throw new Error("Argument for type is invalid");return this._customizers[t]}),Fy.prototype.callCustomizerFunction=function(e,t){if(!Iy.isString(t))throw new Error("Argument for type should be a string");var r=this.getCustomizer(t);if(Iy.isFunction(r)){var n=Iy.values(arguments);if(n.length<=2)throw new Error("Atleast two arguments are required");return n=n.slice(2),e.async===!0?Iy.Promise.resolve().then(function(){return r.apply(null,n)}):r.apply(null,n)}};var xy=new Zh,zy=new Fy(!1),Ny=new ty("reducer","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),By=new ty("reducer","parentReducer",function(){return this._alo.isReducer.apply(this._alo,arguments)}),Ly=new ty("parentReducer","reducer",function(){return this._alo.isReducer.apply(this._alo,arguments)}),qy=function Reducer(){this._enabled=!0,this._id=null,this._reducerRelations=null,this._storeRelations=null,zy.constructParent(this),Ny.constructParent(this),By.constructParent(this),Ly.constructParent(this),Uy.apply(this,arguments)},Uy=xy.createPolymorphic();Uy.signature("",function(){}),Uy.signature("function",function(e){
this.setCustomizer(e,"prepare")}),Uy.signature("array",function(e){this.addReducer(e)}),Uy.signature("function, function",function(e,t){this.setCustomizer(e,"prepare"),this.setCustomizer(t)}),Uy.signature("function, array",function(e,t){this.setCustomizer(e,"prepare"),this.addReducer(t)}),Uy.signature("function, function, array",function(e,t,r){this.setCustomizer(e,"prepare"),this.setCustomizer(t),this.addReducer(r)}),qy.prototype.getId=null,qy.prototype.addStore=null,qy.prototype.removeStore=null,zy.registerParentPrototype(qy.prototype),Ny.registerParentPrototype(qy.prototype),By.registerParentPrototype(qy.prototype),Ly.registerParentPrototype(qy.prototype),qy.prototype.createReducer=function(){var e=this._alo.createReducer.apply(this._alo,arguments);return this.addReducer(e),e},qy.prototype.reduce=function reduce(e,t){if(this.isEnabled()){var r=this.callCustomizer("prepare",xy.cloneDeep(e),t);void 0!==r&&(e=r),xy.forEach(this.getReducer(!1),function(r){e=r.reduce(xy.cloneDeep(e),t)}),r=this.callCustomizer("finalize",xy.cloneDeep(e),t),void 0!==r&&(e=r)}return e},qy.prototype.disable=function disable(){return this._enabled=!1,this},qy.prototype.enable=function enable(){return this._enabled=!0,this},qy.prototype.isEnabled=function isEnabled(){return this._enabled},qy.prototype.stop=function stop(){return this.removeStore(),this.disable(),this};var Hy=new Zh,Vy=function createTypecheck(e,t){return function(r){if(e(r))return!0;throw new Error("Type of argument should be a "+t)}},Ky=function isString(e){return Vy(Hy.isString,"string")(e)},Gy=new Zh,Wy=new ty("store","reducer",function(){return this._alo.isReducer.apply(this._alo,arguments)}),Xy=new ty("store","subscription",function(){return this._alo.isSubscription.apply(this._alo,arguments)}),Yy=new ty("store","middleware",function(){return this._alo.isMiddleware.apply(this._alo,arguments)}),Zy=new ty("store","computedProperty",function(){return this._alo.isDependency.apply(this._alo,arguments)}),Jy=function Store(e,t){void 0!==e&&null!==e||(e={}),e={state:e,computed:{},action:{type:null,payload:null}},this._id=null,null!=t&&Ky(t)&&(t=t.trim(),""!==t&&(this._id=t)),this._stream=Gy.createStream(e),this._reducerRelations=null,this._middlewareRelations=null,this._subscriptionRelations=null,this._computedProperty={},Wy.constructParent(this),Yy.constructParent(this),Xy.constructParent(this),Zy.constructParent(this)};Jy.prototype.getId=null,Jy.prototype.getReducer=null,Jy.prototype.addReducer=null,Jy.prototype.removeReducer=null,Jy.prototype.getMiddleware=null,Jy.prototype.addMiddleware=null,Jy.prototype.getSubscription=null,Jy.prototype.addSubscription=null,Jy.prototype.removeSubscription=null,Wy.registerParentPrototype(Jy.prototype),Yy.registerParentPrototype(Jy.prototype),Xy.registerParentPrototype(Jy.prototype),Zy.registerParentPrototype(Jy.prototype),Jy.prototype.createReducer=function createReducer(){var e=this._alo.createReducer.apply(this._alo,arguments);return this.addReducer(e),e},Jy.prototype.mapState=function mapState(e){if(Gy.isFunction(e))return Gy.map(this.getState(),e);throw new Error("Argument given should be a function")},Jy.prototype.mapData=function mapData(e){if(Gy.isFunction(e))return Gy.map(this.getData(),e);throw new Error("Argument given should be a function")},Jy.prototype.mapStream=function mapStream(e){if(Gy.isFunction(e))return Gy.mapStream(e,this.getStream());throw new Error("Argument given should be a function")},Jy.prototype.getStream=function getStream(){return this._stream},Jy.prototype.getData=function getData(){return Gy.cloneDeep(this.getStream()())},Jy.prototype.getState=function getState(){return this.getData().state},Jy.prototype.createComputedProperty=function createComputedProperty(){var e=this._alo.createDependency.apply(this._alo,arguments);return this.addComputedProperty(e),e},Jy.prototype.createSubscription=function createSubscription(){var e=this._alo.createSubscription.apply(this._alo,arguments);return this.addSubscription(e),e},Jy.prototype.subscribe=Jy.prototype.createSubscription,Jy.prototype.dispatch=function(){var e=this,t=Gy.values(arguments),r=function(e){return void 0===e.type&&(e.type=null),void 0===e.payload&&(e.payload=null),e};return Gy.Promise.resolve().then(function(){var r=e.getMiddleware(!1);return r.length>0&&e._alo.isMiddleware(r[0])?(t.unshift(e),Gy.Promise.resolve().then(function(){return r[0].meddleRecursive(r,t)}).then(function(e){return Gy.isArray(e)?e[0]:e})):t[0]}).then(function(t){if(Gy.isPlainObject(t)){t=r(t);var n=e.getData(),o=n.state;return Gy.forEach(e.getReducer(!1),function(r){e._alo.isReducer(r)&&(o=r.reduce(Gy.cloneDeep(o),t))}),o={state:o,computed:{},action:t},Gy.Promise.resolve().then(function(){var t=e.getComputedProperty(!1);return t.length>0?t[0].reduceRecursive(t,e.getId(),Gy.cloneDeep(o)):o.computed}).then(function(t){o.computed=t;var r=e.getStream();r(o)})}return!1})};var Qy=new Zh,ed=new Fy(!0),td=new ty("middleware","parentMiddleware",function(){return this._alo.isMiddleware.apply(this._alo,arguments)}),rd=new ty("parentMiddleware","middleware",function(){return this._alo.isMiddleware.apply(this._alo,arguments)}),nd=new ty("middleware","store",function(){return this._alo.isStore.apply(this._alo,arguments)}),od=function Middleware(){ed.constructParent(this),td.constructParent(this),rd.constructParent(this),nd.constructParent(this),ed.constructParent(this),id.apply(this,arguments)},id=Qy.createPolymorphic();id.signature("",function(){}),id.signature("function",function(e){this.setCustomizer(e,"prepare")}),id.signature("array",function(e){this.addMiddleware(e)}),id.signature("function, function",function(e,t){this.setCustomizer(e,"prepare"),this.setCustomizer(t)}),id.signature("function, array",function(e,t){this.setCustomizer(e,"prepare"),this.addMiddleware(t)}),id.signature("function, function, array",function(e,t,r){this.setCustomizer(e,"prepare"),this.setCustomizer(t),this.addMiddleware(r)}),ed.registerParentPrototype(od.prototype),td.registerParentPrototype(od.prototype),rd.registerParentPrototype(od.prototype),nd.registerParentPrototype(od.prototype),od.prototype.createMiddleware=function createMiddleware(){var e=this._alo.createMiddleware.apply(this._alo,arguments);return this.addMiddleware(e),e},od.prototype.meddleRecursive=function meddleRecursive(e,t){var r=this;t=Qy.values(t);var n=t[0];if(Qy.isArray(e))return 0===e.length?t.slice(1):Qy.Promise.resolve().then(function(){return r._alo.isMiddleware(e[0])?e[0].meddle(t):t.slice(1)}).then(function(o){return o=Qy.values(o),void 0===o[0]?o=t:o.unshift(n),t=o,e=e.slice(1),r.meddleRecursive(e,o)});throw new Error("Argument given should be an array")},od.prototype.meddle=function meddle(e){var t=this;e=Qy.values(e);var r=e[0];e=e.slice(1);var n=function(t){return void 0===t?t=e:Qy.isArray(t)||(t=[t]),e=Qy.cloneDeep(t),t};return Qy.Promise.resolve().then(function(){var n=Qy.cloneDeep(e);return n.unshift(r),n.unshift("prepare"),t.callCustomizer.apply(t,n)}).then(function(e){return Qy.Promise.all(n(e))}).then(function(e){return e.unshift(r),t.meddleRecursive(t.getMiddleware(!1),e)}).then(function(e){return Qy.Promise.all(n(e))}).then(function(e){return e.unshift(r),e.unshift("finalize"),t.callCustomizer.apply(t,e)}).then(function(e){return Qy.Promise.all(n(e))}).then(function(e){return e})};var ad=function Alo(e){this.util=new Zh,this._id=this.util.isString(e)&&""!==e?e:this.util.uniqueId()};ad.prototype.createSubscription=function createSubscription(){var e=Object.create(hy.prototype);return e._alo=this,hy.apply(e,arguments),e},ad.prototype.isSubscription=function isSubscription(e){return e instanceof hy},ad.prototype.createDependency=function createDependency(){var e=Object.create(wy.prototype);return e._alo=this,wy.apply(e,arguments),e},ad.prototype.isDependency=function isDependency(e){return e instanceof wy},ad.prototype.createMember=function createMember(){var e=Object.create(Ey.prototype);return e._alo=this,Ey.apply(e,arguments),e},ad.prototype.isMember=function isMember(e){return e instanceof Ey},ad.prototype.createReducer=function createReducer(){var e=Object.create(qy.prototype);return e._alo=this,qy.apply(e,arguments),e},ad.prototype.isReducer=function isReducer(e){return e instanceof qy},ad.prototype.createStore=function createStore(){var e=Object.create(Jy.prototype);return e._alo=this,Jy.apply(e,arguments),e},ad.prototype.isStore=function isStore(e,t){t=t===!0;var isStore=e instanceof Jy,r=!t||e._alo&&e._alo._id===this._id;return isStore&&r},ad.prototype.isMiddleware=function isMiddleware(e){return e instanceof od},ad.prototype.createMiddleware=function createMiddleware(){var e=Object.create(od.prototype);return e._alo=this,od.apply(e,arguments),e};var ud=new ad,sd={};sd.createUntypedReplace=function(){var e=function(e,t){return void 0!==t.type&&null!==t.type&&""!==t.type||void 0===t.payload?e:t.payload};return ud.createReducer(e)};var cd=new ad,pd=cd.util,ld={};ld.createThunk=function createThunk(){var e=cd.createMiddleware(function(){var e=pd.values(arguments),t=e[1],r=function(e){var t=e[1];return e.splice(1,1),pd.Promise.resolve().then(function(){return t.apply(null,e)}).then(function(t){return pd.isFunction(t)?(e.splice(1,0,t),r(e)):(e.splice(0,1,t),e)})};return pd.isFunction(t)?r(e):(e.splice(0,1),e)});return e};var fd={};fd.reducers=sd,fd.middlewares=ld;var hd=function addExtras(e){var t=function(e){function Alo(t){e.call(this,t),this.extras=fd}return e&&(Alo.__proto__=e),Alo.prototype=Object.create(e&&e.prototype),Alo.prototype.constructor=Alo,Alo}(e);return t},yd=hd(ad);return yd});
//# sourceMappingURL=./dist/alo.full.min.js.map