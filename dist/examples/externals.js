/*!
 * alo
 * Copyright(c) 2019 Katja Lutz
 * MIT Licensed
 * https://opensource.org/licenses/MIT
*/
var Faye=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";var constants=__webpack_require__(1),Logging=__webpack_require__(2),Faye={VERSION:constants.VERSION,Client:__webpack_require__(4),Scheduler:__webpack_require__(32)};Logging.wrapper=Faye,module.exports=Faye},function(module,exports){module.exports={VERSION:"1.2.4",BAYEUX_VERSION:"1.0",ID_LENGTH:160,JSONP_CALLBACK:"jsonpcallback",CONNECTION_TYPES:["long-polling","cross-origin-long-polling","callback-polling","websocket","eventsource","in-process"],MANDATORY_CONNECTION_TYPES:["long-polling","callback-polling","in-process"]}},function(module,exports,__webpack_require__){"use strict";var toJSON=__webpack_require__(3),Logging={LOG_LEVELS:{fatal:4,error:3,warn:2,info:1,debug:0},writeLog:function(messageArgs,level){var logger=Logging.logger||(Logging.wrapper||Logging).logger;if(logger){var args=Array.prototype.slice.apply(messageArgs),banner="[Faye",klass=this.className,message=args.shift().replace(/\?/g,function(){try{return toJSON(args.shift())}catch(error){return"[Object]"}});klass&&(banner+="."+klass),banner+="] ","function"==typeof logger[level]?logger[level](banner+message):"function"==typeof logger&&logger(banner+message)}}};for(var key in Logging.LOG_LEVELS)!function(level){Logging[level]=function(){this.writeLog(arguments,level)}}(key);module.exports=Logging},function(module,exports){"use strict";module.exports=function(object){return JSON.stringify(object,function(key,value){return this[key]instanceof Array?this[key]:value})}},function(module,exports,__webpack_require__){(function(global){"use strict";var asap=__webpack_require__(5),Class=__webpack_require__(7),URI=(__webpack_require__(9),__webpack_require__(10)),array=__webpack_require__(11),browser=__webpack_require__(12),constants=__webpack_require__(1),extend=__webpack_require__(8),validateOptions=__webpack_require__(13),Deferrable=__webpack_require__(14),Logging=__webpack_require__(2),Publisher=__webpack_require__(15),Channel=__webpack_require__(17),Dispatcher=__webpack_require__(19),Error=__webpack_require__(33),Extensible=__webpack_require__(34),Publication=__webpack_require__(35),Subscription=__webpack_require__(36),Client=Class({className:"Client",UNCONNECTED:1,CONNECTING:2,CONNECTED:3,DISCONNECTED:4,HANDSHAKE:"handshake",RETRY:"retry",NONE:"none",CONNECTION_TIMEOUT:60,DEFAULT_ENDPOINT:"/bayeux",INTERVAL:0,initialize:function(endpoint,options){this.info("New client created for ?",endpoint),validateOptions(options=options||{},["interval","timeout","endpoints","proxy","retry","scheduler","websocketExtensions","tls","ca"]),this._channels=new Channel.Set,this._dispatcher=Dispatcher.create(this,endpoint||this.DEFAULT_ENDPOINT,options),this._messageId=0,this._state=this.UNCONNECTED,this._responseCallbacks={},this._advice={reconnect:this.RETRY,interval:1e3*(options.interval||this.INTERVAL),timeout:1e3*(options.timeout||this.CONNECTION_TIMEOUT)},this._dispatcher.timeout=this._advice.timeout/1e3,this._dispatcher.bind("message",this._receiveMessage,this),browser.Event&&void 0!==global.onbeforeunload&&browser.Event.on(global,"beforeunload",function(){array.indexOf(this._dispatcher._disabled,"autodisconnect")<0&&this.disconnect()},this)},addWebsocketExtension:function(extension){return this._dispatcher.addWebsocketExtension(extension)},disable:function(feature){return this._dispatcher.disable(feature)},setHeader:function(name,value){return this._dispatcher.setHeader(name,value)},handshake:function(callback,context){if(this._advice.reconnect!==this.NONE&&this._state===this.UNCONNECTED){this._state=this.CONNECTING;var self=this;this.info("Initiating handshake with ?",URI.stringify(this._dispatcher.endpoint)),this._dispatcher.selectTransport(constants.MANDATORY_CONNECTION_TYPES),this._sendMessage({channel:Channel.HANDSHAKE,version:constants.BAYEUX_VERSION,supportedConnectionTypes:this._dispatcher.getConnectionTypes()},{},function(response){response.successful?(this._state=this.CONNECTED,this._dispatcher.clientId=response.clientId,this._dispatcher.selectTransport(response.supportedConnectionTypes),this.info("Handshake successful: ?",this._dispatcher.clientId),this.subscribe(this._channels.getKeys(),!0),callback&&asap(function(){callback.call(context)})):(this.info("Handshake unsuccessful"),global.setTimeout(function(){self.handshake(callback,context)},1e3*this._dispatcher.retry),this._state=this.UNCONNECTED)},this)}},connect:function(callback,context){if(this._advice.reconnect!==this.NONE&&this._state!==this.DISCONNECTED){if(this._state===this.UNCONNECTED)return this.handshake(function(){this.connect(callback,context)},this);this.callback(callback,context),this._state===this.CONNECTED&&(this.info("Calling deferred actions for ?",this._dispatcher.clientId),this.setDeferredStatus("succeeded"),this.setDeferredStatus("unknown"),this._connectRequest||(this._connectRequest=!0,this.info("Initiating connection for ?",this._dispatcher.clientId),this._sendMessage({channel:Channel.CONNECT,clientId:this._dispatcher.clientId,connectionType:this._dispatcher.connectionType},{},this._cycleConnection,this)))}},disconnect:function(){if(this._state===this.CONNECTED){this._state=this.DISCONNECTED,this.info("Disconnecting ?",this._dispatcher.clientId);var promise=new Publication;return this._sendMessage({channel:Channel.DISCONNECT,clientId:this._dispatcher.clientId},{},function(response){response.successful?(this._dispatcher.close(),promise.setDeferredStatus("succeeded")):promise.setDeferredStatus("failed",Error.parse(response.error))},this),this.info("Clearing channel listeners for ?",this._dispatcher.clientId),this._channels=new Channel.Set,promise}},subscribe:function(channel,callback,context){if(channel instanceof Array)return array.map(channel,function(c){return this.subscribe(c,callback,context)},this);var subscription=new Subscription(this,channel,callback,context),force=!0===callback;return this._channels.hasSubscription(channel)&&!force?(this._channels.subscribe([channel],subscription),subscription.setDeferredStatus("succeeded"),subscription):(this.connect(function(){this.info("Client ? attempting to subscribe to ?",this._dispatcher.clientId,channel),force||this._channels.subscribe([channel],subscription),this._sendMessage({channel:Channel.SUBSCRIBE,clientId:this._dispatcher.clientId,subscription:channel},{},function(response){if(!response.successful)return subscription.setDeferredStatus("failed",Error.parse(response.error)),this._channels.unsubscribe(channel,subscription);var channels=[].concat(response.subscription);this.info("Subscription acknowledged for ? to ?",this._dispatcher.clientId,channels),subscription.setDeferredStatus("succeeded")},this)},this),subscription)},unsubscribe:function(channel,subscription){if(channel instanceof Array)return array.map(channel,function(c){return this.unsubscribe(c,subscription)},this);this._channels.unsubscribe(channel,subscription)&&this.connect(function(){this.info("Client ? attempting to unsubscribe from ?",this._dispatcher.clientId,channel),this._sendMessage({channel:Channel.UNSUBSCRIBE,clientId:this._dispatcher.clientId,subscription:channel},{},function(response){if(response.successful){var channels=[].concat(response.subscription);this.info("Unsubscription acknowledged for ? from ?",this._dispatcher.clientId,channels)}},this)},this)},publish:function(channel,data,options){validateOptions(options||{},["attempts","deadline"]);var publication=new Publication;return this.connect(function(){this.info("Client ? queueing published message to ?: ?",this._dispatcher.clientId,channel,data),this._sendMessage({channel:channel,data:data,clientId:this._dispatcher.clientId},options,function(response){response.successful?publication.setDeferredStatus("succeeded"):publication.setDeferredStatus("failed",Error.parse(response.error))},this)},this),publication},_sendMessage:function(message,options,callback,context){message.id=this._generateMessageId();var timeout=this._advice.timeout?1.2*this._advice.timeout/1e3:1.2*this._dispatcher.retry;this.pipeThroughExtensions("outgoing",message,null,function(message){message&&(callback&&(this._responseCallbacks[message.id]=[callback,context]),this._dispatcher.sendMessage(message,timeout,options||{}))},this)},_generateMessageId:function(){return this._messageId+=1,this._messageId>=Math.pow(2,32)&&(this._messageId=0),this._messageId.toString(36)},_receiveMessage:function(message){var callback,id=message.id;void 0!==message.successful&&(callback=this._responseCallbacks[id],delete this._responseCallbacks[id]),this.pipeThroughExtensions("incoming",message,null,function(message){message&&(message.advice&&this._handleAdvice(message.advice),this._deliverMessage(message),callback&&callback[0].call(callback[1],message))},this)},_handleAdvice:function(advice){extend(this._advice,advice),this._dispatcher.timeout=this._advice.timeout/1e3,this._advice.reconnect===this.HANDSHAKE&&this._state!==this.DISCONNECTED&&(this._state=this.UNCONNECTED,this._dispatcher.clientId=null,this._cycleConnection())},_deliverMessage:function(message){message.channel&&void 0!==message.data&&(this.info("Client ? calling listeners for ? with ?",this._dispatcher.clientId,message.channel,message.data),this._channels.distributeMessage(message))},_cycleConnection:function(){this._connectRequest&&(this._connectRequest=null,this.info("Closed connection for ?",this._dispatcher.clientId));var self=this;global.setTimeout(function(){self.connect()},this._advice.interval)}});extend(Client.prototype,Deferrable),extend(Client.prototype,Publisher),extend(Client.prototype,Logging),extend(Client.prototype,Extensible),module.exports=Client}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var rawAsap=__webpack_require__(6),freeTasks=[],pendingErrors=[],requestErrorThrow=rawAsap.makeRequestCallFromTimer(function(){if(pendingErrors.length)throw pendingErrors.shift()});function asap(task){var rawTask;(rawTask=freeTasks.length?freeTasks.pop():new RawTask).task=task,rawAsap(rawTask)}function RawTask(){this.task=null}module.exports=asap,RawTask.prototype.call=function(){try{this.task.call()}catch(error){asap.onerror?asap.onerror(error):(pendingErrors.push(error),requestErrorThrow())}finally{this.task=null,freeTasks[freeTasks.length]=this}}},function(module,exports){(function(global){"use strict";function rawAsap(task){queue.length||(requestFlush(),!0),queue[queue.length]=task}module.exports=rawAsap;var requestFlush,queue=[],index=0,capacity=1024;function flush(){for(;index<queue.length;){var currentIndex=index;if(index+=1,queue[currentIndex].call(),index>capacity){for(var scan=0,newLength=queue.length-index;scan<newLength;scan++)queue[scan]=queue[scan+index];queue.length-=index,index=0}}queue.length=0,index=0,!1}var toggle,observer,node,scope=void 0!==global?global:self,BrowserMutationObserver=scope.MutationObserver||scope.WebKitMutationObserver;function makeRequestCallFromTimer(callback){return function(){var timeoutHandle=setTimeout(handleTimer,0),intervalHandle=setInterval(handleTimer,50);function handleTimer(){clearTimeout(timeoutHandle),clearInterval(intervalHandle),callback()}}}"function"==typeof BrowserMutationObserver?(toggle=1,observer=new BrowserMutationObserver(flush),node=document.createTextNode(""),observer.observe(node,{characterData:!0}),requestFlush=function(){toggle=-toggle,node.data=toggle}):requestFlush=makeRequestCallFromTimer(flush),rawAsap.requestFlush=requestFlush,rawAsap.makeRequestCallFromTimer=makeRequestCallFromTimer}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var extend=__webpack_require__(8);module.exports=function(parent,methods){"function"!=typeof parent&&(methods=parent,parent=Object);var klass=function(){return this.initialize&&this.initialize.apply(this,arguments)||this},bridge=function(){};return bridge.prototype=parent.prototype,klass.prototype=new bridge,extend(klass.prototype,methods),klass}},function(module,exports){"use strict";module.exports=function(dest,source,overwrite){if(!source)return dest;for(var key in source)source.hasOwnProperty(key)&&(dest.hasOwnProperty(key)&&!1===overwrite||dest[key]!==source[key]&&(dest[key]=source[key]));return dest}},function(module,exports,__webpack_require__){"use strict";var asap=__webpack_require__(5),RETURN=function(x){return x},THROW=function(x){throw x},Promise=function(task){if(this._state=0,this._onFulfilled=[],this._onRejected=[],"function"==typeof task){var self=this;task(function(value){resolve(self,value)},function(reason){reject(self,reason)})}};Promise.prototype.then=function(onFulfilled,onRejected){var next=new Promise;return registerOnFulfilled(this,onFulfilled,next),registerOnRejected(this,onRejected,next),next},Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)};var registerOnFulfilled=function(promise,onFulfilled,next){"function"!=typeof onFulfilled&&(onFulfilled=RETURN);var handler=function(value){invoke(onFulfilled,value,next)};0===promise._state?promise._onFulfilled.push(handler):1===promise._state&&handler(promise._value)},registerOnRejected=function(promise,onRejected,next){"function"!=typeof onRejected&&(onRejected=THROW);var handler=function(reason){invoke(onRejected,reason,next)};0===promise._state?promise._onRejected.push(handler):2===promise._state&&handler(promise._reason)},invoke=function(fn,value,next){asap(function(){_invoke(fn,value,next)})},_invoke=function(fn,value,next){var outcome;try{outcome=fn(value)}catch(error){return reject(next,error)}outcome===next?reject(next,new TypeError("Recursive promise chain detected")):resolve(next,outcome)},resolve=function(promise,value){var type,then,called=!1;try{if(type=typeof value,"function"!=typeof(then=null!==value&&("function"===type||"object"===type)&&value.then))return fulfill(promise,value);then.call(value,function(v){called^(called=!0)&&resolve(promise,v)},function(r){called^(called=!0)&&reject(promise,r)})}catch(error){if(!(called^(called=!0)))return;reject(promise,error)}},fulfill=function(promise,value){if(0===promise._state){promise._state=1,promise._value=value,promise._onRejected=[];for(var fn,onFulfilled=promise._onFulfilled;fn=onFulfilled.shift();)fn(value)}},reject=function(promise,reason){if(0===promise._state){promise._state=2,promise._reason=reason,promise._onFulfilled=[];for(var fn,onRejected=promise._onRejected;fn=onRejected.shift();)fn(reason)}};Promise.resolve=function(value){return new Promise(function(resolve,reject){resolve(value)})},Promise.reject=function(reason){return new Promise(function(resolve,reject){reject(reason)})},Promise.all=function(promises){return new Promise(function(resolve,reject){var i,list=[],n=promises.length;if(0===n)return resolve(list);for(i=0;i<n;i++)!function(promise,i){Promise.resolve(promise).then(function(value){list[i]=value,0==--n&&resolve(list)},reject)}(promises[i],i)})},Promise.race=function(promises){return new Promise(function(resolve,reject){for(var i=0,n=promises.length;i<n;i++)Promise.resolve(promises[i]).then(resolve,reject)})},Promise.deferred=Promise.pending=function(){var tuple={};return tuple.promise=new Promise(function(resolve,reject){tuple.resolve=resolve,tuple.reject=reject}),tuple},module.exports=Promise},function(module,exports){"use strict";module.exports={isURI:function(uri){return uri&&uri.protocol&&uri.host&&uri.path},isSameOrigin:function(uri){return uri.protocol===location.protocol&&uri.hostname===location.hostname&&uri.port===location.port},parse:function(url){if("string"!=typeof url)return url;var parts,query,pairs,i,n,data,uri={},consume=function(name,pattern){url=url.replace(pattern,function(match){return uri[name]=match,""}),uri[name]=uri[name]||""};for(consume("protocol",/^[a-z]+\:/i),consume("host",/^\/\/[^\/\?#]+/),/^\//.test(url)||uri.host||(url=location.pathname.replace(/[^\/]*$/,"")+url),consume("pathname",/^[^\?#]*/),consume("search",/^\?[^#]*/),consume("hash",/^#.*/),uri.protocol=uri.protocol||location.protocol,uri.host?(uri.host=uri.host.substr(2),parts=uri.host.split(":"),uri.hostname=parts[0],uri.port=parts[1]||""):(uri.host=location.host,uri.hostname=location.hostname,uri.port=location.port),uri.pathname=uri.pathname||"/",uri.path=uri.pathname+uri.search,data={},i=0,n=(pairs=(query=uri.search.replace(/^\?/,""))?query.split("&"):[]).length;i<n;i++)parts=pairs[i].split("="),data[decodeURIComponent(parts[0]||"")]=decodeURIComponent(parts[1]||"");return uri.query=data,uri.href=this.stringify(uri),uri},stringify:function(uri){var string=uri.protocol+"//"+uri.hostname;return uri.port&&(string+=":"+uri.port),string+=uri.pathname+this.queryString(uri.query)+(uri.hash||"")},queryString:function(query){var pairs=[];for(var key in query)query.hasOwnProperty(key)&&pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(query[key]));return 0===pairs.length?"":"?"+pairs.join("&")}}},function(module,exports){"use strict";module.exports={commonElement:function(lista,listb){for(var i=0,n=lista.length;i<n;i++)if(-1!==this.indexOf(listb,lista[i]))return lista[i];return null},indexOf:function(list,needle){if(list.indexOf)return list.indexOf(needle);for(var i=0,n=list.length;i<n;i++)if(list[i]===needle)return i;return-1},map:function(object,callback,context){if(object.map)return object.map(callback,context);var result=[];if(object instanceof Array)for(var i=0,n=object.length;i<n;i++)result.push(callback.call(context||null,object[i],i));else for(var key in object)object.hasOwnProperty(key)&&result.push(callback.call(context||null,key,object[key]));return result},filter:function(array,callback,context){if(array.filter)return array.filter(callback,context);for(var result=[],i=0,n=array.length;i<n;i++)callback.call(context||null,array[i],i)&&result.push(array[i]);return result},asyncEach:function(list,iterator,callback,context){var n=list.length,i=-1,calls=0,looping=!1,iterate=function(){if(calls-=1,(i+=1)===n)return callback&&callback.call(context);iterator(list[i],resume)},resume=function(){calls+=1,function(){if(!looping){for(looping=!0;calls>0;)iterate();looping=!1}}()};resume()}}},function(module,exports){(function(global){"use strict";var Event={_registry:[],on:function(element,eventName,callback,context){var wrapped=function(){callback.call(context)};element.addEventListener?element.addEventListener(eventName,wrapped,!1):element.attachEvent("on"+eventName,wrapped),this._registry.push({_element:element,_type:eventName,_callback:callback,_context:context,_handler:wrapped})},detach:function(element,eventName,callback,context){for(var register,i=this._registry.length;i--;)register=this._registry[i],element&&element!==register._element||eventName&&eventName!==register._type||callback&&callback!==register._callback||context&&context!==register._context||(register._element.removeEventListener?register._element.removeEventListener(register._type,register._handler,!1):register._element.detachEvent("on"+register._type,register._handler),this._registry.splice(i,1),register=null)}};void 0!==global.onunload&&Event.on(global,"unload",Event.detach,Event),module.exports={Event:Event}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var array=__webpack_require__(11);module.exports=function(options,validKeys){for(var key in options)if(array.indexOf(validKeys,key)<0)throw new Error("Unrecognized option: "+key)}},function(module,exports,__webpack_require__){(function(global){"use strict";var Promise=__webpack_require__(9);module.exports={then:function(callback,errback){var self=this;return this._promise||(this._promise=new Promise(function(resolve,reject){self._resolve=resolve,self._reject=reject})),0===arguments.length?this._promise:this._promise.then(callback,errback)},callback:function(callback,context){return this.then(function(value){callback.call(context,value)})},errback:function(callback,context){return this.then(null,function(reason){callback.call(context,reason)})},timeout:function(seconds,message){this.then();var self=this;this._timer=global.setTimeout(function(){self._reject(message)},1e3*seconds)},setDeferredStatus:function(status,value){this._timer&&global.clearTimeout(this._timer),this.then(),"succeeded"===status?this._resolve(value):"failed"===status?this._reject(value):delete this._promise}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var Publisher={countListeners:function(eventType){return this.listeners(eventType).length},bind:function(eventType,listener,context){var slice=Array.prototype.slice,handler=function(){listener.apply(context,slice.call(arguments))};return this._listeners=this._listeners||[],this._listeners.push([eventType,listener,context,handler]),this.on(eventType,handler)},unbind:function(eventType,listener,context){this._listeners=this._listeners||[];for(var tuple,n=this._listeners.length;n--;)(tuple=this._listeners[n])[0]===eventType&&(!listener||tuple[1]===listener&&tuple[2]===context)&&(this._listeners.splice(n,1),this.removeListener(eventType,tuple[3]))}};__webpack_require__(8)(Publisher,__webpack_require__(16).prototype),Publisher.trigger=Publisher.emit,module.exports=Publisher},function(module,exports){var isArray="function"==typeof Array.isArray?Array.isArray:function(xs){return"[object Array]"===Object.prototype.toString.call(xs)};function EventEmitter(){}module.exports=EventEmitter,EventEmitter.prototype.emit=function(type){if("error"===type&&(!this._events||!this._events.error||isArray(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var handler=this._events[type];if(!handler)return!1;if("function"==typeof handler){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}return!0}if(isArray(handler)){args=Array.prototype.slice.call(arguments,1);for(var listeners=handler.slice(),i=0,l=listeners.length;i<l;i++)listeners[i].apply(this,args);return!0}return!1},EventEmitter.prototype.addListener=function(type,listener){if("function"!=typeof listener)throw new Error("addListener only takes instances of Function");return this._events||(this._events={}),this.emit("newListener",type,listener),this._events[type]?isArray(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){var self=this;return self.on(type,function g(){self.removeListener(type,g),listener.apply(this,arguments)}),this},EventEmitter.prototype.removeListener=function(type,listener){if("function"!=typeof listener)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[type])return this;var list=this._events[type];if(isArray(list)){var i=function(xs,x){if(xs.indexOf)return xs.indexOf(x);for(var i=0;i<xs.length;i++)if(x===xs[i])return i;return-1}(list,listener);if(i<0)return this;list.splice(i,1),0==list.length&&delete this._events[type]}else this._events[type]===listener&&delete this._events[type];return this},EventEmitter.prototype.removeAllListeners=function(type){return 0===arguments.length?(this._events={},this):(type&&this._events&&this._events[type]&&(this._events[type]=null),this)},EventEmitter.prototype.listeners=function(type){return this._events||(this._events={}),this._events[type]||(this._events[type]=[]),isArray(this._events[type])||(this._events[type]=[this._events[type]]),this._events[type]}},function(module,exports,__webpack_require__){"use strict";var Class=__webpack_require__(7),extend=__webpack_require__(8),Publisher=__webpack_require__(15),Grammar=__webpack_require__(18),Channel=Class({initialize:function(name){this.id=this.name=name},push:function(message){this.trigger("message",message)},isUnused:function(){return 0===this.countListeners("message")}});extend(Channel.prototype,Publisher),extend(Channel,{HANDSHAKE:"/meta/handshake",CONNECT:"/meta/connect",SUBSCRIBE:"/meta/subscribe",UNSUBSCRIBE:"/meta/unsubscribe",DISCONNECT:"/meta/disconnect",META:"meta",SERVICE:"service",expand:function(name){var segments=this.parse(name),channels=["/**",name],copy=segments.slice();copy[copy.length-1]="*",channels.push(this.unparse(copy));for(var i=1,n=segments.length;i<n;i++)(copy=segments.slice(0,i)).push("**"),channels.push(this.unparse(copy));return channels},isValid:function(name){return Grammar.CHANNEL_NAME.test(name)||Grammar.CHANNEL_PATTERN.test(name)},parse:function(name){return this.isValid(name)?name.split("/").slice(1):null},unparse:function(segments){return"/"+segments.join("/")},isMeta:function(name){var segments=this.parse(name);return segments?segments[0]===this.META:null},isService:function(name){var segments=this.parse(name);return segments?segments[0]===this.SERVICE:null},isSubscribable:function(name){return this.isValid(name)?!this.isMeta(name)&&!this.isService(name):null},Set:Class({initialize:function(){this._channels={}},getKeys:function(){var keys=[];for(var key in this._channels)keys.push(key);return keys},remove:function(name){delete this._channels[name]},hasSubscription:function(name){return this._channels.hasOwnProperty(name)},subscribe:function(names,subscription){for(var name,i=0,n=names.length;i<n;i++){name=names[i],(this._channels[name]=this._channels[name]||new Channel(name)).bind("message",subscription)}},unsubscribe:function(name,subscription){var channel=this._channels[name];return!!channel&&(channel.unbind("message",subscription),!!channel.isUnused()&&(this.remove(name),!0))},distributeMessage:function(message){for(var channels=Channel.expand(message.channel),i=0,n=channels.length;i<n;i++){var channel=this._channels[channels[i]];channel&&channel.trigger("message",message)}}})}),module.exports=Channel},function(module,exports){"use strict";module.exports={CHANNEL_NAME:/^\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*$/,CHANNEL_PATTERN:/^(\/(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)))+)*\/\*{1,2}$/,ERROR:/^([0-9][0-9][0-9]:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*(,(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)*:(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*|[0-9][0-9][0-9]::(((([a-z]|[A-Z])|[0-9])|(\-|\_|\!|\~|\(|\)|\$|\@)| |\/|\*|\.))*)$/,VERSION:/^([0-9])+(\.(([a-z]|[A-Z])|[0-9])(((([a-z]|[A-Z])|[0-9])|\-|\_))*)*$/}},function(module,exports,__webpack_require__){(function(global){"use strict";var Class=__webpack_require__(7),URI=__webpack_require__(10),cookies=__webpack_require__(20),extend=__webpack_require__(8),Logging=__webpack_require__(2),Publisher=__webpack_require__(15),Transport=__webpack_require__(21),Scheduler=__webpack_require__(32),Dispatcher=Class({className:"Dispatcher",MAX_REQUEST_SIZE:2048,DEFAULT_RETRY:5,UP:1,DOWN:2,initialize:function(client,endpoint,options){this._client=client,this.endpoint=URI.parse(endpoint),this._alternates=options.endpoints||{},this.cookies=cookies.CookieJar&&new cookies.CookieJar,this._disabled=[],this._envelopes={},this.headers={},this.retry=options.retry||this.DEFAULT_RETRY,this._scheduler=options.scheduler||Scheduler,this._state=0,this.transports={},this.wsExtensions=[],this.proxy=options.proxy||{},"string"==typeof this._proxy&&(this._proxy={origin:this._proxy});var exts=options.websocketExtensions;if(exts)for(var i=0,n=(exts=[].concat(exts)).length;i<n;i++)this.addWebsocketExtension(exts[i]);for(var type in this.tls=options.tls||{},this.tls.ca=this.tls.ca||options.ca,this._alternates)this._alternates[type]=URI.parse(this._alternates[type]);this.maxRequestSize=this.MAX_REQUEST_SIZE},endpointFor:function(connectionType){return this._alternates[connectionType]||this.endpoint},addWebsocketExtension:function(extension){this.wsExtensions.push(extension)},disable:function(feature){this._disabled.push(feature)},setHeader:function(name,value){this.headers[name]=value},close:function(){var transport=this._transport;delete this._transport,transport&&transport.close()},getConnectionTypes:function(){return Transport.getConnectionTypes()},selectTransport:function(transportTypes){Transport.get(this,transportTypes,this._disabled,function(transport){this.debug("Selected ? transport for ?",transport.connectionType,URI.stringify(transport.endpoint)),transport!==this._transport&&(this._transport&&this._transport.close(),this._transport=transport,this.connectionType=transport.connectionType)},this)},sendMessage:function(message,timeout,options){options=options||{};var scheduler,id=message.id,attempts=options.attempts,deadline=options.deadline&&(new Date).getTime()+1e3*options.deadline,envelope=this._envelopes[id];envelope||(scheduler=new this._scheduler(message,{timeout:timeout,interval:this.retry,attempts:attempts,deadline:deadline}),envelope=this._envelopes[id]={message:message,scheduler:scheduler}),this._sendEnvelope(envelope)},_sendEnvelope:function(envelope){if(this._transport&&!envelope.request&&!envelope.timer){var message=envelope.message,scheduler=envelope.scheduler,self=this;if(!scheduler.isDeliverable())return scheduler.abort(),void delete this._envelopes[message.id];envelope.timer=global.setTimeout(function(){self.handleError(message)},1e3*scheduler.getTimeout()),scheduler.send(),envelope.request=this._transport.sendMessage(message)}},handleResponse:function(reply){var envelope=this._envelopes[reply.id];void 0!==reply.successful&&envelope&&(envelope.scheduler.succeed(),delete this._envelopes[reply.id],global.clearTimeout(envelope.timer)),this.trigger("message",reply),this._state!==this.UP&&(this._state=this.UP,this._client.trigger("transport:up"))},handleError:function(message,immediate){var envelope=this._envelopes[message.id],request=envelope&&envelope.request,self=this;if(request){request.then(function(req){req&&req.abort&&req.abort()});var scheduler=envelope.scheduler;scheduler.fail(),global.clearTimeout(envelope.timer),envelope.request=envelope.timer=null,immediate?this._sendEnvelope(envelope):envelope.timer=global.setTimeout(function(){envelope.timer=null,self._sendEnvelope(envelope)},1e3*scheduler.getInterval()),this._state!==this.DOWN&&(this._state=this.DOWN,this._client.trigger("transport:down"))}}});Dispatcher.create=function(client,endpoint,options){return new Dispatcher(client,endpoint,options)},extend(Dispatcher.prototype,Publisher),extend(Dispatcher.prototype,Logging),module.exports=Dispatcher}).call(exports,function(){return this}())},function(module,exports){"use strict";module.exports={}},function(module,exports,__webpack_require__){"use strict";var Transport=__webpack_require__(22);Transport.register("websocket",__webpack_require__(24)),Transport.register("eventsource",__webpack_require__(28)),Transport.register("long-polling",__webpack_require__(29)),Transport.register("cross-origin-long-polling",__webpack_require__(30)),Transport.register("callback-polling",__webpack_require__(31)),module.exports=Transport},function(module,exports,__webpack_require__){"use strict";var Class=__webpack_require__(7),Cookie=__webpack_require__(20).Cookie,Promise=__webpack_require__(9),URI=__webpack_require__(10),array=__webpack_require__(11),extend=__webpack_require__(8),Logging=__webpack_require__(2),Timeouts=__webpack_require__(23),Channel=__webpack_require__(17),Transport=extend(Class({className:"Transport",DEFAULT_PORTS:{"http:":80,"https:":443,"ws:":80,"wss:":443},MAX_DELAY:0,batching:!0,initialize:function(dispatcher,endpoint){this._dispatcher=dispatcher,this.endpoint=endpoint,this._outbox=[],this._proxy=extend({},this._dispatcher.proxy),this._proxy.origin||(this._proxy.origin=this._findProxy())},close:function(){},encode:function(messages){return""},sendMessage:function(message){return this.debug("Client ? sending message to ?: ?",this._dispatcher.clientId,URI.stringify(this.endpoint),message),this.batching?(this._outbox.push(message),this._flushLargeBatch(),message.channel===Channel.HANDSHAKE?this._publish(.01):(message.channel===Channel.CONNECT&&(this._connectMessage=message),this._publish(this.MAX_DELAY))):Promise.resolve(this.request([message]))},_makePromise:function(){var self=this;this._requestPromise=this._requestPromise||new Promise(function(resolve){self._resolvePromise=resolve})},_publish:function(delay){return this._makePromise(),this.addTimeout("publish",delay,function(){this._flush(),delete this._requestPromise},this),this._requestPromise},_flush:function(){this.removeTimeout("publish"),this._outbox.length>1&&this._connectMessage&&(this._connectMessage.advice={timeout:0}),this._resolvePromise(this.request(this._outbox)),this._connectMessage=null,this._outbox=[]},_flushLargeBatch:function(){if(!(this.encode(this._outbox).length<this._dispatcher.maxRequestSize)){var last=this._outbox.pop();this._makePromise(),this._flush(),last&&this._outbox.push(last)}},_receive:function(replies){if(replies){replies=[].concat(replies),this.debug("Client ? received from ? via ?: ?",this._dispatcher.clientId,URI.stringify(this.endpoint),this.connectionType,replies);for(var i=0,n=replies.length;i<n;i++)this._dispatcher.handleResponse(replies[i])}},_handleError:function(messages,immediate){messages=[].concat(messages),this.debug("Client ? failed to send to ? via ?: ?",this._dispatcher.clientId,URI.stringify(this.endpoint),this.connectionType,messages);for(var i=0,n=messages.length;i<n;i++)this._dispatcher.handleError(messages[i])},_getCookies:function(){var cookies=this._dispatcher.cookies,url=URI.stringify(this.endpoint);return cookies?array.map(cookies.getCookiesSync(url),function(cookie){return cookie.cookieString()}).join("; "):""},_storeCookies:function(setCookie){var cookie,cookies=this._dispatcher.cookies,url=URI.stringify(this.endpoint);if(setCookie&&cookies)for(var i=0,n=(setCookie=[].concat(setCookie)).length;i<n;i++)cookie=Cookie.parse(setCookie[i]),cookies.setCookieSync(cookie,url)},_findProxy:function(){if("undefined"!=typeof process){var protocol=this.endpoint.protocol;if(protocol){var keys,proxy,name=protocol.replace(/:$/,"").toLowerCase()+"_proxy",upcase=name.toUpperCase(),env=process.env;return"http_proxy"===name&&env.REQUEST_METHOD?(1===(keys=Object.keys(env).filter(function(k){return/^http_proxy$/i.test(k)})).length?keys[0]===name&&void 0===env[upcase]&&(proxy=env[name]):keys.length>1&&(proxy=env[name]),proxy=proxy||env["CGI_"+upcase]):(proxy=env[name]||env[upcase])&&!env[name]&&console.warn("The environment variable "+upcase+" is discouraged. Use "+name+"."),proxy}}}}),{get:function(dispatcher,allowed,disabled,callback,context){var endpoint=dispatcher.endpoint;array.asyncEach(this._transports,function(pair,resume){var connType=pair[0],klass=pair[1],connEndpoint=dispatcher.endpointFor(connType);return array.indexOf(disabled,connType)>=0?resume():array.indexOf(allowed,connType)<0?(klass.isUsable(dispatcher,connEndpoint,function(){}),resume()):void klass.isUsable(dispatcher,connEndpoint,function(isUsable){if(!isUsable)return resume();var transport=klass.hasOwnProperty("create")?klass.create(dispatcher,connEndpoint):new klass(dispatcher,connEndpoint);callback.call(context,transport)})},function(){throw new Error("Could not find a usable connection type for "+URI.stringify(endpoint))})},register:function(type,klass){this._transports.push([type,klass]),klass.prototype.connectionType=type},getConnectionTypes:function(){return array.map(this._transports,function(t){return t[0]})},_transports:[]});extend(Transport.prototype,Logging),extend(Transport.prototype,Timeouts),module.exports=Transport},function(module,exports){(function(global){"use strict";module.exports={addTimeout:function(name,delay,callback,context){if(this._timeouts=this._timeouts||{},!this._timeouts.hasOwnProperty(name)){var self=this;this._timeouts[name]=global.setTimeout(function(){delete self._timeouts[name],callback.call(context)},1e3*delay)}},removeTimeout:function(name){this._timeouts=this._timeouts||{};var timeout=this._timeouts[name];timeout&&(global.clearTimeout(timeout),delete this._timeouts[name])},removeAllTimeouts:function(){for(var name in this._timeouts=this._timeouts||{},this._timeouts)this.removeTimeout(name)}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var Class=__webpack_require__(7),Promise=__webpack_require__(9),Set=__webpack_require__(25),URI=__webpack_require__(10),browser=__webpack_require__(12),copyObject=__webpack_require__(26),extend=__webpack_require__(8),toJSON=__webpack_require__(3),ws=__webpack_require__(27),Deferrable=__webpack_require__(14),WebSocket=extend(Class(__webpack_require__(22),{UNCONNECTED:1,CONNECTING:2,CONNECTED:3,batching:!1,isUsable:function(callback,context){this.callback(function(){callback.call(context,!0)}),this.errback(function(){callback.call(context,!1)}),this.connect()},request:function(messages){this._pending=this._pending||new Set;for(var i=0,n=messages.length;i<n;i++)this._pending.add(messages[i]);var self=this,promise=new Promise(function(resolve,reject){self.callback(function(socket){socket&&1===socket.readyState&&(socket.send(toJSON(messages)),resolve(socket))}),self.connect()});return{abort:function(){promise.then(function(ws){ws.close()})}}},connect:function(){if(!WebSocket._unloaded&&(this._state=this._state||this.UNCONNECTED,this._state===this.UNCONNECTED)){this._state=this.CONNECTING;var socket=this._createSocket();if(!socket)return this.setDeferredStatus("failed");var self=this;socket.onopen=function(){socket.headers&&self._storeCookies(socket.headers["set-cookie"]),self._socket=socket,self._state=self.CONNECTED,self._everConnected=!0,self._ping(),self.setDeferredStatus("succeeded",socket)};var closed=!1;socket.onclose=socket.onerror=function(){if(!closed){closed=!0;var wasConnected=self._state===self.CONNECTED;socket.onopen=socket.onclose=socket.onerror=socket.onmessage=null,delete self._socket,self._state=self.UNCONNECTED,self.removeTimeout("ping");var pending=self._pending?self._pending.toArray():[];delete self._pending,wasConnected||self._everConnected?(self.setDeferredStatus("unknown"),self._handleError(pending,wasConnected)):self.setDeferredStatus("failed")}},socket.onmessage=function(event){var replies;try{replies=JSON.parse(event.data)}catch(error){}if(replies){for(var i=0,n=(replies=[].concat(replies)).length;i<n;i++)void 0!==replies[i].successful&&self._pending.remove(replies[i]);self._receive(replies)}}}},close:function(){this._socket&&this._socket.close()},_createSocket:function(){var url=WebSocket.getSocketUrl(this.endpoint),headers=this._dispatcher.headers,extensions=this._dispatcher.wsExtensions,cookie=this._getCookies(),tls=this._dispatcher.tls,options={extensions:extensions,headers:headers,proxy:this._proxy,tls:tls};return""!==cookie&&(options.headers.Cookie=cookie),ws.create(url,[],options)},_ping:function(){this._socket&&1===this._socket.readyState&&(this._socket.send("[]"),this.addTimeout("ping",this._dispatcher.timeout/2,this._ping,this))}}),{PROTOCOLS:{"http:":"ws:","https:":"wss:"},create:function(dispatcher,endpoint){var sockets=dispatcher.transports.websocket=dispatcher.transports.websocket||{};return sockets[endpoint.href]=sockets[endpoint.href]||new this(dispatcher,endpoint),sockets[endpoint.href]},getSocketUrl:function(endpoint){return(endpoint=copyObject(endpoint)).protocol=this.PROTOCOLS[endpoint.protocol],URI.stringify(endpoint)},isUsable:function(dispatcher,endpoint,callback,context){this.create(dispatcher,endpoint).isUsable(callback,context)}});extend(WebSocket.prototype,Deferrable),browser.Event&&void 0!==global.onbeforeunload&&browser.Event.on(global,"beforeunload",function(){WebSocket._unloaded=!0}),module.exports=WebSocket}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var Class=__webpack_require__(7);module.exports=Class({initialize:function(){this._index={}},add:function(item){var key=void 0!==item.id?item.id:item;return!this._index.hasOwnProperty(key)&&(this._index[key]=item,!0)},forEach:function(block,context){for(var key in this._index)this._index.hasOwnProperty(key)&&block.call(context,this._index[key])},isEmpty:function(){for(var key in this._index)if(this._index.hasOwnProperty(key))return!1;return!0},member:function(item){for(var key in this._index)if(this._index[key]===item)return!0;return!1},remove:function(item){var key=void 0!==item.id?item.id:item,removed=this._index[key];return delete this._index[key],removed},toArray:function(){var array=[];return this.forEach(function(item){array.push(item)}),array}})},function(module,exports){"use strict";var copyObject=function(object){var clone,i,key;if(object instanceof Array){for(clone=[],i=object.length;i--;)clone[i]=copyObject(object[i]);return clone}if("object"==typeof object){for(key in clone=null===object?null:{},object)clone[key]=copyObject(object[key]);return clone}return object};module.exports=copyObject},function(module,exports){(function(global){"use strict";var WS=global.MozWebSocket||global.WebSocket;module.exports={create:function(url,protocols,options){return"function"!=typeof WS?null:new WS(url)}}}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var Class=__webpack_require__(7),URI=__webpack_require__(10),copyObject=__webpack_require__(26),extend=__webpack_require__(8),Deferrable=__webpack_require__(14),Transport=__webpack_require__(22),XHR=__webpack_require__(29),EventSource=extend(Class(Transport,{initialize:function(dispatcher,endpoint){if(Transport.prototype.initialize.call(this,dispatcher,endpoint),!global.EventSource)return this.setDeferredStatus("failed");this._xhr=new XHR(dispatcher,endpoint),(endpoint=copyObject(endpoint)).pathname+="/"+dispatcher.clientId;var socket=new global.EventSource(URI.stringify(endpoint)),self=this;socket.onopen=function(){self._everConnected=!0,self.setDeferredStatus("succeeded")},socket.onerror=function(){self._everConnected?self._handleError([]):(self.setDeferredStatus("failed"),socket.close())},socket.onmessage=function(event){var replies;try{replies=JSON.parse(event.data)}catch(error){}replies?self._receive(replies):self._handleError([])},this._socket=socket},close:function(){this._socket&&(this._socket.onopen=this._socket.onerror=this._socket.onmessage=null,this._socket.close(),delete this._socket)},isUsable:function(callback,context){this.callback(function(){callback.call(context,!0)}),this.errback(function(){callback.call(context,!1)})},encode:function(messages){return this._xhr.encode(messages)},request:function(messages){return this._xhr.request(messages)}}),{isUsable:function(dispatcher,endpoint,callback,context){if(!dispatcher.clientId)return callback.call(context,!1);XHR.isUsable(dispatcher,endpoint,function(usable){if(!usable)return callback.call(context,!1);this.create(dispatcher,endpoint).isUsable(callback,context)},this)},create:function(dispatcher,endpoint){var sockets=dispatcher.transports.eventsource=dispatcher.transports.eventsource||{},id=dispatcher.clientId,url=copyObject(endpoint);return url.pathname+="/"+(id||""),sockets[url=URI.stringify(url)]=sockets[url]||new this(dispatcher,endpoint),sockets[url]}});extend(EventSource.prototype,Deferrable),module.exports=EventSource}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var Class=__webpack_require__(7),URI=__webpack_require__(10),browser=__webpack_require__(12),extend=__webpack_require__(8),toJSON=__webpack_require__(3),XHR=extend(Class(__webpack_require__(22),{encode:function(messages){return toJSON(messages)},request:function(messages){var xhr,href=this.endpoint.href,self=this;if(global.XMLHttpRequest)xhr=new XMLHttpRequest;else{if(!global.ActiveXObject)return this._handleError(messages);xhr=new ActiveXObject("Microsoft.XMLHTTP")}xhr.open("POST",href,!0),xhr.setRequestHeader("Content-Type","application/json"),xhr.setRequestHeader("Pragma","no-cache"),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");var headers=this._dispatcher.headers;for(var key in headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);var abort=function(){xhr.abort()};return void 0!==global.onbeforeunload&&browser.Event.on(global,"beforeunload",abort),xhr.onreadystatechange=function(){if(xhr&&4===xhr.readyState){var replies=null,status=xhr.status,text=xhr.responseText,successful=status>=200&&status<300||304===status||1223===status;if(void 0!==global.onbeforeunload&&browser.Event.detach(global,"beforeunload",abort),xhr.onreadystatechange=function(){},xhr=null,!successful)return self._handleError(messages);try{replies=JSON.parse(text)}catch(error){}replies?self._receive(replies):self._handleError(messages)}},xhr.send(this.encode(messages)),xhr}}),{isUsable:function(dispatcher,endpoint,callback,context){var usable="ReactNative"===navigator.product||URI.isSameOrigin(endpoint);callback.call(context,usable)}});module.exports=XHR}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var Class=__webpack_require__(7),Set=__webpack_require__(25),URI=__webpack_require__(10),extend=__webpack_require__(8),toJSON=__webpack_require__(3),CORS=extend(Class(__webpack_require__(22),{encode:function(messages){return"message="+encodeURIComponent(toJSON(messages))},request:function(messages){var key,xhrClass=global.XDomainRequest?XDomainRequest:XMLHttpRequest,xhr=new xhrClass,id=++CORS._id,headers=this._dispatcher.headers,self=this;if(xhr.open("POST",URI.stringify(this.endpoint),!0),xhr.setRequestHeader)for(key in xhr.setRequestHeader("Pragma","no-cache"),headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);var cleanUp=function(){if(!xhr)return!1;CORS._pending.remove(id),xhr.onload=xhr.onerror=xhr.ontimeout=xhr.onprogress=null,xhr=null};return xhr.onload=function(){var replies;try{replies=JSON.parse(xhr.responseText)}catch(error){}cleanUp(),replies?self._receive(replies):self._handleError(messages)},xhr.onerror=xhr.ontimeout=function(){cleanUp(),self._handleError(messages)},xhr.onprogress=function(){},xhrClass===global.XDomainRequest&&CORS._pending.add({id:id,xhr:xhr}),xhr.send(this.encode(messages)),xhr}}),{_id:0,_pending:new Set,isUsable:function(dispatcher,endpoint,callback,context){if(URI.isSameOrigin(endpoint))return callback.call(context,!1);if(global.XDomainRequest)return callback.call(context,endpoint.protocol===location.protocol);if(global.XMLHttpRequest){var xhr=new XMLHttpRequest;return callback.call(context,void 0!==xhr.withCredentials)}return callback.call(context,!1)}});module.exports=CORS}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){(function(global){"use strict";var Class=__webpack_require__(7),URI=__webpack_require__(10),copyObject=__webpack_require__(26),extend=__webpack_require__(8),toJSON=__webpack_require__(3),JSONP=extend(Class(__webpack_require__(22),{encode:function(messages){var url=copyObject(this.endpoint);return url.query.message=toJSON(messages),url.query.jsonp="__jsonp"+JSONP._cbCount+"__",URI.stringify(url)},request:function(messages){var head=document.getElementsByTagName("head")[0],script=document.createElement("script"),callbackName=JSONP.getCallbackName(),endpoint=copyObject(this.endpoint),self=this;endpoint.query.message=toJSON(messages),endpoint.query.jsonp=callbackName;var cleanup=function(){if(!global[callbackName])return!1;global[callbackName]=void 0;try{delete global[callbackName]}catch(error){}script.parentNode.removeChild(script)};return global[callbackName]=function(replies){cleanup(),self._receive(replies)},script.type="text/javascript",script.src=URI.stringify(endpoint),head.appendChild(script),script.onerror=function(){cleanup(),self._handleError(messages)},{abort:cleanup}}}),{_cbCount:0,getCallbackName:function(){return this._cbCount+=1,"__jsonp"+this._cbCount+"__"},isUsable:function(dispatcher,endpoint,callback,context){callback.call(context,!0)}});module.exports=JSONP}).call(exports,function(){return this}())},function(module,exports,__webpack_require__){"use strict";var Scheduler=function(message,options){this.message=message,this.options=options,this.attempts=0};__webpack_require__(8)(Scheduler.prototype,{getTimeout:function(){return this.options.timeout},getInterval:function(){return this.options.interval},isDeliverable:function(){var attempts=this.options.attempts,made=this.attempts,deadline=this.options.deadline,now=(new Date).getTime();return!(void 0!==attempts&&made>=attempts)&&!(void 0!==deadline&&now>deadline)},send:function(){this.attempts+=1},succeed:function(){},fail:function(){},abort:function(){}}),module.exports=Scheduler},function(module,exports,__webpack_require__){"use strict";var Class=__webpack_require__(7),Grammar=__webpack_require__(18),Error=Class({initialize:function(code,params,message){this.code=code,this.params=Array.prototype.slice.call(params),this.message=message},toString:function(){return this.code+":"+this.params.join(",")+":"+this.message}});Error.parse=function(message){if(message=message||"",!Grammar.ERROR.test(message))return new Error(null,[],message);var parts=message.split(":"),code=parseInt(parts[0]),params=parts[1].split(",");message=parts[2];return new Error(code,params,message)};var errors={versionMismatch:[300,"Version mismatch"],conntypeMismatch:[301,"Connection types not supported"],extMismatch:[302,"Extension mismatch"],badRequest:[400,"Bad request"],clientUnknown:[401,"Unknown client"],parameterMissing:[402,"Missing required parameter"],channelForbidden:[403,"Forbidden channel"],channelUnknown:[404,"Unknown channel"],channelInvalid:[405,"Invalid channel"],extUnknown:[406,"Unknown extension"],publishFailed:[407,"Failed to publish"],serverError:[500,"Internal server error"]};for(var name in errors)!function(name){Error[name]=function(){return new Error(errors[name][0],arguments,errors[name][1]).toString()}}(name);module.exports=Error},function(module,exports,__webpack_require__){"use strict";var Extensible={addExtension:function(extension){this._extensions=this._extensions||[],this._extensions.push(extension),extension.added&&extension.added(this)},removeExtension:function(extension){if(this._extensions)for(var i=this._extensions.length;i--;)this._extensions[i]===extension&&(this._extensions.splice(i,1),extension.removed&&extension.removed(this))},pipeThroughExtensions:function(stage,message,request,callback,context){if(this.debug("Passing through ? extensions: ?",stage,message),!this._extensions)return callback.call(context,message);var extensions=this._extensions.slice(),pipe=function(message){if(!message)return callback.call(context,message);var extension=extensions.shift();if(!extension)return callback.call(context,message);var fn=extension[stage];if(!fn)return pipe(message);fn.length>=3?extension[stage](message,request,pipe):extension[stage](message,pipe)};pipe(message)}};__webpack_require__(8)(Extensible,__webpack_require__(2)),module.exports=Extensible},function(module,exports,__webpack_require__){"use strict";var Class=__webpack_require__(7),Deferrable=__webpack_require__(14);module.exports=Class(Deferrable)},function(module,exports,__webpack_require__){"use strict";var Class=__webpack_require__(7),extend=__webpack_require__(8),Deferrable=__webpack_require__(14),Subscription=Class({initialize:function(client,channels,callback,context){this._client=client,this._channels=channels,this._callback=callback,this._context=context,this._cancelled=!1},withChannel:function(callback,context){return this._withChannel=[callback,context],this},apply:function(context,args){var message=args[0];this._callback&&this._callback.call(this._context,message.data),this._withChannel&&this._withChannel[0].call(this._withChannel[1],message.channel,message.data)},cancel:function(){this._cancelled||(this._client.unsubscribe(this._channels,this),this._cancelled=!0)},unsubscribe:function(){this.cancel()}});extend(Subscription.prototype,Deferrable),module.exports=Subscription}]);
//# sourceMappingURL=externals.js.map